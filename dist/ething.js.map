{"version":3,"file":"ething.js","mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAgB,OAAID,IAEpBD,EAAa,OAAIC,GAClB,CATD,CASGK,MAAM,KACT,wBCVAH,EAAOD,QAAU,EAAjB,iCCEA,IAAIK,EAAQ,EAAQ,KAChBC,EAAS,EAAQ,IACjBC,EAAW,EAAQ,KACnBC,EAAe,EAAQ,KACvBC,EAAkB,EAAQ,KAC1BC,EAAc,EAAQ,IAE1BT,EAAOD,QAAU,SAAoBW,GACnC,OAAO,IAAIC,SAAQ,SAA4BC,EAASC,GACtD,IAAIC,EAAcJ,EAAOK,KACrBC,EAAiBN,EAAOO,QAExBb,EAAMc,WAAWJ,WACZE,EAAe,gBAGxB,IAAIG,EAAU,IAAIC,eAGlB,GAAIV,EAAOW,KAAM,CACf,IAAIC,EAAWZ,EAAOW,KAAKC,UAAY,GACnCC,EAAWb,EAAOW,KAAKE,UAAY,GACvCP,EAAeQ,cAAgB,SAAWC,KAAKH,EAAW,IAAMC,EAClE,CA6DA,GA3DAJ,EAAQO,KAAKhB,EAAOiB,OAAOC,cAAetB,EAASI,EAAOmB,IAAKnB,EAAOoB,OAAQpB,EAAOqB,mBAAmB,GAGxGZ,EAAQa,QAAUtB,EAAOsB,QAGzBb,EAAQc,mBAAqB,WAC3B,GAAKd,GAAkC,IAAvBA,EAAQe,aAQD,IAAnBf,EAAQgB,QAAkBhB,EAAQiB,aAAwD,IAAzCjB,EAAQiB,YAAYC,QAAQ,UAAjF,CAKA,IAAIC,EAAkB,0BAA2BnB,EAAUZ,EAAaY,EAAQoB,yBAA2B,KAEvGC,EAAW,CACbzB,KAFkBL,EAAO+B,cAAwC,SAAxB/B,EAAO+B,aAAiDtB,EAAQqB,SAA/BrB,EAAQuB,aAGlFP,OAAQhB,EAAQgB,OAChBQ,WAAYxB,EAAQwB,WACpB1B,QAASqB,EACT5B,OAAQA,EACRS,QAASA,GAGXd,EAAOO,EAASC,EAAQ2B,GAGxBrB,EAAU,IAjBV,CAkBF,EAGAA,EAAQyB,QAAU,WAGhB/B,EAAOJ,EAAY,gBAAiBC,EAAQ,KAAMS,IAGlDA,EAAU,IACZ,EAGAA,EAAQ0B,UAAY,WAClBhC,EAAOJ,EAAY,cAAgBC,EAAOsB,QAAU,cAAetB,EAAQ,eACzES,IAGFA,EAAU,IACZ,EAKIf,EAAM0C,uBAAwB,CAChC,IAAIC,EAAU,EAAQ,KAGlBC,GAAatC,EAAOuC,iBAAmBzC,EAAgBE,EAAOmB,OAASnB,EAAOwC,eAC9EH,EAAQI,KAAKzC,EAAOwC,qBACpBE,EAEAJ,IACFhC,EAAeN,EAAO2C,gBAAkBL,EAE5C,CAqBA,GAlBI,qBAAsB7B,GACxBf,EAAMkD,QAAQtC,GAAgB,SAA0BuC,EAAKC,QAChC,IAAhB1C,GAAqD,iBAAtB0C,EAAIC,qBAErCzC,EAAewC,GAGtBrC,EAAQuC,iBAAiBF,EAAKD,EAElC,IAIE7C,EAAOuC,kBACT9B,EAAQ8B,iBAAkB,GAIxBvC,EAAO+B,aACT,IACEtB,EAAQsB,aAAe/B,EAAO+B,YAOhC,CANE,MAAOkB,GAGP,GAA4B,SAAxBjD,EAAO+B,aACT,MAAMkB,CAEV,CAIuC,mBAA9BjD,EAAOkD,oBAChBzC,EAAQ0C,iBAAiB,WAAYnD,EAAOkD,oBAIP,mBAA5BlD,EAAOoD,kBAAmC3C,EAAQ4C,QAC3D5C,EAAQ4C,OAAOF,iBAAiB,WAAYnD,EAAOoD,kBAGjDpD,EAAOsD,aAETtD,EAAOsD,YAAYC,QAAQC,MAAK,SAAoBC,GAC7ChD,IAILA,EAAQiD,QACRvD,EAAOsD,GAEPhD,EAAU,KACZ,SAGkBiC,IAAhBtC,IACFA,EAAc,MAIhBK,EAAQkD,KAAKvD,EACf,GACF,8BC/JA,IAAIV,EAAQ,EAAQ,KAChBkE,EAAO,EAAQ,KACfC,EAAQ,EAAQ,KAChBC,EAAW,EAAQ,KAQvB,SAASC,EAAeC,GACtB,IAAIC,EAAU,IAAIJ,EAAMG,GACpBE,EAAWN,EAAKC,EAAMM,UAAU1D,QAASwD,GAQ7C,OALAvE,EAAM0E,OAAOF,EAAUL,EAAMM,UAAWF,GAGxCvE,EAAM0E,OAAOF,EAAUD,GAEhBC,CACT,CAGA,IAAIG,EAAQN,EAAeD,GAG3BO,EAAMR,MAAQA,EAGdQ,EAAMC,OAAS,SAAgBC,GAC7B,OAAOR,EAAerE,EAAM8E,MAAMV,EAAUS,GAC9C,EAGAF,EAAMI,OAAS,EAAQ,KACvBJ,EAAMK,YAAc,EAAQ,KAC5BL,EAAMM,SAAW,EAAQ,KAGzBN,EAAMO,IAAM,SAAaC,GACvB,OAAO5E,QAAQ2E,IAAIC,EACrB,EACAR,EAAMS,OAAS,EAAQ,KAEvBxF,EAAOD,QAAUgF,EAGjB/E,EAAOD,QAAP,QAAyBgF,wBC3CzB,SAASI,EAAOM,GACdtF,KAAKsF,QAAUA,CACjB,CAEAN,EAAON,UAAUa,SAAW,WAC1B,MAAO,UAAYvF,KAAKsF,QAAU,KAAOtF,KAAKsF,QAAU,GAC1D,EAEAN,EAAON,UAAUc,YAAa,EAE9B3F,EAAOD,QAAUoF,8BChBjB,IAAIA,EAAS,EAAQ,KAQrB,SAASC,EAAYQ,GACnB,GAAwB,mBAAbA,EACT,MAAM,IAAIC,UAAU,gCAGtB,IAAIC,EACJ3F,KAAK8D,QAAU,IAAItD,SAAQ,SAAyBC,GAClDkF,EAAiBlF,CACnB,IAEA,IAAImF,EAAQ5F,KACZyF,GAAS,SAAgBH,GACnBM,EAAMC,SAKVD,EAAMC,OAAS,IAAIb,EAAOM,GAC1BK,EAAeC,EAAMC,QACvB,GACF,CAKAZ,EAAYP,UAAUoB,iBAAmB,WACvC,GAAI9F,KAAK6F,OACP,MAAM7F,KAAK6F,MAEf,EAMAZ,EAAYc,OAAS,WACnB,IAAI/B,EAIJ,MAAO,CACL4B,MAJU,IAAIX,GAAY,SAAkBe,GAC5ChC,EAASgC,CACX,IAGEhC,OAAQA,EAEZ,EAEAnE,EAAOD,QAAUqF,wBCtDjBpF,EAAOD,QAAU,SAAkBqG,GACjC,SAAUA,IAASA,EAAMT,WAC3B,8BCFA,IAAInB,EAAW,EAAQ,KACnBpE,EAAQ,EAAQ,KAChBiG,EAAqB,EAAQ,KAC7BC,EAAkB,EAAQ,KAO9B,SAAS/B,EAAMU,GACb9E,KAAKqE,SAAWS,EAChB9E,KAAKoG,aAAe,CAClBpF,QAAS,IAAIkF,EACb7D,SAAU,IAAI6D,EAElB,CAOA9B,EAAMM,UAAU1D,QAAU,SAAiBT,GAGnB,iBAAXA,IACTA,EAASN,EAAM8E,MAAM,CACnBrD,IAAK2E,UAAU,IACdA,UAAU,MAGf9F,EAASN,EAAM8E,MAAMV,EAAU,CAAC7C,OAAQ,OAAQxB,KAAKqE,SAAU9D,IACxDiB,OAASjB,EAAOiB,OAAO8B,cAG9B,IAAIgD,EAAQ,CAACH,OAAiBlD,GAC1Ba,EAAUtD,QAAQC,QAAQF,GAU9B,IARAP,KAAKoG,aAAapF,QAAQmC,SAAQ,SAAoCoD,GACpED,EAAME,QAAQD,EAAYE,UAAWF,EAAYG,SACnD,IAEA1G,KAAKoG,aAAa/D,SAASc,SAAQ,SAAkCoD,GACnED,EAAMK,KAAKJ,EAAYE,UAAWF,EAAYG,SAChD,IAEOJ,EAAMM,QACX9C,EAAUA,EAAQC,KAAKuC,EAAMO,QAASP,EAAMO,SAG9C,OAAO/C,CACT,EAGA7D,EAAMkD,QAAQ,CAAC,SAAU,MAAO,OAAQ,YAAY,SAA6B3B,GAE/E4C,EAAMM,UAAUlD,GAAU,SAASE,EAAKnB,GACtC,OAAOP,KAAKgB,QAAQf,EAAM8E,MAAMxE,GAAU,CAAC,EAAG,CAC5CiB,OAAQA,EACRE,IAAKA,IAET,CACF,IAEAzB,EAAMkD,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+B3B,GAErE4C,EAAMM,UAAUlD,GAAU,SAASE,EAAKd,EAAML,GAC5C,OAAOP,KAAKgB,QAAQf,EAAM8E,MAAMxE,GAAU,CAAC,EAAG,CAC5CiB,OAAQA,EACRE,IAAKA,EACLd,KAAMA,IAEV,CACF,IAEAf,EAAOD,QAAUwE,8BC5EjB,IAAInE,EAAQ,EAAQ,KAEpB,SAASiG,IACPlG,KAAK8G,SAAW,EAClB,CAUAZ,EAAmBxB,UAAUqC,IAAM,SAAaN,EAAWC,GAKzD,OAJA1G,KAAK8G,SAASH,KAAK,CACjBF,UAAWA,EACXC,SAAUA,IAEL1G,KAAK8G,SAASF,OAAS,CAChC,EAOAV,EAAmBxB,UAAUsC,MAAQ,SAAeC,GAC9CjH,KAAK8G,SAASG,KAChBjH,KAAK8G,SAASG,GAAM,KAExB,EAUAf,EAAmBxB,UAAUvB,QAAU,SAAiB+D,GACtDjH,EAAMkD,QAAQnD,KAAK8G,UAAU,SAAwBK,GACzC,OAANA,GACFD,EAAGC,EAEP,GACF,EAEAtH,EAAOD,QAAUsG,6BCjDjB,IAAIkB,EAAe,EAAQ,KAY3BvH,EAAOD,QAAU,SAAqB0F,EAAS/E,EAAQ8G,EAAMrG,EAASqB,GACpE,IAAIiF,EAAQ,IAAIC,MAAMjC,GACtB,OAAO8B,EAAaE,EAAO/G,EAAQ8G,EAAMrG,EAASqB,EACpD,8BCfA,IAAIpC,EAAQ,EAAQ,KAChBuH,EAAgB,EAAQ,KACxBtC,EAAW,EAAQ,KACnBb,EAAW,EAAQ,KACnBoD,EAAgB,EAAQ,KACxBC,EAAc,EAAQ,KAK1B,SAASC,EAA6BpH,GAChCA,EAAOsD,aACTtD,EAAOsD,YAAYiC,kBAEvB,CAQAjG,EAAOD,QAAU,SAAyBW,GAkCxC,OAjCAoH,EAA6BpH,GAGzBA,EAAOqH,UAAYH,EAAclH,EAAOmB,OAC1CnB,EAAOmB,IAAMgG,EAAYnH,EAAOqH,QAASrH,EAAOmB,MAIlDnB,EAAOO,QAAUP,EAAOO,SAAW,CAAC,EAGpCP,EAAOK,KAAO4G,EACZjH,EAAOK,KACPL,EAAOO,QACPP,EAAOsH,kBAITtH,EAAOO,QAAUb,EAAM8E,MACrBxE,EAAOO,QAAQgH,QAAU,CAAC,EAC1BvH,EAAOO,QAAQP,EAAOiB,SAAW,CAAC,EAClCjB,EAAOO,SAAW,CAAC,GAGrBb,EAAMkD,QACJ,CAAC,SAAU,MAAO,OAAQ,OAAQ,MAAO,QAAS,WAClD,SAA2B3B,UAClBjB,EAAOO,QAAQU,EACxB,KAGYjB,EAAOwH,SAAW1D,EAAS0D,SAE1BxH,GAAQwD,MAAK,SAA6B1B,GAUvD,OATAsF,EAA6BpH,GAG7B8B,EAASzB,KAAO4G,EACdnF,EAASzB,KACTyB,EAASvB,QACTP,EAAOyH,mBAGF3F,CACT,IAAG,SAA4BwD,GAc7B,OAbKX,EAASW,KACZ8B,EAA6BpH,GAGzBsF,GAAUA,EAAOxD,WACnBwD,EAAOxD,SAASzB,KAAO4G,EACrB3B,EAAOxD,SAASzB,KAChBiF,EAAOxD,SAASvB,QAChBP,EAAOyH,qBAKNxH,QAAQE,OAAOmF,EACxB,GACF,wBCzEAhG,EAAOD,QAAU,SAAsB0H,EAAO/G,EAAQ8G,EAAMrG,EAASqB,GAOnE,OANAiF,EAAM/G,OAASA,EACX8G,IACFC,EAAMD,KAAOA,GAEfC,EAAMtG,QAAUA,EAChBsG,EAAMjF,SAAWA,EACViF,CACT,6BClBA,IAAIhH,EAAc,EAAQ,IAS1BT,EAAOD,QAAU,SAAgBa,EAASC,EAAQ2B,GAChD,IAAI4F,EAAiB5F,EAAS9B,OAAO0H,eAEhC5F,EAASL,QAAWiG,IAAkBA,EAAe5F,EAASL,QAGjEtB,EAAOJ,EACL,mCAAqC+B,EAASL,OAC9CK,EAAS9B,OACT,KACA8B,EAASrB,QACTqB,IAPF5B,EAAQ4B,EAUZ,8BCvBA,IAAIpC,EAAQ,EAAQ,KAUpBJ,EAAOD,QAAU,SAAuBgB,EAAME,EAASoH,GAMrD,OAJAjI,EAAMkD,QAAQ+E,GAAK,SAAmBhB,GACpCtG,EAAOsG,EAAGtG,EAAME,EAClB,IAEOF,CACT,8BCjBA,IAAIX,EAAQ,EAAQ,KAChBkI,EAAsB,EAAQ,IAE9BC,EAAuB,CACzB,eAAgB,qCAGlB,SAASC,EAAsBvH,EAASmF,IACjChG,EAAMqI,YAAYxH,IAAYb,EAAMqI,YAAYxH,EAAQ,mBAC3DA,EAAQ,gBAAkBmF,EAE9B,CAcA,IAXM8B,EAWF1D,EAAW,CACb0D,UAX8B,oBAAnB9G,gBAGmB,oBAAZsH,WADhBR,EAAU,EAAQ,MAKbA,GAMPF,iBAAkB,CAAC,SAA0BjH,EAAME,GAEjD,OADAqH,EAAoBrH,EAAS,gBACzBb,EAAMc,WAAWH,IACnBX,EAAMuI,cAAc5H,IACpBX,EAAMwI,SAAS7H,IACfX,EAAMyI,SAAS9H,IACfX,EAAM0I,OAAO/H,IACbX,EAAM2I,OAAOhI,GAENA,EAELX,EAAM4I,kBAAkBjI,GACnBA,EAAKkI,OAEV7I,EAAM8I,kBAAkBnI,IAC1ByH,EAAsBvH,EAAS,mDACxBF,EAAK2E,YAEVtF,EAAM+I,SAASpI,IACjByH,EAAsBvH,EAAS,kCACxBmI,KAAKC,UAAUtI,IAEjBA,CACT,GAEAoH,kBAAmB,CAAC,SAA2BpH,GAE7C,GAAoB,iBAATA,EACT,IACEA,EAAOqI,KAAKE,MAAMvI,EACO,CAAzB,MAAO4C,GAAkB,CAE7B,OAAO5C,CACT,GAMAiB,QAAS,EAETkB,eAAgB,aAChBG,eAAgB,eAEhBkG,kBAAmB,EAEnBnB,eAAgB,SAAwBjG,GACtC,OAAOA,GAAU,KAAOA,EAAS,GACnC,EAGFqC,QAAmB,CACjByD,OAAQ,CACN,OAAU,uCAId7H,EAAMkD,QAAQ,CAAC,SAAU,MAAO,SAAS,SAA6B3B,GACpE6C,EAASvD,QAAQU,GAAU,CAAC,CAC9B,IAEAvB,EAAMkD,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+B3B,GACrE6C,EAASvD,QAAQU,GAAUvB,EAAM8E,MAAMqD,EACzC,IAEAvI,EAAOD,QAAUyE,wBC7FjBxE,EAAOD,QAAU,SAAcsH,EAAImC,GACjC,OAAO,WAEL,IADA,IAAIC,EAAO,IAAIC,MAAMlD,UAAUO,QACtB4C,EAAI,EAAGA,EAAIF,EAAK1C,OAAQ4C,IAC/BF,EAAKE,GAAKnD,UAAUmD,GAEtB,OAAOtC,EAAGuC,MAAMJ,EAASC,EAC3B,CACF,8BCRA,IAAIrJ,EAAQ,EAAQ,KAEpB,SAASyJ,EAAOtG,GACd,OAAOuG,mBAAmBvG,GACxBwG,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,IACrB,CASA/J,EAAOD,QAAU,SAAkB8B,EAAKC,EAAQC,GAE9C,IAAKD,EACH,OAAOD,EAGT,IAAImI,EACJ,GAAIjI,EACFiI,EAAmBjI,EAAiBD,QAC/B,GAAI1B,EAAM8I,kBAAkBpH,GACjCkI,EAAmBlI,EAAO4D,eACrB,CACL,IAAIuE,EAAQ,GAEZ7J,EAAMkD,QAAQxB,GAAQ,SAAmByB,EAAKC,GACxCD,UAIAnD,EAAM8J,QAAQ3G,GAChBC,GAAY,KAEZD,EAAM,CAACA,GAGTnD,EAAMkD,QAAQC,GAAK,SAAoB4G,GACjC/J,EAAMgK,OAAOD,GACfA,EAAIA,EAAEE,cACGjK,EAAM+I,SAASgB,KACxBA,EAAIf,KAAKC,UAAUc,IAErBF,EAAMnD,KAAK+C,EAAOrG,GAAO,IAAMqG,EAAOM,GACxC,IACF,IAEAH,EAAmBC,EAAMK,KAAK,IAChC,CAMA,OAJIN,IACFnI,KAA8B,IAAtBA,EAAIQ,QAAQ,KAAc,IAAM,KAAO2H,GAG1CnI,CACT,wBCxDA7B,EAAOD,QAAU,SAAqBgI,EAASwC,GAC7C,OAAOA,EACHxC,EAAQgC,QAAQ,OAAQ,IAAM,IAAMQ,EAAYR,QAAQ,OAAQ,IAChEhC,CACN,8BCXA,IAAI3H,EAAQ,EAAQ,KAEpBJ,EAAOD,QACLK,EAAM0C,uBAIG,CACL0H,MAAO,SAAeC,EAAMrE,EAAOsE,EAASC,EAAMC,EAAQC,GACxD,IAAIC,EAAS,GACbA,EAAOhE,KAAK2D,EAAO,IAAMX,mBAAmB1D,IAExChG,EAAM2K,SAASL,IACjBI,EAAOhE,KAAK,WAAa,IAAIkE,KAAKN,GAASO,eAGzC7K,EAAM8K,SAASP,IACjBG,EAAOhE,KAAK,QAAU6D,GAGpBvK,EAAM8K,SAASN,IACjBE,EAAOhE,KAAK,UAAY8D,IAGX,IAAXC,GACFC,EAAOhE,KAAK,UAGdqE,SAASL,OAASA,EAAOR,KAAK,KAChC,EAEAnH,KAAM,SAAcsH,GAClB,IAAIW,EAAQD,SAASL,OAAOM,MAAM,IAAIC,OAAO,aAAeZ,EAAO,cACnE,OAAQW,EAAQE,mBAAmBF,EAAM,IAAM,IACjD,EAEAG,OAAQ,SAAgBd,GACtBtK,KAAKqK,MAAMC,EAAM,GAAIO,KAAKQ,MAAQ,MACpC,GAMK,CACLhB,MAAO,WAAkB,EACzBrH,KAAM,WAAkB,OAAO,IAAM,EACrCoI,OAAQ,WAAmB,yBCzCjCvL,EAAOD,QAAU,SAAuB8B,GAItC,MAAO,gCAAgC4J,KAAK5J,EAC9C,8BCXA,IAAIzB,EAAQ,EAAQ,KAEpBJ,EAAOD,QACLK,EAAM0C,uBAIN,WACE,IAEI4I,EAFAC,EAAO,kBAAkBF,KAAKG,UAAUC,WACxCC,EAAiBX,SAASY,cAAc,KAS5C,SAASC,EAAWnK,GAClB,IAAIoK,EAAOpK,EAWX,OATI8J,IAEFG,EAAeI,aAAa,OAAQD,GACpCA,EAAOH,EAAeG,MAGxBH,EAAeI,aAAa,OAAQD,GAG7B,CACLA,KAAMH,EAAeG,KACrBE,SAAUL,EAAeK,SAAWL,EAAeK,SAASpC,QAAQ,KAAM,IAAM,GAChFqC,KAAMN,EAAeM,KACrBC,OAAQP,EAAeO,OAASP,EAAeO,OAAOtC,QAAQ,MAAO,IAAM,GAC3EuC,KAAMR,EAAeQ,KAAOR,EAAeQ,KAAKvC,QAAQ,KAAM,IAAM,GACpEwC,SAAUT,EAAeS,SACzBC,KAAMV,EAAeU,KACrBC,SAAiD,MAAtCX,EAAeW,SAASC,OAAO,GAChCZ,EAAeW,SACf,IAAMX,EAAeW,SAEnC,CAUA,OARAf,EAAYM,EAAWW,OAAOC,SAASX,MAQhC,SAAyBY,GAC9B,IAAIC,EAAU1M,EAAM8K,SAAS2B,GAAeb,EAAWa,GAAcA,EACrE,OAAQC,EAAOX,WAAaT,EAAUS,UAChCW,EAAOV,OAASV,EAAUU,IAClC,CACD,CAlDD,GAsDS,WACL,OAAO,CACT,6BC/DJ,IAAIhM,EAAQ,EAAQ,KAEpBJ,EAAOD,QAAU,SAA6BkB,EAAS8L,GACrD3M,EAAMkD,QAAQrC,GAAS,SAAuBmF,EAAOqE,GAC/CA,IAASsC,GAAkBtC,EAAK7I,gBAAkBmL,EAAenL,gBACnEX,EAAQ8L,GAAkB3G,SACnBnF,EAAQwJ,GAEnB,GACF,8BCTA,IAAIrK,EAAQ,EAAQ,KAIhB4M,EAAoB,CACtB,MAAO,gBAAiB,iBAAkB,eAAgB,OAC1D,UAAW,OAAQ,OAAQ,oBAAqB,sBAChD,gBAAiB,WAAY,eAAgB,sBAC7C,UAAW,cAAe,cAgB5BhN,EAAOD,QAAU,SAAsBkB,GACrC,IACIuC,EACAD,EACAoG,EAHAmD,EAAS,CAAC,EAKd,OAAK7L,GAELb,EAAMkD,QAAQrC,EAAQgM,MAAM,OAAO,SAAgBC,GAKjD,GAJAvD,EAAIuD,EAAK7K,QAAQ,KACjBmB,EAAMpD,EAAM+M,KAAKD,EAAKE,OAAO,EAAGzD,IAAIlG,cACpCF,EAAMnD,EAAM+M,KAAKD,EAAKE,OAAOzD,EAAI,IAE7BnG,EAAK,CACP,GAAIsJ,EAAOtJ,IAAQwJ,EAAkB3K,QAAQmB,IAAQ,EACnD,OAGAsJ,EAAOtJ,GADG,eAARA,GACasJ,EAAOtJ,GAAOsJ,EAAOtJ,GAAO,IAAI6J,OAAO,CAAC9J,IAEzCuJ,EAAOtJ,GAAOsJ,EAAOtJ,GAAO,KAAOD,EAAMA,CAE3D,CACF,IAEOuJ,GAnBgBA,CAoBzB,wBC9BA9M,EAAOD,QAAU,SAAgBuN,GAC/B,OAAO,SAAcC,GACnB,OAAOD,EAAS1D,MAAM,KAAM2D,EAC9B,CACF,8BCxBA,IAAIjJ,EAAO,EAAQ,KACfsE,EAAW,EAAQ,KAMnBlD,EAAW8H,OAAO3I,UAAUa,SAQhC,SAASwE,EAAQ3G,GACf,MAA8B,mBAAvBmC,EAAS+H,KAAKlK,EACvB,CA0EA,SAAS4F,EAAS5F,GAChB,OAAe,OAARA,GAA+B,iBAARA,CAChC,CAsCA,SAASmK,EAAWnK,GAClB,MAA8B,sBAAvBmC,EAAS+H,KAAKlK,EACvB,CAmEA,SAASD,EAAQqK,EAAKtG,GAEpB,GAAIsG,QAUJ,GALmB,iBAARA,IAETA,EAAM,CAACA,IAGLzD,EAAQyD,GAEV,IAAK,IAAIhE,EAAI,EAAGiE,EAAID,EAAI5G,OAAQ4C,EAAIiE,EAAGjE,IACrCtC,EAAGoG,KAAK,KAAME,EAAIhE,GAAIA,EAAGgE,QAI3B,IAAK,IAAInK,KAAOmK,EACVH,OAAO3I,UAAUgJ,eAAeJ,KAAKE,EAAKnK,IAC5C6D,EAAGoG,KAAK,KAAME,EAAInK,GAAMA,EAAKmK,EAIrC,CAsDA3N,EAAOD,QAAU,CACfmK,QAASA,EACTvB,cAhQF,SAAuBpF,GACrB,MAA8B,yBAAvBmC,EAAS+H,KAAKlK,EACvB,EA+PEqF,SAAUA,EACV1H,WAxPF,SAAoBqC,GAClB,MAA4B,oBAAbuK,UAA8BvK,aAAeuK,QAC9D,EAuPE9E,kBA/OF,SAA2BzF,GAOzB,MAL4B,oBAAhBwK,aAAiCA,YAAkB,OACpDA,YAAYC,OAAOzK,GAEnB,GAAUA,EAAU,QAAMA,EAAI0F,kBAAkB8E,WAG7D,EAwOE7C,SAhOF,SAAkB3H,GAChB,MAAsB,iBAARA,CAChB,EA+NEwH,SAvNF,SAAkBxH,GAChB,MAAsB,iBAARA,CAChB,EAsNE4F,SAAUA,EACVV,YA/MF,SAAqBlF,GACnB,YAAsB,IAARA,CAChB,EA8ME6G,OA5LF,SAAgB7G,GACd,MAA8B,kBAAvBmC,EAAS+H,KAAKlK,EACvB,EA2LEuF,OAnLF,SAAgBvF,GACd,MAA8B,kBAAvBmC,EAAS+H,KAAKlK,EACvB,EAkLEwF,OA1KF,SAAgBxF,GACd,MAA8B,kBAAvBmC,EAAS+H,KAAKlK,EACvB,EAyKEmK,WAAYA,EACZ7E,SAxJF,SAAkBtF,GAChB,OAAO4F,EAAS5F,IAAQmK,EAAWnK,EAAI0K,KACzC,EAuJE/E,kBA/IF,SAA2B3F,GACzB,MAAkC,oBAApB2K,iBAAmC3K,aAAe2K,eAClE,EA8IEpL,qBArHF,WACE,OAAyB,oBAAd8I,WAAmD,gBAAtBA,UAAUuC,UAI9B,oBAAXxB,QACa,oBAAbxB,QAEX,EA8GE7H,QAASA,EACT4B,MArDF,SAASA,IACP,IAAIkJ,EAAS,CAAC,EACd,SAASC,EAAY9K,EAAKC,GACG,iBAAhB4K,EAAO5K,IAAoC,iBAARD,EAC5C6K,EAAO5K,GAAO0B,EAAMkJ,EAAO5K,GAAMD,GAEjC6K,EAAO5K,GAAOD,CAElB,CAEA,IAAK,IAAIoG,EAAI,EAAGiE,EAAIpH,UAAUO,OAAQ4C,EAAIiE,EAAGjE,IAC3CrG,EAAQkD,UAAUmD,GAAI0E,GAExB,OAAOD,CACT,EAwCEtJ,OA9BF,SAAgBwJ,EAAGC,EAAG/E,GAQpB,OAPAlG,EAAQiL,GAAG,SAAqBhL,EAAKC,GAEjC8K,EAAE9K,GADAgG,GAA0B,mBAARjG,EACXe,EAAKf,EAAKiG,GAEVjG,CAEb,IACO+K,CACT,EAsBEnB,KA1IF,SAAcqB,GACZ,OAAOA,EAAIzE,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,GACjD,YC9JA/J,EAAOD,QAAU,SAAmB4N,GAClC,OAAc,MAAPA,GAAkC,MAAnBA,EAAIc,aACY,mBAA7Bd,EAAIc,YAAY7F,UAA2B+E,EAAIc,YAAY7F,SAAS+E,EAC/E,WCVA3N,EAAOD,QAAU,SAAU2O,EAAMC,GAC/B,GAAoB,iBAATD,EACT,MAAM,IAAI7I,UAAU,qBAgCtB,IA7BA,IA4BIM,EA5BAqI,EAAMI,OAAOF,GAGbG,EAAQ,GAKRC,IAAWH,KAASA,EAAKG,SAWzBC,IAAWJ,KAASA,EAAKI,SAIzBC,GAAU,EAGVC,EAAQN,GAAiC,iBAAjBA,EAAW,MAAiBA,EAAKM,MAAQ,GAG5DtF,EAAI,EAAGuF,EAAMV,EAAIzH,OAAQ4C,EAAIuF,EAAKvF,IAGzC,OAFAxD,EAAIqI,EAAI7E,IAGR,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACHkF,GAAS,KAAO1I,EAChB,MAEF,IAAK,IACH,GAAI2I,EAAU,CACZD,GAAS,IACZ,KACC,CAEF,IAAK,IACL,IAAK,IACH,GAAIC,EAAU,CACZD,GAAS1I,EACZ,KACC,CAEF,IAAK,IACH,GAAI2I,EAAU,CACZE,GAAU,EACbH,GAAS,IACT,KACC,CAEF,IAAK,IACH,GAAIC,EAAU,CACZE,GAAU,EACbH,GAAS,IACT,KACC,CAEF,IAAK,IACH,GAAIG,EAAS,CACXH,GAAS,IACZ,KACC,CACAA,GAAS,KAAO1I,EAChB,MAEF,IAAK,IAKH,IAFA,IAAIgJ,EAAWX,EAAI7E,EAAI,GACnByF,EAAY,EACK,MAAfZ,EAAI7E,EAAI,IACZyF,IACAzF,IAEF,IAAI0F,EAAWb,EAAI7E,EAAI,GAElBoF,IAKcK,EAAY,IACV,MAAbD,QAAiC/L,IAAb+L,GACP,MAAbE,QAAiCjM,IAAbiM,EAQxBR,GAAS,WAJTA,GAAS,sBACTlF,KAVFkF,GAAS,KAgBX,MAEF,QACEA,GAAS1I,EAUb,OAJK8I,IAAWA,EAAM5M,QAAQ,OAC5BwM,EAAQ,IAAMA,EAAQ,KAGjB,IAAIxD,OAAOwD,EAAOI,EAC3B,iBClHA,IAAIK,EAAS,EAAQ,KAGjBC,GAFQ,EAAQ,KACL,EAAQ,KACJ,EAAQ,MAI3BD,EAAOE,GAAG,2BAA2B,SAASC,EAAKC,GAClD,IAAIC,EAAWL,EAAOM,KAAKC,IAAIH,GAC5BC,GACFL,EAAOM,KAAKrE,OAAOoE,EACrB,IAKAL,EAAOM,KAAO,CAEZE,UAAW,GACXC,QAAS,KASTC,KAAM,SAAS1C,EAAU2C,GACrB,IAAIC,EAAO/P,KAkCX,OAhCkB,OAAfA,KAAK4P,SAAkBE,KAEtB9P,KAAK4P,QAAUT,EAAOnO,QAAQ,CAC1B,IAAO,aACP,OAAU,MACV,SAAY,SACb+C,MAAK,SAASiM,GAiBb,OAfAD,EAAKH,SAAU,EAGfG,EAAKJ,UAAUM,OAAO,EAAEF,EAAKJ,UAAU/I,QAEvCoJ,EAAGE,KAAI,SAASV,GACZ,OAAOL,EAAOgB,YAAYX,EAC9B,IAAGY,QAAO,SAASZ,GACf,QAASA,CACb,IAAGrM,SAAQ,SAASkN,GAClBN,EAAKJ,UAAUhJ,KAAK0J,EACtB,IAEAlB,EAAOmB,QAAQ,sBAERP,EAAKJ,SAChB,KAGJ3P,KAAK4P,QAAQ7L,MAAK,SAAS4L,GACA,mBAAZxC,GACPA,EAASG,KAAKyC,EAAMJ,EAC5B,IAEO3P,KAAK4P,OAChB,EAEDW,cAAe,EAQdC,QAAS,SAASrD,GAChB,IAAI4C,EAAO/P,KAGX,OAFAA,KAAKuQ,cAAgB1F,KAAKQ,MAEnB8D,EAAOnO,QAAQ,CACpB,IAAO,aACP,OAAU,MACV,SAAY,SACX+C,MAAK,SAASiM,GAaf,OAXAA,EAAKA,EAAGE,KAAI,SAASG,GACnB,OAAOlB,EAAOgB,YAAYE,EAC5B,IAAGD,QAAO,SAASC,GACjB,OAAOA,CACT,IAEAN,EAAKU,OAAOT,GAAI,GAEY,mBAAb7C,GACPA,EAASG,KAAKyC,EAAMA,EAAKJ,WAE1BI,EAAKJ,SACd,GAEF,EAEDvE,OAAQ,SAAUoE,EAASkB,GACxB,GAAGnH,MAAMQ,QAAQyF,GACfA,EAASrM,SAAQ,SAASkN,GACxBjF,OAAOiF,EAAEK,EACX,SAIF,GAAuB,iBAAblB,IACRA,EAAWxP,KAAK0P,IAAIF,IADtB,CAOA,IAFA,IAAImB,EAAU,GAELnH,EAAE,EAAGA,EAAExJ,KAAK2P,UAAU/I,OAAQ4C,IAAK,CAC1C,IAAI6G,EAAIrQ,KAAK2P,UAAUnG,GACvB,GAAI6G,EAAEpJ,MAAQuI,EAASvI,KAAM,CAC3B0J,EAAQhK,KAAK0J,GACbrQ,KAAK2P,UAAUM,OAAOzG,EAAG,GACzB,KACF,CACF,EAEIkH,GAAaC,EAAQ/J,QACvBuI,EAAOmB,QAAQ,sBAAuB,CAAC,GAAIK,EAAS,IAdtD,CAgBF,EAEAF,OAAQ,SAAUG,EAAcC,EAAYH,GAEtCnH,MAAMQ,QAAQ6G,KAAeA,EAAe,CAACA,IAEjD,IAAIb,EAAO/P,KACP2Q,EAAU,GACVG,EAAQ,GACRC,EAAU,GAEXF,IAGD7Q,KAAK2P,UAAUxM,SAAQ,SAASkN,EAAGW,GAEjC,IAAI,IAAIxH,KAAKoH,EACX,GAAGA,EAAapH,GAAGvC,OAASoJ,EAAEpJ,KAC5B,OAIJ0J,EAAQhK,KAAKqK,EACf,IAEAL,EAAQT,KAAI,SAAS1G,GACnB,IAAI6G,EAAIN,EAAKJ,UAAUnG,GAEvB,OADAuG,EAAKJ,UAAUM,OAAOzG,EAAG,GAClB6G,CACT,KAIFO,EAAazN,SAAQ,SAASkN,EAAGW,GAE/B,IAAIC,GAAQ,EACZ,IAAI,IAAIzH,KAAKuG,EAAKJ,UAChB,GAAGI,EAAKJ,UAAUnG,GAAGvC,OAASoJ,EAAEpJ,KAAK,CACnCgK,EAAQzH,EACR,KACF,CAEF,IAAW,IAARyH,EAEDH,EAAMnK,KAAK0J,GACXN,EAAKJ,UAAUhJ,KAAK0J,OACf,CAEL,IAAIa,EAAInB,EAAKJ,UAAUsB,GACpBC,EAAEC,UAAUd,EAAEe,SACfL,EAAQpK,KAAKuK,GAEfN,EAAaI,GAASE,CACxB,CAEF,IAEA,IAAIG,EAAaV,EAAQ/J,OAAO,GAAKkK,EAAMlK,OAAO,GAAKmK,EAAQnK,OAAO,EAMtE,OAJI8J,GAAaW,GACflC,EAAOmB,QAAQ,sBAAuB,CAACQ,EAAOH,EAASI,IAGlD,CACLpB,UAAYiB,EACZD,QAAUA,EACVG,MAAQA,EACRC,QAASA,EACTM,WAAYA,EAEhB,EAWA3B,IAAK,SAAUzI,GACb,IAAI,IAAIuC,EAAE,EAAGA,EAAExJ,KAAK2P,UAAU/I,OAAQ4C,IACpC,GAAGxJ,KAAK2P,UAAUnG,GAAGvC,OAASA,EAC5B,OAAOjH,KAAK2P,UAAUnG,EAC5B,EAgBA+E,KAAM,SAAU6B,GACZ,IAAIkB,EAAKlC,EAAagB,EAAQ,CAC1BzB,UAAU,EACVC,UAAU,IAEhB,OAAO5O,KAAK2P,UAAUS,QAAO,SAASC,GAChC,OAAOiB,EAAGhG,KAAK+E,EAAE/F,OACvB,GACF,EAQAiH,KAAM,WACJ,OAAOvR,KAAK2P,SACd,EASA6B,KAAM,SAAUC,GACd,OAAOzR,KAAK2P,UAAUS,OAAOqB,EAC/B,EAODC,SAAU,WACT,OAAwB,IAAjB1R,KAAK4P,SAAsB5P,KAAK4P,SAAmC,YAAxB5P,KAAK4P,QAAQ+B,OAChE,GAKD9R,EAAOD,QAAUuP,EAAOM,oBC9RxB,IAAIxP,EAAQ,EAAQ,KAChBkP,EAAS,EAAQ,KAErB,SAASyC,IAET,CAmBA,SAASC,IAET,CAIA,SAASC,EAAUC,EAAO3Q,GACtBpB,KAAK+R,MAAQA,EACb/R,KAAKoB,SAAWA,CACpB,CAmBA,SAAS4Q,EAAWC,GAChBjS,KAAKiS,OAASA,CAClB,CA/CAL,EAAKlN,UAAUwN,QAAU,WAEzB,EAEAN,EAAKlN,UAAUyN,UAAY,WAE3B,EAEAP,EAAKlN,UAAU0N,IAAM,SAASC,GAE9B,EAEAT,EAAKlN,UAAU4N,OAAS,SAAS5Q,GAC7B,OAAOA,CACX,EAMAzB,EAAMsS,SAASV,EAAQD,GAOvB3R,EAAMsS,SAAST,EAAWF,GAE1BE,EAAUpN,UAAUwN,QAAU,WAC1B/C,EAAOvK,MAAMP,SAASnD,KAAO,CACzBC,SAAUnB,KAAK+R,MACf3Q,SAAUpB,KAAKoB,SAEvB,EAEA0Q,EAAUpN,UAAUyN,UAAY,WAC5BhD,EAAOvK,MAAMP,SAASnD,KAAO,CAAC,CAClC,EAEA4Q,EAAUpN,UAAU4N,OAAS,SAAS5Q,GAClC,OAAOA,EAAIkI,QAAQ,sBAAuB,MAAMA,QAAQ,OAAQ,KAAKmI,MAAM,IAAI3Q,SAAS,IAC5F,EAMAnB,EAAMsS,SAASP,EAAYJ,GAE3BI,EAAWtN,UAAUwN,QAAU,WAC3B/C,EAAOvK,MAAMP,SAASvD,QAAQgH,OAAO,aAAe9H,KAAKiS,MAC7D,EAEAD,EAAWtN,UAAUyN,UAAY,kBACtBhD,EAAOvK,MAAMP,SAASvD,QAAQgH,OAAO,YAChD,EAEAkK,EAAWtN,UAAU4N,OAAS,SAAS5Q,GACnC,OAAOzB,EAAMuS,YAAY9Q,EAAK,UAAW1B,KAAKyS,MAClD,EAEA,IAAIC,EAAQ,KAKRxR,EAAO,CACPuD,SAAU,WACN,OAAOiO,CACX,EAOAC,gBAAiB,WACb,QAASD,aAAiBb,EAC9B,EAEAK,QAAS,SAAShR,GACXwR,GAAOA,EAAMP,aAChBO,EAAQxR,GACFgR,SACV,EAEAU,MAAO,WACH5S,KAAKkS,QAAQ,IAAIL,EACrB,EAOAgB,UAAW,SAASC,GAChB9S,KAAKkS,QAAQ,IAAIF,EAAWc,GAChC,EAQAC,aAAc,SAAShB,EAAO3Q,GAC1BpB,KAAKkS,QAAQ,IAAIJ,EAAUC,EAAO3Q,GACtC,GAIJF,EAAK0R,QAGLzD,EAAOjO,KAAOA,EAEdrB,EAAOD,QAAUsB,iBC3HjB,IAAIjB,EAAQ,EAAQ,KAChB+S,EAAQ,EAAQ,KAChBC,EAAc,EAAQ,KACtBrO,EAAQ,EAAQ,KAOhBuK,EAAS,CAAC,EAGDlP,EAAM0E,OACC1E,EAAMiT,cAG1B/D,EAAO6D,MAAQA,EAEf7D,EAAOlP,MAAQA,EAEfkP,EAAOvK,MAAQA,EAAMC,OAAO,CAAC,GAI7BsK,EAAO5O,OAAS,CACf4S,UAAW,yBAIZhE,EAAOiE,SAAU,EA6DjBH,EAAY9D,GAMZA,EAAOkE,SAAW,SAAS3R,EAAKR,GAe/B,MAZI,kBAAkBoK,KAFtB5J,EAAMA,GAAO,OAIR,MAAM4J,KAAK5J,IAAQA,IACtBA,EAAM,IAAIA,GAEXA,EAAM4R,IAAW5R,GAGfR,GAAQqS,EAAS7R,KACnBA,EAAM1B,KAAKkB,KAAKuD,WAAW6N,OAAO5Q,IAG5BA,CACR,EAGA,IAAI6R,EAAW,SAAS7R,GACvB,OAAO,IAAKwJ,OAAO,gBAAgBoI,IAAS1J,QAAQ,kBAAkB,KAAM0B,KAAK5J,EAClF,EAGI4R,EAAS,WACZ,OAAOnE,EAAO5O,OAAO4S,UAAUvJ,QAAQ,OAAQ,IAAM,MACtD,EAEAuF,EAAOmE,OAAS,WACf,OAAOnE,EAAOkE,UACf,EAIkBlE,EAAOgB,YAAc,SAAUiB,GAE7C,IAAI,IAAI5H,KAAK4H,EAAKoC,QAAQ,CACtB,IAAIC,EAAUrC,EAAKoC,QAAQhK,GAAGsD,MAAM,KAAK4G,MAEzC,QAA6B,IAAnBvE,EAAOsE,GACb,OAAO,IAAItE,EAAOsE,GAASrC,EAGnC,CAIA,OAFAuC,QAAQC,KAAK,iBAAmBxC,EAAKyC,MAE9B,IAAI1E,EAAO2E,SAAS1C,EAG/B,EAOAjC,EAAO4E,kBAAoB,SAASnT,GAEnC,GAAkB,iBAARA,GAA6B,OAATA,EAAc,CAE3C,IAAImJ,EAAUR,MAAMQ,QAAQnJ,GACxBmJ,IAASnJ,EAAO,CAACA,IAGrBA,EAAOA,EAAKsP,KAAI,SAASG,GACxB,OAAOlB,EAAOgB,YAAYE,EAC3B,IAAGD,QAAO,SAASC,GAClB,OAAOA,CACR,IAKGlB,EAAOM,OACT7O,EAAOuO,EAAOM,KAAKgB,OAAO7P,GAAM+O,WAE7B5F,IAASnJ,EAAOA,EAAKgG,OAAShG,EAAK,GAAK,KAC7C,CAEA,OAAOA,CACR,EA0DAuO,EAAOnO,QAAU,SAASgT,EAAI7G,GAC1B,IAAI4C,EAAO/P,KAEM,iBAAPgU,IACZA,EAAM,CACLtS,IAAKsS,IAGP,IAAI3B,EAAUhF,OAAO4G,OAAO,CAC3BzS,OAAQ,MACRgD,QAASxE,KACT0B,IAAK,KACLd,KAAM,KACNsT,YAAa,KACbpT,QAAS,KACTqT,SAAU,OACVC,UAAW,KACLzS,OAAQ,CAAC,GACdqS,GASC,OAPAhU,KAAKkB,KAAKuD,WAAW2N,IAAIC,GAErBA,EAAQ6B,cACR7B,EAAQvR,QAAUuR,EAAQvR,SAAW,CAAC,EACtCuR,EAAQvR,QAAQ,gBAAkBuR,EAAQ6B,aAGvClU,KAAK4E,MAAM5D,QAAQ,CACtBU,IAAK2Q,EAAQ3Q,IACbkG,QAAS5H,KAAKsT,SACd9R,OAAQ6Q,EAAQ7Q,OAAO8B,cACvB3B,OAAQ0Q,EAAQ1Q,OAChBf,KAAMyR,EAAQzR,KACd0B,aAAc+P,EAAQ8B,SAAS7Q,cAC/BxC,QAASuR,EAAQvR,UAElBiD,MAAK,SAAS1B,GAOb,IAAIzB,EAAOyB,EAASzB,KAEpB,GAAGyR,EAAQ+B,UACP,IACIxT,EAAOyR,EAAQ+B,UAAU9G,KAAK+E,EAAQ7N,QAAQ5D,EAGlD,CAFE,MAAM4C,GACJ,OAAOhD,QAAQE,OAAO+N,OAAOjL,GACjC,CAGJ,OAAOhD,QAAQC,QAAQG,EAE3B,IAAG,SAAS0G,GAER,OAAIA,EAAMjF,SAQQ,IAAI7B,SAAQ,SAASC,EAASC,GAC1C,IAAIE,EAAO0G,EAAMjF,SAASzB,KACtB0B,EAAegF,EAAM/G,OAAO+B,aAEhC,SAAS+R,EAAWzT,GAC1B,GAAoB,iBAATA,EACF,IACIA,EAAOqI,KAAKE,MAAMvI,EAItB,CAHE,MAAM4C,GAEJ,YADA9C,EAAO,oBAEX,CAEDD,EAAQG,EACV,CAEA,OAAO0B,GAED,IAAK,OACD+R,EAAWzT,GACX,MACJ,IAAK,OACDH,EAAQG,GACR,MACJ,IAAK,OAED,GAAyB,oBAAf0T,WAEN,YADA5T,EAAO,6BAIX,IAAI6T,EAAa,IAAID,WACrBC,EAAWC,OAAS,WAChBH,EAAW5F,OAAOgG,aAAahL,MAAM,KAAM,IAAIiL,WAAW1U,KAAKiO,SACnE,EACAsG,EAAWI,kBAAkB/T,GAE7B,MACJ,IAAK,cACDyT,EAAW5F,OAAOgG,aAAahL,MAAM,KAAM,IAAIiL,WAAW9T,KAC1D,MACJ,IAAK,SACDyT,EAAWzT,EAAK2E,SAAS,SACzB,MACJ,QACI7E,EAAO4B,EAAa,iCAGlC,IAEiByB,MAAK,SAAS6Q,GAC3B,OAAOpU,QAAQE,OAAOkU,EAAUtP,QACpC,IAAG,SAASuP,GACR,OAAOrU,QAAQE,OAAOmU,EAC1B,IAGSvN,EAAMtG,QAIRR,QAAQE,OAAO,gCAGtBiT,QAAQmB,IAAI,QAASxN,EAAMhC,SACpB9E,QAAQE,OAAO4G,EAAMhC,SAAW,mBAE7C,IAAGvB,MAAK,SAASnD,GAOb,OANAmP,EAAKO,QAAQ,yBAAyB,CAAC1P,IAEhB,mBAAbuM,GACNA,EAASG,KAAKyC,EAAMnP,GAAM,GAGvBA,CACX,IAAG,SAASmU,GAOR,OANAhF,EAAKO,QAAQ,uBAAuB,CAACyE,IAEd,mBAAb5H,GACNA,EAASG,KAAKyC,EAAM,KAAMgF,GAGvBvU,QAAQE,OAAOqU,EAC1B,GAEJ,EAuBA5F,EAAOoC,KAAOpC,EAAOqC,KAAO,SAASrD,EAAEC,GAEtC,IAAI4G,EAAQ,KAAM7H,EAAW,KAa7B,OAXqB,GAAlB9G,UAAUO,OACc,mBAAhBP,UAAU,GACnB8G,EAAW9G,UAAU,GAErB2O,EAAQ3O,UAAU,GAEZA,UAAUO,QAAQ,IACzBoO,EAAQ3O,UAAU,GAClB8G,EAAW9G,UAAU,IAGf8I,EAAOnO,QAAQ,CACrB,IAAO,cAAgBf,EAAMgV,MAAM,CAAC,EAAID,IACxC,OAAU,MACV,SAAY,OACZ,UAAa7F,EAAO4E,mBACnB5G,EACH,EAgBAgC,EAAOO,IAAM,SAASvB,EAAEC,GAEvB,IAAI5J,EACJ,GAAG2J,aAAagB,EAAO2E,SACtBtP,EAAU2J,EACVA,EAAIA,EAAElH,UAEF,IAAIhH,EAAMiV,KAAK/G,GACnB,KAAM,+DAA+DA,EAItE,IAAIhB,EAAWiB,EAEf,OAAOe,EAAOnO,QAAQ,CACrB,IAAO,cAAgBmN,EACvB,SAAY,OACZ,OAAU,MACV,QAAW3J,EACX,UAAa2K,EAAO4E,mBACnB5G,EACH,EAUAgC,EAAOgG,aAAe,SAAShI,GAE9B,OAAOgC,EAAOnO,QAAQ,CACrB,IAAO,iBACP,SAAY,OACZ,OAAU,QACTmM,EACH,EASAgC,EAAOiG,YAAc,SAASjI,GAE7B,OAAOgC,EAAOnO,QAAQ,CACrB,IAAO,gBACP,SAAY,OACZ,OAAU,QACTmM,EACH,EAQAgC,EAAOkG,SAAW,SAAUC,GAG3B,IAEC9F,EASKD,EAAYgG,EAXdjL,EAAOgL,EAAMzB,KAChB2B,IAAoBF,EAAM9F,SAE1BF,EAAM0D,EAAM1I,EAAM,CACjB1J,KAAM0U,EAAM1U,KACZ6U,cAAeH,IAEhB7F,EAAON,EAAOM,KAEf,GAAG+F,EACE/F,IAG2B,iBAAnB6F,EAAM9F,UAChBD,EAAa+F,EAAM9F,SACnB+F,EAAc,CAAC,IAEfhG,EAAa+F,EAAM9F,SAASvI,GAC5BsO,EAAcD,EAAM9F,UAGR,4BAATlF,EACHmF,EAAKrE,OAAOmE,GACO,4BAATjF,EACVmF,EAAKgB,OAAOtB,EAAOgB,YAAYoF,IACZ,4BAATjL,IACVkF,EAAWC,EAAKC,IAAIH,KACNC,EAAS2B,UAAUoE,GAG7B/F,IAAUA,EAAWC,EAAKC,IAAIH,IAChCC,IACFF,EAAIE,SAAWA,EACfA,EAASc,QAAQhB,UAKnB,GAAa,0BAAThF,EAAkC,CACrC,IAAIoL,EAASvG,EAAOwG,OAAOC,gBAAgBN,EAAMI,QAC7CA,IACHpG,EAAIoG,OAASA,EACbA,EAAOpF,QAAQhB,GAEjB,KAAoB,2BAAThF,IACV6E,EAAOiE,UAAYkC,EAAM1U,KAAK+Q,OAIhCxC,EAAOmB,QAAQhB,EAEhB,EAIAzP,EAAOD,QAAUuP,gBCvjBjB,IAAIA,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAChB6T,EAAW,EAAQ,KAYnB+B,EAAS,SAASzE,GAErB0C,EAASxG,KAAKtN,KAAMoR,EACrB,EACAnR,EAAMsS,SAASsD,EAAQ/B,GAQvB+B,EAAOnR,UAAU+H,SAAW,WAC1B,OAAOzM,KAAK8V,MAAMrJ,UAAY,EAChC,EAOAoJ,EAAOnR,UAAUqR,UAAY,WAC5B,QAAS/V,KAAK8V,MAAMC,SACrB,EAOAF,EAAOnR,UAAUsR,aAAe,WAC9B,MAA0C,iBAA3BhW,KAAK8V,MAAME,aAA4B,IAAInL,KAAK7K,KAAK8V,MAAME,cAAgB,IAC5F,EAOAH,EAAOnR,UAAUuR,WAAa,WAC5B,MAAqC,iBAAtBjW,KAAK8V,MAAMI,SAAwBlW,KAAK8V,MAAMI,SAAW,CAC1E,EAOAL,EAAOnR,UAAUwR,QAAU,WACzB,OAAOlW,KAAKiW,aAAejW,KAAK8V,MAAMI,QAAU,IAClD,EAuBAL,EAAOhR,OAAS,SAASgP,EAAM1F,EAAEhB,GAEhC,OAAO2G,EAASjP,OAAOwI,OAAO4G,OAAO,CAACJ,QAAO1F,GAAGhB,GAAUpJ,MAAK,SAASsM,GAErE,OADFlB,EAAOmB,QAAQ,wBAAwB,CAACD,IAC/BA,CACV,GAED,EAEAlB,EAAO0G,OAASA,EAEhBhW,EAAOD,QAAUiW,iBC7FjB,IAAI1G,EAAS,EAAQ,KAGrBA,EAAOgH,QAAU,SAEjB,EAAQ,KACR,EAAQ,KACR,EAAQ,KACR,EAAQ,KACR,EAAQ,KACR,EAAQ,IACR,EAAQ,IACR,EAAQ,KACR,EAAQ,KAERtW,EAAOD,QAAUuP,iBCpBjB,IAAIlP,EAAQ,EAAQ,KAGpB,SAASmW,IACR,OAAO,CACR,CAEA,SAASC,IACR,OAAO,CACR,CAOA,IAAIrD,EAAQ,SAAUsD,EAAKC,GAG1B,KAAQvW,gBAAgBgT,GACvB,OAAO,IAAIA,EAAOsD,EAAKC,GAIxBvW,KAAK6T,KAAOyC,EAGPC,GACJtW,EAAM0E,OAAQ3E,KAAMuW,GAIrBvW,KAAKwW,UAAY3L,KAAKQ,KAEvB,EAEA2H,EAAMtO,UAAY,CACjB4J,YAAa0E,EACbyD,mBAAoBJ,EACpBK,qBAAsBL,EACtBM,8BAA+BN,EAE/BO,eAAgB,WACf5W,KAAKyW,mBAAqBL,CAC3B,EACAS,gBAAiB,WAChB7W,KAAK0W,qBAAuBN,CAC7B,EACAU,yBAA0B,WACzB9W,KAAK2W,8BAAgCP,EACrCpW,KAAK6W,iBACN,GAMDhX,EAAOD,QAAUoT,iBCxDjB,IAAIA,EAAQ,EAAQ,KAwEpBnT,EAAOD,QAtEP,SAAqB4N,GAEpB,IAAIuJ,EAAY,CAAC,EAEjBvJ,EAAI6B,GAAK,SAAS2H,EAAQC,GACzB,GAAqB,mBAAXA,EAAsB,CAC/BD,EAASA,EAAOlK,MAAM,KACtB,IAAI,IAAItD,EAAE,EAAGA,EAAEwN,EAAOpQ,OAAQ4C,IAAI,CACjC,IAAI8L,EAAQ0B,EAAOxN,GAChB8L,EAAM1O,SACJmQ,EAAUzB,KAAQyB,EAAUzB,GAAS,IACzCyB,EAAUzB,GAAO3O,KAAKsQ,GAExB,CACD,CACD,EAEAzJ,EAAI0J,IAAM,SAASF,EAAQC,GAC1BD,EAASA,EAAOlK,MAAM,KACtB,IAAI,IAAItD,EAAE,EAAGA,EAAEwN,EAAOpQ,OAAQ4C,IAAI,CACjC,IAAI8L,EAAQ0B,EAAOxN,GACnB,GAAG8L,EAAM1O,QAAUmQ,EAAUzB,GAC5B,GAAqB,mBAAX2B,EACT,IAAI,IAAIE,EAAE,EAAGA,EAAEJ,EAAUzB,GAAO1O,OAAQuQ,IACpCJ,EAAUzB,GAAO6B,KAAKF,IACxBF,EAAUzB,GAAOrF,OAAOkH,EAAG,GAC3BA,UAKFJ,EAAUzB,GAAS,EAGtB,CACD,EAEA9H,EAAI4J,IAAM,SAASJ,EAAQC,GACL,mBAAXA,GACTzJ,EAAI6B,GAAG2H,GAAQ,WACdxJ,EAAI0J,IAAIF,EAAOC,GACfA,EAAQxN,MAAMzJ,KAAKuJ,MAAM7E,UAAU2S,MAAM/J,KAAKjH,WAC/C,GAEF,EAEAmH,EAAI8C,QAAU,SAASgF,EAAOgC,GACT,iBAAVhC,IACTA,EAAQtC,EAAMsC,IAEf,IAAIzB,EAAOyB,EAAMzB,KAChB1M,EAAI4P,EAAUlD,IAAS,GAEpBkD,EAAU,OAAM5P,EAAIA,EAAE+F,OAAO6J,EAAU,OAE3C,IAAI,IAAIvN,EAAE,EAAGA,EAAErC,EAAEP,OAAQ4C,IAAI,CAC5B,IAAIF,EAAO,CAACgM,GAKZ,GAJG/L,MAAMQ,QAAQuN,KAChBhO,EAAOA,EAAK4D,OAAOoK,IACpBnQ,EAAEqC,GAAGC,MAAM+D,EAAIlE,GAEZgM,EAAMqB,iCAAmCrB,EAAMoB,uBACjD,KACF,CACA,OAAOpB,CACR,CAGD,iBCtEA,IAAInG,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAChB6T,EAAW,EAAQ,KAWnByD,EAAO,SAASnG,GAEnB0C,EAASxG,KAAKtN,KAAMoR,EACrB,EACAnR,EAAMsS,SAASgF,EAAMzD,GAOrByD,EAAK7S,UAAU8S,KAAO,WACrB,OAAOxX,KAAK8V,MAAM0B,IACnB,EAOAD,EAAK7S,UAAU+S,KAAO,WACrB,OAAOzX,KAAK8V,MAAM2B,IACnB,EAOAF,EAAK7S,UAAUgT,oBAAsB,WACpC,OAAO,IAAI7M,KAAK7K,KAAK8V,MAAM4B,oBAC5B,EAmBAH,EAAK7S,UAAUiT,cAAgB,SAASzW,GACvC,OAAOiO,EAAOkE,SAAS,SAASrT,KAAKiH,KAAK/F,EAC3C,EAsCAqW,EAAK7S,UAAU1B,KAAO,SAAS4U,EAAQzK,GACtC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACNuX,EAAKvU,KAAKyG,MAAM0F,EAAQ7F,EACnC,EAcAiO,EAAK7S,UAAU2F,MAAQ,SAASzJ,EAAMuM,GACrC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACNuX,EAAKlN,MAAMZ,MAAM0F,EAAQ7F,EACpC,EAuBAiO,EAAK1S,OAAS,SAASsJ,EAAEhB,GAET,iBAALgB,IACTA,EAAI,CACH,KAAQA,IAIT,IAAIiD,EAAO/D,OAAO4G,OAAO,CAACJ,KAAK,kBAAmB1F,GAE/C0J,EAAUzG,EAAKyG,QA+BnB,cA9BOzG,EAAKyG,QAEXC,EAAI,IAAItX,SAAQ,SAASC,EAASC,GAEjCoT,EAASjP,OAAOuM,GAAMrN,MAAK,SAASgU,GAE7B5I,EAAOmB,QAAQ,sBAAsB,CAACyH,IAEvCF,EACHN,EAAKlN,MAAM0N,EAAMF,GAAS9T,MAAK,SAASgU,GACvCtX,EAAQsX,EACT,IAAGC,OAAM,SAASjD,GACTrU,EAAOqU,EACX,IAELtU,EAAQsX,EAER,IAAGC,OAAM,SAASjD,GACdrU,EAAOqU,EACX,GACJ,IAEG5H,GACH2K,EAAE/T,MAAK,SAASgU,GACf5K,EAASG,KAAK6B,EAAQ4I,GAAM,EAC7B,IAAGC,OAAM,SAASjD,GACjB5H,EAASG,KAAK6B,EAAQ,KAAM4F,EAC7B,IAGM+C,CACR,EAKAP,EAAKvU,KAAO,SAAS+U,EAAMH,EAAQzK,GAElC,IAAI3I,EACJ,GAAGuT,aAAgBR,EAClB/S,EAAUuT,EACVA,EAAOA,EAAK9Q,UAER,IAAIhH,EAAMiV,KAAK6C,GACnB,KAAM,sDAQP,YALsB,IAAZ5K,GAA4C,mBAAVyK,IAC3CzK,EAAWyK,EACXA,GAAS,GAGHzI,EAAOnO,QAAQ,CACrB,IAAO,UAAY+W,EACnB,OAAU,MACV,SAAYH,EAA4B,iBAAXA,EAAsBA,EAAS,cAAiB,OAC7E,QAAWpT,GACV2I,EACH,EAKAoK,EAAKlN,MAAQ,SAAS8D,EAAEC,EAAEpI,GAEzB,IAAoBxB,EAAhByT,EAAU,KACd,GAAG9J,aAAaoJ,EACf/S,EAAU2J,EACV8J,EAAU9J,EAAElH,SAER,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,sDAFN8J,EAAU9J,CAIX,CAEA,IAAIhB,EAAWnH,EAEf,OAAOmJ,EAAOnO,QAAQ,CACrB,IAAO,UAAYiX,EACnB,SAAY,OACZ,OAAU,MACV,YAA4B,iBAAL7J,EAAiB,aAAe,2BACvD,KAAQA,EACR,QAAW5J,EACX,UAAa2K,EAAO4E,mBACnB5G,EACH,EAEAgC,EAAOoI,KAAOA,EAEd1X,EAAOD,QAAU2X,gBC3PjB,IAAIpI,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAChB6T,EAAW,EAAQ,KAWnBoE,EAAO,SAAS9G,GAEnB0C,EAASxG,KAAKtN,KAAMoR,EACrB,EACAnR,EAAMsS,SAAS2F,EAAMpE,GASrBoE,EAAKxT,UAAUyT,MAAQ,WACtB,OAAOnY,KAAK8V,MAAMqC,KACnB,EAOAD,EAAKxT,UAAU0T,YAAc,WAC5B,OAAOpY,KAAK8V,MAAMsC,WACnB,EASAF,EAAKxT,UAAU2T,OAAS,SAASlL,GAChC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACNkY,EAAKG,OAAO5O,MAAM0F,EAAQ7F,EACrC,EAoBA4O,EAAKrT,OAAS,SAASuM,EAAKjE,GAE3B,OAAO2G,EAASjP,OAAOwI,OAAO4G,OAAO,CAACJ,KAAK,kBAAmBzC,GAAOjE,GAAUpJ,MAAK,SAASsM,GAE1F,OADFlB,EAAOmB,QAAQ,sBAAsB,CAACD,IAC7BA,CACV,GAED,EAMA6H,EAAKG,OAAS,SAASlK,EAAEC,GAExB,IAAiB5J,EAAb8T,EAAO,KACX,GAAGnK,aAAa+J,EACf1T,EAAU2J,EACVmK,EAAOnK,EAAElH,SAEL,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,sDAFNmK,EAAOnK,CAIR,CAEA,IAAIhB,EAAWiB,EAEf,OAAOe,EAAOnO,QAAQ,CACrB,IAAO,UAAYsX,EAAO,UAC1B,OAAU,MACV,SAAY,OACZ,QAAW9T,GACV2I,EACH,EAGAgC,EAAO+I,KAAOA,EAEdrY,EAAOD,QAAUsY,iBC/GjB,IAAI/I,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAChBgT,EAAc,EAAQ,KAWtB0C,EAAS,SAASvE,GAErB6B,EAAYjT,MAEZA,KAAK8V,MAAQ,CAAC,EACd9V,KAAKmR,UAAUC,GAAM,EACtB,EAGAuE,EAAOjR,UAAUyM,UAAY,SAASC,EAAMV,GAE3C,IAAI6H,EAAc,IAEd7H,GAAaK,GAEhB1D,OAAOmL,KAAKpH,GAAMjO,SAAQ,SAASE,QACH,IAApBrD,KAAK8V,MAAMzS,IAA0BpD,EAAMwY,QAAQrH,EAAK/N,GAAKrD,KAAK8V,MAAMzS,KAClFkV,EAAY5R,KAAKtD,EAEnB,GAAErD,MAGH,IAAI+Q,EAAUwH,EAAY3R,OAAO,EAUjC,OARAyG,OAAO4G,OAAOjU,KAAK8V,MAAO1E,IAEtBV,GAAaK,IAEhB/Q,KAAKsQ,QAAQ,UAAW,CAACiI,IACzBpJ,EAAOmB,QAAQ,wBAAwB,CAACtQ,KAAMuY,KAGxCxH,CACR,EAOA4E,EAAOjR,UAAU4F,KAAO,WACvB,OAAOtK,KAAK8V,MAAMxL,IACnB,EAOAqL,EAAOjR,UAAUmP,KAAO,WACvB,OAAO7T,KAAK8V,MAAMjC,IACnB,EASA8B,EAAOjR,UAAUgU,KAAO,SAASpO,EAAMqO,GACtC,YAAkB,IAARrO,EACFtK,KAAK8V,YAEkB,IAAd6C,IAA2BA,EAAa,MACjD3Y,KAAK8V,MAAMpI,eAAepD,GAAQtK,KAAK8V,MAAMxL,GAAQqO,EAE9D,EAYAhD,EAAOjR,UAAUkU,QAAU,WAC1B,IAAItP,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2V,EAAOiD,QAAQnP,MAAM0F,EAAQ7F,EACxC,EASAqM,EAAOjR,UAAUmU,WAAa,SAASC,EAAalY,GACnD,IAAIc,EAAM,WAAW1B,KAAKiH,KAAK,SAAS6R,EAMxC,OAJG7Y,EAAMiT,cAActS,IAAsC,IAA7ByM,OAAOmL,KAAK5X,GAAMgG,SACjDlF,GAAO,IAAMzB,EAAMgV,MAAMrU,IAGnBuO,EAAOkE,SAAS3R,GAAI,EAC5B,EASAiU,EAAOjR,UAAU0N,IAAM,SAAS2G,EAAY5L,GAC3C,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2V,EAAOvD,IAAI3I,MAAM0F,EAAQ7F,EACpC,EAGAqM,EAAOpE,KAAO,SAASpE,GACtB,OAAOgC,EAAOnO,QAAQ,CACrB,IAAO,WACP,OAAU,MACV,SAAY,OACZ,UAAa2U,EAAOC,iBACnBzI,EAEH,EAKAwI,EAAOvD,IAAM,SAASjE,EAAEC,EAAEpI,GACzB,IAAIxB,EAEJ,IAAIvE,EAAMiT,cAAc9E,KAAOA,EAC9B,KAAM,6CAIP,GAAGD,aAAawH,EACfnR,EAAU2J,EACVA,EAAIA,EAAE7D,YAEF,GAAe,iBAAL6D,EACd,KAAM,6DAA6DA,EAIpE,IAAIhB,EAAWnH,EAEf,OAAOmJ,EAAOnO,QAAQ,CACrB,IAAO,YAAcmN,EACrB,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQC,EACR,QAAW5J,EACX,QAAW,CACV,yBAA0B,SAE3B,UAAamR,EAAOC,iBACnBzI,EACH,EAOAwI,EAAOiD,QAAU,SAASlD,EAAQoD,EAAalY,EAAMgX,EAAQzK,GAE5D,IAAI3I,EAEJ,GAAGkR,aAAkBC,EACpBnR,EAAUkR,EACVA,EAASA,EAAOpL,YAEZ,GAAoB,iBAAVoL,EAGd,KAAM,8DAoBP,OAhBuB,GAApBrP,UAAUO,OAEQ,mBAAVgR,IACTzK,EAAWyK,EACXA,OAAS3U,GAGmB,GAApBoD,UAAUO,QAED,mBAARhG,IACTuM,EAAWvM,EACXA,OAAOqC,GAKFkM,EAAOnO,QAAQ,CACrB,IAAO,YAAc0U,EAAS,SAAWoD,EACzC,OAAU,OACV,YAAe,kCACf,KAAQ,MAAOlY,EAAqCqI,KAAKC,UAAUtI,QAAQqC,EAC3E,SAAY2U,EAA4B,iBAAXA,EAAsBA,EAAS,cAAiB,OAC7E,QAAWpT,GACV2I,EAEH,EAEAwI,EAAOqD,QAAU,CAAC,EAElBrD,EAAOC,gBAAkB,SAAUhV,GAClC,GAAkB,iBAARA,GAA6B,OAATA,EAAc,CAE3C,IAAImJ,EAAUR,MAAMQ,QAAQnJ,GACxBmJ,IAASnJ,EAAO,CAACA,IAGrBA,EAAOA,EAAKsP,KAAI,SAAS+I,GAExB,IAAIC,EAAaD,EAAS3O,KACtBoL,EAASC,EAAOqD,QAAQE,GAU5B,OARIxD,EAEHA,EAAOvE,UAAU8H,IAEjBvD,EAAS,IAAIC,EAAOsD,GACpBtD,EAAOqD,QAAQE,GAAcxD,GAGvBA,CACR,IAEI3L,IAASnJ,EAAOA,EAAKgG,OAAShG,EAAK,GAAK,KAC7C,CAEA,OAAOA,CACR,EAGAuO,EAAOwG,OAASA,EAEhB9V,EAAOD,QAAU+V,iBC/PjB,IAAI1V,EAAQ,EAAQ,KAChBgT,EAAc,EAAQ,KACtB9D,EAAS,EAAQ,KAUjB2E,EAAW,SAAU1C,GAExB6B,EAAYjT,MAEZA,KAAK8V,MAAQ,CAAC,EACd9V,KAAKmR,UAAUC,GAAM,EACtB,EAGA0C,EAASpP,UAAUyM,UAAY,SAASC,EAAMV,GAE7C,IAAIK,EAAU/Q,KAAK8V,MAAMqD,cAAgB/H,EAAK+H,cAAgBnZ,KAAK8V,MAAMqD,eAAiB/H,EAAK+H,aAC3FZ,EAAc,GAmBlB,OAjBI7H,GAAaK,GAEhB1D,OAAOmL,KAAKpH,GAAMjO,SAAQ,SAASE,QACH,IAApBrD,KAAK8V,MAAMzS,IAA0BpD,EAAMwY,QAAQrH,EAAK/N,GAAKrD,KAAK8V,MAAMzS,KAClFkV,EAAY5R,KAAKtD,EAEnB,GAAErD,MAGHqN,OAAO4G,OAAOjU,KAAK8V,MAAO1E,IAEtBV,GAAaK,IAEhB/Q,KAAKsQ,QAAQ,UAAW,CAACiI,IACzBpJ,EAAOmB,QAAQ,0BAA0B,CAACtQ,KAAMuY,KAG1CxH,CACR,EAQA+C,EAASpP,UAAU0M,KAAO,WACzB,OAAOpR,KAAK8V,KACb,EAQAhC,EAASpP,UAAU0U,SAAW,SAASvF,GACtC,OAA6C,IAAtC7T,KAAK8V,MAAMtC,QAAQtR,QAAQ2R,EACnC,EAUAC,EAASpP,UAAU4F,KAAO,WACzB,OAAOtK,KAAK8V,MAAMxL,IACnB,EAMAwJ,EAASpP,UAAU2U,QAAU,WAC5B,OAAOlK,EAAO2E,SAASuF,QAAQrZ,KAAK8V,MAAMxL,KAC3C,EAMAwJ,EAASpP,UAAU4U,SAAW,WAC7B,OAAOnK,EAAO2E,SAASwF,SAAStZ,KAAK8V,MAAMxL,KAC5C,EAMAwJ,EAASpP,UAAU6U,UAAY,WAC9B,OAAOpK,EAAO2E,SAASyF,UAAUvZ,KAAK8V,MAAMxL,KAC7C,EAMAwJ,EAASpP,UAAUuC,GAAK,WACvB,OAAOjH,KAAK8V,MAAM7O,EACnB,EAMA6M,EAASpP,UAAU8U,UAAY,WAC9B,OAAOxZ,KAAK8V,MAAM0D,SACnB,EAWA1F,EAASpP,UAAUmP,KAAO,WACzB,OAAO7T,KAAK8V,MAAMjC,IACnB,EAOAC,EAASpP,UAAU+U,MAAQ,WAC1B,OAAOzZ,KAAK8V,MAAMtC,QAAQ6D,OAC3B,EAWAvD,EAASpP,UAAUgV,SAAW,WAE7B,OADAC,EAAI3Z,KAAKyZ,QACFE,EAAEA,EAAE/S,OAAS,EACrB,EAOAkN,EAASpP,UAAUkV,YAAc,WAChC,OAAO,IAAI/O,KAAK7K,KAAK8V,MAAM8D,YAC5B,EACA9F,EAASpP,UAAUmV,MAAQ,WAC1B,OAAO7Z,KAAK4Z,aACb,EAOA9F,EAASpP,UAAUyU,aAAe,WACjC,OAAO,IAAItO,KAAK7K,KAAK8V,MAAMqD,aAC5B,EACArF,EAASpP,UAAUoV,MAAQ,WAC1B,OAAO9Z,KAAKmZ,cACb,EAOArF,EAASpP,UAAUqV,OAAS,WAC3B,OAAO/Z,KAAK8V,MAAMiE,SAAU,CAC7B,EASAjG,EAASpP,UAAU9D,KAAO,SAAS0J,EAAM0P,GACxC,YAAkB,IAAR1P,EACFtK,KAAK8V,MAAMlV,KAEXZ,KAAK8V,MAAMlV,KAAK8M,eAAepD,GAAQtK,KAAK8V,MAAMlV,KAAK0J,GAAQ0P,CAExE,EAQAlG,EAASpP,UAAUgU,KAAO,SAASpO,EAAMqO,GACxC,YAAkB,IAARrO,EACFtK,KAAK8V,YAEkB,IAAd6C,IAA2BA,EAAa,MACjD3Y,KAAK8V,MAAMpI,eAAepD,GAAQtK,KAAK8V,MAAMxL,GAAQqO,EAE9D,EAQA7E,EAASpP,UAAUuV,QAAU,SAAS3P,GACrC,OAAOtK,KAAK8V,MAAMpI,eAAepD,EAClC,EAOAwJ,EAASpP,UAAUwV,YAAc,WAChC,OAAOla,KAAK8V,MAAMoE,aAAe,EAClC,EAcApG,EAASpP,UAAU0G,OAAS,SAAS+B,GACjC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEzB,OADAiD,EAAK9C,QAAQxG,MACN8T,EAAS1I,OAAO3B,MAAM0F,EAAQ7F,EACzC,EAEAwK,EAASpP,UAAU+L,OAAS,SAAStD,GACjC,OAAOgC,EAAOO,IAAI1P,KAAMmN,EAC5B,EAeA2G,EAASpP,UAAU0N,IAAM,SAAS2G,EAAY5L,GAC7C,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN8T,EAAS1B,IAAI3I,MAAM0F,EAAQ7F,EACtC,EAmBAwK,EAASpP,UAAUyV,QAAU,SAASvZ,EAAMuM,GAE3C,GAAmB,iBAATvM,GAAwC,mBAAZuM,EAAuB,CAC5D,IAAI9J,EAAMzC,EAAMqF,EAAQkH,EAAUA,EAAW9G,UAAU,IACvDzF,EAAO,CAAC,GACHyC,GAAO4C,CACb,CAEA,OAAOjG,KAAKoS,IAAI,CAAC,KAAOxR,GAAMuM,EAC/B,EAwBA2G,EAASpP,UAAUkU,QAAU,WAC5B,IAAItP,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN8T,EAAS8E,QAAQnP,MAAM0F,EAAQ7F,EAC1C,EAeAwK,EAASpP,UAAUmU,WAAa,SAASC,EAAalY,GACrD,IAAIc,EAAM,aAAa1B,KAAKiH,KAAK,SAAS6R,EAM1C,OAJG7Y,EAAMiT,cAActS,IAAsC,IAA7ByM,OAAOmL,KAAK5X,GAAMgG,SACjDlF,GAAO,IAAMzB,EAAMgV,MAAMrU,IAGnBuO,EAAOkE,SAAS3R,GAAI,EAC5B,EAmBAoS,EAASjP,OAAS,SAASsJ,EAAEhB,GAC5B,QAAoB,IAAVgB,EAAE0F,KACX,KAAM,gCAGP,OAAO1E,EAAOnO,QAAQ,CACrB,IAAO,aACP,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQmN,EACR,UAAagB,EAAO4E,mBACnB5G,GAAUpJ,MAAK,SAASsM,GAEvB,OADFlB,EAAOmB,QAAQ,0BAA0B,CAACD,IACjCA,CACV,GAED,EAOAyD,EAAS1I,OAAS,SAAS+C,EAAEhB,GAE5B,IAAI3I,EACJ,GAAG2J,aAAa2F,EACftP,EAAU2J,EACVA,EAAIA,EAAElH,UAEF,IAAIhH,EAAMiV,KAAK/G,GACnB,KAAM,+DAA+DA,EAGtE,OAAOgB,EAAOnO,QAAQ,CACrB,IAAO,cAAgBmN,EACvB,OAAU,SACV,QAAW3J,GACV2I,GAAUpJ,MAAK,WAChBoL,EAAOmB,QAAQ,0BAA0B,CAACnC,GAC3C,GACD,EAMA2F,EAAS1B,IAAM,SAASjE,EAAEC,EAAEpI,GAC3B,IAAIxB,EAEJ,IAAIvE,EAAMiT,cAAc9E,KAAOA,EAC9B,KAAM,6CAIP,GAAGD,aAAa2F,EACftP,EAAU2J,EACVA,EAAIA,EAAElH,UAEF,IAAIhH,EAAMiV,KAAK/G,GACnB,KAAM,+DAA+DA,EAItE,IAAIhB,EAAWnH,EAEf,OAAOmJ,EAAOnO,QAAQ,CACrB,IAAO,cAAgBmN,EACvB,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQC,EACR,QAAW5J,EACX,QAAW,CACV,yBAA0B,SAE3B,UAAa2K,EAAO4E,mBACnB5G,EACH,EAOA2G,EAAS8E,QAAU,SAASpJ,EAAUsJ,EAAalY,EAAMgX,EAAQzK,GAEhE,IAAI3I,EAEJ,GAAGgL,aAAoBsE,EACtBtP,EAAUgL,EACVA,EAAWA,EAASvI,UAEhB,IAAGhH,EAAMiV,KAAK1F,GAGlB,KAAM,8DAoBP,OAhBuB,GAApBnJ,UAAUO,OAEQ,mBAAVgR,IACTzK,EAAWyK,EACXA,OAAS3U,GAGmB,GAApBoD,UAAUO,QAED,mBAARhG,IACTuM,EAAWvM,EACXA,OAAOqC,GAKFkM,EAAOnO,QAAQ,CACrB,IAAO,cAAgBwO,EAAW,SAAWsJ,EAC7C,OAAU,OACV,YAAe,kCACf,KAAQ,MAAOlY,EAAqCqI,KAAKC,UAAUtI,QAAQqC,EAC3E,SAAY2U,EAA4B,iBAAXA,EAAsBA,EAAS,cAAiB,OAC7E,QAAWpT,GACV2I,EAEH,EASA2G,EAASuF,QAAU,SAAS5H,GAC3B,IAAI2I,EAAI3I,EAAE7H,QAAQ,eAAgB,IAClC,OAASwQ,IAAM3I,EAAM,GAAK2I,CAC3B,EACAtG,EAASwF,SAAW,SAAS7H,GAC5B,OAAOA,EAAE7H,QAAS,OAAQ,GAC3B,EACAkK,EAASyF,UAAY,SAAS9H,GAC7B,OAAOA,EAAEvP,QAAQ,MAAM,EAAIuP,EAAE3E,MAAM,KAAK4G,MAAQ,EACjD,EACAI,EAASuG,QAAU,SAAiBC,EAAS9P,GAK5C,IAHA,IACI+P,EAAeC,EADfC,EAAaH,EAAQxN,MAAM,KAGvBtD,EAAE,EAAGA,EAAEiR,EAAW7T,OAAQ4C,IACjC,GAAoB,IAAjBiR,EAAWjR,KAOd+Q,EAAgB,KALhBA,EAAgB,IAAME,EAAWjR,GAAGI,QAAQ,MAAO,OACnDA,QAAQ,QAAS,iBACjBA,QAAQ,MAAO,WACfA,QAAQ,cAAe,OAAS,KAEM,IAEtC4Q,EAAS,IAAItP,OAAOqP,GACM,MAAtB/P,EAAKS,MAAMuP,IAAkB,OAAO,EAEzC,OAAO,CACR,EAGArL,EAAO2E,SAAWA,EAElBjU,EAAOD,QAAUkU,iBC9hBjB,IAAI3E,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAQhBya,EAAW,CAUfA,IAAe,SAASvN,GACvB,OAAOgC,EAAOnO,QAAQ,CACrB,IAAO,YACP,SAAY,OACZ,OAAU,OACTmM,EACH,EAUAuN,IAAe,SAAS9Z,EAAMuM,GAE7B,IAAIlN,EAAMiT,cAActS,GACvB,KAAM,qCAGP,OAAOuO,EAAOnO,QAAQ,CACrB,IAAO,YACP,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQJ,EACR,QAAW,CACV,yBAA0B,UAE1BuM,EACH,GAEAgC,EAAOuL,SAAWA,EAElB7a,EAAOD,QAAU8a,iBCxDjB,IAAIvL,EAAS,EAAQ,KACjBlP,EAAQ,EAAQ,KAChB6T,EAAW,EAAQ,KAYnB6G,EAAQ,SAASvJ,GAEpB0C,EAASxG,KAAKtN,KAAMoR,EACrB,EACAnR,EAAMsS,SAASoI,EAAO7G,GAStB6G,EAAMjW,UAAUkC,OAAS,WACxB,OAAO5G,KAAK8V,MAAc,MAC3B,EAMA6E,EAAMjW,UAAUkW,UAAY,WAC3B,OAAO5a,KAAK8V,MAAM8E,SACnB,EAOAD,EAAMjW,UAAU8T,KAAO,WACtB,IAAIA,EAAO,GACX,IAAI,IAAIqC,KAAK7a,KAAK8V,MAAM0C,KACpBxY,KAAK8V,MAAM0C,KAAK9K,eAAemN,IACjCrC,EAAK7R,KAAKkU,GACZ,OAAOrC,CACR,EAMAmC,EAAMjW,UAAUgT,oBAAsB,WACrC,OAAO,IAAI7M,KAAK7K,KAAK8V,MAAM4B,oBAC5B,EAyBAiD,EAAMjW,UAAUoW,OAAS,SAASzI,EAAQlF,GACzC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMG,OAAOrR,MAAM0F,EAAQ7F,EACtC,EAUAqR,EAAMjW,UAAUqW,kBAAoB,SAAS1X,EAAI2R,EAAM7H,GACtD,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMI,kBAAkBtR,MAAM0F,EAAQ7F,EACjD,EAgBAqR,EAAMjW,UAAUsW,UAAY,SAAS/T,EAAGkG,GACvC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMK,UAAUvR,MAAM0F,EAAQ7F,EACzC,EAgBAqR,EAAMjW,UAAUuW,WAAa,SAASra,EAAKuM,GAC1C,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMM,WAAWxR,MAAM0F,EAAQ7F,EAC1C,EAmBAqR,EAAMjW,UAAUwW,kBAAoB,SAASlG,EAAMpU,EAAKua,EAAOhO,GAC9D,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMO,kBAAkBzR,MAAM0F,EAAQ7F,EACjD,EAmBAqR,EAAMjW,UAAU0W,OAAS,SAASxa,EAAMuM,GACvC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMS,OAAO3R,MAAMzJ,KAAKsJ,EACnC,EAiBAqR,EAAMjW,UAAU2W,OAAS,SAASza,EAAMuM,GACvC,IAAI7D,EAAO,GAAG+N,MAAM/J,KAAKjH,WAEtB,OADAiD,EAAK9C,QAAQxG,MACN2a,EAAMU,OAAO5R,MAAMzJ,KAAKsJ,EACnC,EAmBAqR,EAAMjW,UAAUiT,cAAgB,SAASzW,GACxC,OAAOiO,EAAOkE,SAAS,UAAUrT,KAAKiH,KAAK/F,EAC5C,EAwBAyZ,EAAM9V,OAAS,SAASsJ,EAAEhB,GAOzB,MALe,iBAALgB,IACTA,EAAI,CACH,KAAQA,IAGH2F,EAASjP,OAAOwI,OAAO4G,OAAO,CAACJ,KAAK,mBAAoB1F,GAAIhB,GAAUpJ,MAAK,SAASsM,GAExF,OADFlB,EAAOmB,QAAQ,uBAAuB,CAACD,IAC9BA,CACV,GAED,EAGAsK,EAAMG,OAAS,SAAS3M,EAAEkE,EAAQlF,GAEjC,IAAqB3I,EAAjB8W,EAAW,KACf,GAAGnN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAcA,YAZuB,IAAZhB,GAA+C,mBAAXkF,IAC9ClF,EAAWkF,EACXA,EAAU,MAGXA,EAAUA,GAAW,CAAC,EAEnB9I,MAAMQ,QAAQsI,EAAQkJ,UACxBlJ,EAAQkJ,OAASlJ,EAAQkJ,OAAOpR,KAAK,MAI/BgF,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,IAAMrb,EAAMgV,MAAM,CAAC,MAAQ5C,EAAQmJ,MAAM,OAASnJ,EAAQzL,OAAO,KAAOyL,EAAQoJ,KAAK,EAAIpJ,EAAQ2C,MAAM,OAAS3C,EAAQkJ,OAAO,QAAUlJ,EAAQqJ,UAChL,OAAU,MACV,SAAY,OACZ,QAAWlX,GACV2I,EAEH,EAEAwN,EAAMI,kBAAoB,SAAS5M,EAAE9K,EAAI2R,EAAM7H,GAE9C,IAAqB3I,EAAjB8W,EAAW,KACf,GAAGnN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAQA,YANuB,IAAZhB,GAA6C,mBAAT6H,IAC9C7H,EAAW6H,EACXA,EAAQ,MAIF7F,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,eAAiBrb,EAAMgV,MAAM,CAAC,IAAM5R,EAAI,EAAI2R,IAC3E,OAAU,MACV,SAAY,OACZ,QAAWxQ,GACV2I,EAEH,EAMAwN,EAAMK,UAAY,SAAS7M,EAAEC,EAAEpI,GAE9B,IAAqBxB,EAAjB8W,EAAW,KACf,GAAGnN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAEA,IAAIlH,EAAKsC,MAAMQ,QAAQqE,GAAKA,EAAI,CAACA,GAC7BjB,EAAWnH,EAEf,OAAOmJ,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,UAC/B,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQrU,EACR,QAAWzC,EACX,UAAa2K,EAAO4E,mBACnB5G,EAEH,EAKAwN,EAAMM,WAAa,SAAS9M,EAAEC,EAAEpI,GAE/B,IAAqBxB,EAAjB8W,EAAW,KACf,GAAGnN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAEA,GAAgB,iBAANC,IAAmBnO,EAAMiV,KAAK9G,EAAEnH,IACzC,KAAM,sEAEP,IAAI0U,EAAQvN,EAAEnH,GACVkG,EAAWnH,EAEf,OAAOmJ,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,OAAOK,EACtC,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQvN,EACR,QAAW5J,EACX,QAAW,CACV,yBAA0B,UAE1B2I,EAEH,EAKAwN,EAAMO,kBAAoB,SAAS/M,EAAEC,EAAEpI,EAAE4V,EAAEpY,GAE1C,IAAqBgB,EAAjB8W,EAAW,KAAenO,EAAW3J,EAAG2X,GAAS,EACrD,GAAGhN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAEA,GAAgB,iBAANC,EACT,KAAM,yCAEP,GAAgB,iBAANpI,EACT,KAAM,mCAUP,YARgB,IAANxC,GAAkC,mBAANoY,IACrCzO,EAAWyO,EACXT,GAAS,GAEM,kBAANS,IACTT,EAASS,GAGHzM,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,YAAcrb,EAAMgV,MAAM,CAAC,EAAI7G,EAAG,OAAS+M,IAC1E,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQnV,EACR,QAAWxB,EACX,UAAa2K,EAAO4E,mBACnB5G,EAEH,EAeAwN,EAAMS,OAAS,SAASjN,EAAE0N,EAAS7V,EAAE4V,GAEpC,IAAIzO,EAA2B3I,EAASsX,EAA1BR,EAAW,KAEzB,GAAGnN,aAAawM,EACfnW,EAAU2J,EACVmN,EAAWnN,EAAElH,SAET,KAAGhH,EAAMiV,KAAK/G,GAGlB,KAAM,wDAFNmN,EAAWnN,CAIZ,CAWA,MATgB,iBAALnI,GACV8V,EAAgB9V,EAChBmH,EAAWyO,GAGXzO,EAAWnH,EAILmJ,EAAOnO,QAAQ,CACrB,IAAO,WAAasa,EAAW,IAAMrb,EAAMgV,MAAM,CAAC,cAAgB6G,IAClE,SAAY,OACZ,OAAU,OACV,YAAe,kCACf,KAAQD,EACR,QAAWrX,EACX,UAAa2K,EAAO4E,mBACnB5G,EAEH,EAGAwN,EAAMU,OAAS,SAASU,EAAMnb,GAC7B,IAAI4D,EAAQsX,EAAcE,EAAW7O,EAErC,GAAG4O,aAAiBpB,EACnBnW,EAAUuX,EACVA,EAAQA,EAAM9U,UAEV,IAAIhH,EAAMiV,KAAK6G,GACnB,KAAM,wDAIP,IAAIxS,MAAMQ,QAAQnJ,GACjB,KAAM,uCAEP,IAAI,IAAI4I,EAAE,EAAGA,EAAEnD,UAAUO,OAAQ4C,IAChC,cAAcnD,UAAUmD,IACvB,IAAK,WACJ2D,EAAW9G,UAAUmD,GACrB,MACD,IAAK,UACJwS,EAAa3V,UAAUmD,GACvB,MACD,IAAK,SACJsS,EAAgBzV,UAAUmD,GAK7B,OAAO2F,EAAOnO,QAAQ,CACrB,IAAO,WAAa+a,EAAQ,IAAM9b,EAAMgV,MAAM,CAAC,WAAa+G,EAAW,cAAgBF,IACvF,SAAY,OACZ,OAAU,MACV,YAAe,kCACf,KAAQlb,EACR,QAAW4D,EACX,UAAa2K,EAAO4E,mBACnB5G,EAEH,EAEAgC,EAAOwL,MAAQA,EAEf9a,EAAOD,QAAU+a,WCxhBjB,IAAIsB,EAAQ,CAAC,EA2Fb,SAASC,EAAaC,EAAQ3O,EAAK4O,GAClC,IAAI9R,EAEJ,GAAKf,MAAMQ,QAASyD,GAEnB,IAAI,IAAIhE,KAAKgE,EAAI,CAChB,IAAIxD,EAAIwD,EAAIhE,GACP,QAAQ8B,KAAM6Q,GAElBC,EAAKD,EAAQnS,GAIbkS,EAAaC,EAAS,KAAqB,iBAANnS,EAAiBR,EAAI,IAAO,IAAKQ,EAAGoS,EAE3E,MAEM,GAAoB,iBAAR5O,EAElB,IAAMlD,KAAQkD,EACb0O,EAAaC,EAAS,IAAM7R,EAAO,IAAKkD,EAAKlD,GAAQ8R,QAKtDA,EAAKD,EAAQ3O,EAEf,CAnHAyO,EAAM/G,KAAO,SAASkF,GACrB,MAAoB,iBAALA,GAA8B,IAAbA,EAAExT,QAAgB,oBAAoB0E,KAAK8O,EAC5E,EAGA6B,EAAMI,SAAW,SAAS3a,GACzB,IAAI2O,EAAI,gGAAgGiM,KAAK5a,GAC7G,QAAO2O,GAAI,CACVkM,OAASlM,EAAE,GACXmM,KAAOnM,EAAE,GACTjP,SAAWiP,EAAE,GACbjE,SAAWiE,EAAE,GACbhE,KAAOgE,EAAE,IACT7F,KAAO6F,EAAE,IACTnE,OAASmE,EAAE,IACXlE,KAAMkE,EAAE,IAEV,EAEA4L,EAAMQ,SAAW,SAAS/a,EAAK2B,GAC9B,IAAIqZ,EAAahb,EAAIQ,QAAQ,KACzBya,EAAQ,IAAIzR,OAAO,SAAWvB,mBAAmBtG,GAAO,aAC3DuZ,GAAwB,IAAdF,EAAkBC,EAAML,KAAK5a,EAAIuL,OAAOyP,IAAe,KAClE,OAAmB,OAAZE,EAAmB,GAAKzR,mBAAmByR,EAAQ,GAC3D,EAEAX,EAAMY,eAAiB,SAASnb,EAAK2B,GACpC,IAAIqZ,EAAahb,EAAIQ,QAAQ,KACzBya,EAAQ,IAAIzR,OAAO,SAAWvB,mBAAmBtG,GAAO,aAC3DuZ,GAAwB,IAAdF,EAAkBC,EAAML,KAAK5a,EAAIuL,OAAOyP,IAAe,KAClE,OAAmB,OAAZE,EAAmB,GAAKzR,mBAAmByR,EAAQ,GAC3D,EAEAX,EAAMa,YAAc,SAASpb,EAAI2B,GAEhC,IAAI0Z,EAAUrb,EAAIoL,MAAM,KACxB,GAAIiQ,EAASnW,QAAQ,EAAG,CAEvB,IAAIoW,EAAYD,EAAS,GAAG7a,QAAQ,KACnCiK,EAAO,IACU,IAAf6Q,IACF7Q,EAAO4Q,EAAS,GAAG9P,OAAO+P,GAC1BD,EAAS,GAAKA,EAAS,GAAG9P,OAAO,EAAE+P,IAOpC,IAJA,IAAIb,EAAQxS,mBAAmBtG,GAAK,IAChC4Z,EAAMF,EAAS,GAAGjQ,MAAM,SAGnBtD,EAAGyT,EAAKrW,OAAQ4C,KAAM,IAEU,IAApCyT,EAAKzT,GAAG0T,YAAYf,EAAQ,IAC/Bc,EAAKhN,OAAOzG,EAAG,GAKjB,OADKuT,EAAS,IAAME,EAAKrW,OAAS,EAAI,IAAMqW,EAAK9S,KAAK,KAAO,IAAMgC,CAEpE,CACC,OAAOzK,CAET,EAEAua,EAAMzJ,YAAc,SAAS9Q,EAAI2B,EAAI4C,GAIpC,IAAI+W,GAFJtb,EAAMua,EAAMa,YAAYpb,EAAI2B,IAERnB,QAAQ,KAC3BiK,EAAO,IACU,IAAf6Q,IACF7Q,EAAOzK,EAAIuL,OAAO+P,GAClBtb,EAAMA,EAAIuL,OAAO,EAAE+P,IAGpB,IAAIN,EAAahb,EAAIQ,QAAQ,KAC5B8S,EAAQ,GAST,OARmB,IAAhB0H,IACF1H,EAAQtT,EAAIuL,OAAOyP,GACnBhb,EAAMA,EAAIuL,OAAO,EAAEyP,IAGpB1H,GAASA,EAAMpO,OAAS,IAAM,IAGvBlF,GAFPsT,GAASrL,mBAAmBtG,GAAK,IAAIsG,mBAAmB1D,IAEvCkG,CAClB,EA+BA8P,EAAMhH,MAAQ,SAASrU,GAEtB,IAAIub,EACH/B,EAAI,GACJgC,EAAM,SAAU/Y,EAAK4C,GAEpBA,EAAyB,mBAATA,EAAuBA,IAAqB,MAATA,EAAgB,GAAKA,EACxEmU,EAAGA,EAAExT,QAAW+C,mBAAoBtG,GAAQ,IAAMsG,mBAAoB1D,EACvE,EAID,IAAMkW,KAAUvb,EACO,OAAjBA,EAAKub,SAA2C,IAAhBvb,EAAKub,IACzCD,EAAaC,EAAQvb,EAAMub,GAAUC,GAIvC,OAAOhC,EAAEjQ,KAAM,KAAMP,QAAS,OAAQ,IAEvC,EAKA,IAAIuT,EAAMlB,EAAMkB,IAAM,SAASC,EAAGC,EAAOC,GAGxC,OAFAA,EAAIA,GAAK,KACTF,GAAQ,IACCxW,QAAUyW,EAAQD,EAAI,IAAI7T,MAAM8T,EAAQD,EAAExW,OAAS,GAC1DuD,KAAKmT,GAAKF,CACb,EAGAnB,EAAMsB,aAAe,SAASnD,GAE7B,OADAA,EAAIoD,SAASpD,GACVqD,MAAMrD,GAAW,KAEhBA,EAAI,IACPA,EAAKsD,KAAKC,MAAOvD,EAAI,IAAc,KAAQ,IAAO,MAC1CA,EAAI,IACZA,EAAKsD,KAAKC,MAAOvD,EAAI,IAAW,KAAO,IAAO,MACtCA,EAAI,IACZA,EAAKsD,KAAKC,MAAOvD,EAAI,IAAQ,KAAO,IAAO,MAE3CA,GAAQ,KACFA,EACR,EAEA6B,EAAM2B,aAAe,SAAShC,GAC7B,IAAIvQ,EAAM,IAAIR,KAMd,GAJe,iBAAL+Q,IACTA,EAAI,IAAI/Q,KAAO,IAAF+Q,IAGVA,EAEC,IAAGvQ,EAAIwS,UAAUjC,EAAEiC,UAAY,MAEnC,OAAOV,EAAIvB,EAAEkC,WAAW,GAAK,IAAMX,EAAIvB,EAAEmC,aAAa,GAGtD,IAAIC,EAAYpC,EAAEqC,cACdC,EAAYtC,EAAEuC,UACdC,EAAaxC,EAAEyC,WAEnB,OAAGL,GAAa3S,EAAI4S,cAKZC,EAAY,IAHL,IAAI3U,MAAM,MAAO,MAAO,MACrC,MAAO,MAAO,MAAO,MAAO,MAAO,MACnC,MAAO,MAAO,OACkB6U,GAAc,IAIxCJ,EAAY,IAAMb,EAAIiB,EAAW,EAAE,GAAK,IAAMjB,EAAIe,EAAU,EAErE,CArBC,MAAO,GAsBT,EAEAjC,EAAMqC,iBAAmB,SAASC,GAEjC,GADAA,EAAYf,SAASe,GAClBd,MAAMc,GAAY,MAAO,IAE5B,IAQCvU,EARGwU,EACC,OAKJC,EAAI,EACJrE,EAAI,GAoCL,OAlCApQ,EAAI0T,KAAKC,MAAMY,EAAYC,KAClB,GAAKC,EAAI,IACjBrE,GAAKsD,KAAKC,MAAM3T,GAAK,SAAWA,EAAI,EAAI,IAAM,IAC9CuU,GAAavU,EAAIwU,EACjBC,MAEDzU,EAAI0T,KAAKC,MAAMY,EAbV,SAcI,GAAKE,EAAI,IACbA,IAAGrE,GAAK,KACZA,GAAKsD,KAAKC,MAAM3T,GAAK,QAAUA,EAAI,EAAI,IAAM,IAC7CuU,GAjBI,MAiBSvU,EACbyU,MAEDzU,EAAI0T,KAAKC,MAAMY,EAnBV,QAoBI,GAAKE,EAAI,IACbA,IAAGrE,GAAK,KACZA,GAAKsD,KAAKC,MAAM3T,GAAK,SAAWA,EAAI,EAAI,IAAM,IAC9CuU,GAvBI,KAuBSvU,EACbyU,MAEDzU,EAAI0T,KAAKC,MAAMY,EAzBV,MA0BI,GAAKE,EAAI,IACbA,IAAGrE,GAAK,KACZA,GAAKsD,KAAKC,MAAM3T,GAAK,WAAaA,EAAI,EAAI,IAAM,IAChDuU,GA7BI,GA6BSvU,EACbyU,MAEDzU,EAAIuU,IACK,GAAKE,EAAI,IACbA,IAAGrE,GAAK,KACZA,GAAKsD,KAAKC,MAAM3T,GAAK,YAAcA,EAAI,EAAI,IAAM,IACjDyU,KAGMrE,CACR,EAOA,IAAIsE,EAAa,CAAC,EACjBnZ,EAAWmZ,EAAWnZ,SACtBoZ,EAASD,EAAWhR,eAGrB,uEAAuEZ,MAAM,KAAK3J,SAAQ,SAASmH,GAClGoU,EAAY,WAAapU,EAAO,KAAQA,EAAKhH,aAC9C,IAGA2Y,EAAMpI,KAAO,SAAUrG,GACtB,OAAY,MAAPA,EACGA,EAAM,GAIQ,iBAARA,GAAmC,mBAARA,EACxCkR,EAAYnZ,EAAS+H,KAAME,KAAW,gBAC/BA,CACT,EAEAyO,EAAM/I,cAAgB,SAAU1F,GAC/B,IAAInK,EAMJ,GAA2B,WAAtB4Y,EAAMpI,KAAMrG,IAAsBA,EAAIoR,UAAoB,MAAPpR,GAAeA,IAAQA,EAAIhB,OAClF,OAAO,EAGR,IAEC,GAAKgB,EAAIc,cACNqQ,EAAOrR,KAAME,EAAK,iBAClBmR,EAAOrR,KAAME,EAAIc,YAAY5J,WAAa,CAAC,EAAG,iBAChD,OAAO,CAKT,CAHE,MAAQlB,GAER,OAAO,CACT,CAIA,IAAMH,KAAOmK,GAEb,YAAevK,IAARI,GAAqBsb,EAAOrR,KAAME,EAAKnK,EAC/C,EAEA4Y,EAAMtX,OAAS,WACd,IAAI0N,EAAS/H,EAAMgM,EAAKuI,EAAMC,EAAaC,EACzCC,EAAS3Y,UAAU,IAAM,CAAC,EAC1BmD,EAAI,EACJ5C,EAASP,UAAUO,OACnBqY,GAAO,EAoBT,IAjBuB,kBAAXD,IACVC,EAAOD,EACPA,EAAS3Y,UAAU,IAAM,CAAC,EAE1BmD,EAAI,GAIiB,iBAAXwV,GAAyC,mBAAXA,IACxCA,EAAS,CAAC,GAGPpY,IAAW4C,IACdwV,EAAShf,OACPwJ,GAGIA,EAAI5C,EAAQ4C,IAElB,GAAmC,OAA7B6I,EAAUhM,UAAWmD,IAE5B,IAAMc,KAAQ+H,EACZiE,EAAM0I,EAAQ1U,GAIT0U,KAHLH,EAAOxM,EAAS/H,MAQX2U,GAAQJ,IAAU5C,EAAM/I,cAAc2L,KAAUC,EAAcvV,MAAMQ,QAAQ8U,MAC7EC,GACHA,GAAc,EACdC,EAAQzI,GAAO/M,MAAMQ,QAAQuM,GAAOA,EAAM,IAG1CyI,EAAQzI,GAAO2F,EAAM/I,cAAcoD,GAAOA,EAAM,CAAC,EAInD0I,EAAQ1U,GAAS2R,EAAMtX,OAAQsa,EAAMF,EAAOF,SAGtB5b,IAAT4b,IACbG,EAAQ1U,GAASuU,IAMnB,OAAOG,CACR,EAEA/C,EAAMxD,QAAU,SAASyG,EAAGC,GAC3B,aAEA,GAAID,eAAiCC,EAAiC,OAAOD,IAAMC,EAEnF,GAAID,EAAE5Q,cAAgB6Q,EAAE7Q,YAAe,OAAO,EAE9C,GAAI4Q,aAAaE,SAAY,OAAOF,IAAMC,EAE1C,GAAID,aAAahU,OAAU,OAAOgU,IAAMC,EACxC,GAAID,IAAMC,GAAKD,EAAEG,YAAcF,EAAEE,UAAa,OAAO,EACrD,GAAI9V,MAAMQ,QAAQmV,IAAMA,EAAEtY,SAAWuY,EAAEvY,OAAU,OAAO,EAGxD,GAAIsY,aAAarU,KAAQ,OAAO,EAGhC,KAAMqU,aAAa7R,QAAW,OAAO,EACrC,KAAM8R,aAAa9R,QAAW,OAAO,EAGrC,IAAIyK,EAAIzK,OAAOmL,KAAK0G,GACpB,OAAO7R,OAAOmL,KAAK2G,GAAGG,OAAM,SAAU9V,GAAK,OAAyB,IAAlBsO,EAAE5V,QAAQsH,EAAW,KACtEsO,EAAEwH,OAAM,SAAU9V,GAAK,OAAOyS,EAAMxD,QAAQyG,EAAE1V,GAAI2V,EAAE3V,GAAK,GAC3D,EAGAyS,EAAM1J,SAAW,SAAU5D,EAAU4Q,GACpC5Q,EAASjK,UAAY,IAAI6a,EACzB5Q,EAASjK,UAAU4J,YAAcK,CAClC,EAGAsN,EAAM3a,KAAO,SAAU+M,GACnB,MAAmB,oBAAT/M,KACCA,KAAK+M,IAGZA,aAAemR,OACNnR,EAEA,IAAImR,OAAOnR,EAAI9I,WAAY,WAE1BA,SAAS,SAC3B,EAGA0W,EAAMwD,KAAO,SAAUpR,GACnB,MAAmB,oBAAToR,KACCA,KAAKpR,GAET,IAAImR,OAAOnR,EAAK,UAAU9I,SAAS,SAC9C,EAGA0W,EAAMyD,SAAW,SAAS7H,EAAS1K,GAE/B,GAAmB,oBAATwS,MAAwB9H,aAAmB8H,KAAK,CAGtD,GAAyB,oBAAfrL,WACN,KAAM,+BAEV,IAAIsL,EAAS,IAAItL,WAOjB,OANAsL,EAAOC,UAAY,WACjBhI,EAAU+H,EAAO3R,OAAOhB,OAAO2S,EAAO3R,OAAO/L,QAAQ,YAAY,GACjEiL,EAAS0K,EACX,OACA+H,EAAOE,cAAcjI,EAGzB,CACK,GAAGA,aAAmBjK,YAAY,CAGnC,IAFA,IAAIgK,EAAS,GACTmI,EAAQ,IAAIrL,WAAWmD,GAClBrO,EAAI,EAAGA,EAAIuW,EAAMC,WAAYxW,IAClCoO,GAAUnJ,OAAOgG,aAAcsL,EAAOvW,IAE1CqO,EAAUoE,EAAM3a,KAAKsW,EACzB,MACK,GAAqB,oBAAX4H,QAA0B3H,aAAmB2H,OACxD3H,EAAUA,EAAQtS,SAAS,cAE1B,IAAsB,iBAAZsS,EAGX,KAAM,eAFNA,EAAUoE,EAAM3a,KAAKuW,EAGzB,CAEA1K,EAAS0K,EAGb,EAIAhY,EAAOD,QAAUqc,IChdbgE,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBld,IAAjBmd,EACH,OAAOA,EAAaxgB,QAGrB,IAAIC,EAASogB,EAAyBE,GAAY,CAGjDvgB,QAAS,CAAC,GAOX,OAHAygB,EAAoBF,GAAUtgB,EAAQA,EAAOD,QAASsgB,GAG/CrgB,EAAOD,OACf,CCnB0BsgB,CAAoB,WDF1CD","sources":["webpack://EThing/webpack/universalModuleDefinition","webpack://EThing/./node_modules/axios/index.js","webpack://EThing/./node_modules/axios/lib/adapters/xhr.js","webpack://EThing/./node_modules/axios/lib/axios.js","webpack://EThing/./node_modules/axios/lib/cancel/Cancel.js","webpack://EThing/./node_modules/axios/lib/cancel/CancelToken.js","webpack://EThing/./node_modules/axios/lib/cancel/isCancel.js","webpack://EThing/./node_modules/axios/lib/core/Axios.js","webpack://EThing/./node_modules/axios/lib/core/InterceptorManager.js","webpack://EThing/./node_modules/axios/lib/core/createError.js","webpack://EThing/./node_modules/axios/lib/core/dispatchRequest.js","webpack://EThing/./node_modules/axios/lib/core/enhanceError.js","webpack://EThing/./node_modules/axios/lib/core/settle.js","webpack://EThing/./node_modules/axios/lib/core/transformData.js","webpack://EThing/./node_modules/axios/lib/defaults.js","webpack://EThing/./node_modules/axios/lib/helpers/bind.js","webpack://EThing/./node_modules/axios/lib/helpers/buildURL.js","webpack://EThing/./node_modules/axios/lib/helpers/combineURLs.js","webpack://EThing/./node_modules/axios/lib/helpers/cookies.js","webpack://EThing/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://EThing/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://EThing/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://EThing/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://EThing/./node_modules/axios/lib/helpers/spread.js","webpack://EThing/./node_modules/axios/lib/utils.js","webpack://EThing/./node_modules/axios/node_modules/is-buffer/index.js","webpack://EThing/./node_modules/glob-to-regexp/index.js","webpack://EThing/./src/arbo.js","webpack://EThing/./src/auth.js","webpack://EThing/./src/core.js","webpack://EThing/./src/device.js","webpack://EThing/./src/ething.js","webpack://EThing/./src/event.js","webpack://EThing/./src/eventEngine.js","webpack://EThing/./src/file.js","webpack://EThing/./src/flow.js","webpack://EThing/./src/plugin.js","webpack://EThing/./src/resource.js","webpack://EThing/./src/settings.js","webpack://EThing/./src/table.js","webpack://EThing/./src/utils.js","webpack://EThing/webpack/bootstrap","webpack://EThing/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EThing\"] = factory();\n\telse\n\t\troot[\"EThing\"] = factory();\n})(this, () => {\nreturn ","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, {method: 'get'}, this.defaults, config);\n  config.method = config.method.toLowerCase();\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","module.exports = function (glob, opts) {\n  if (typeof glob !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  var str = String(glob);\n\n  // The regexp we are building, as a string.\n  var reStr = \"\";\n\n  // Whether we are matching so called \"extended\" globs (like bash) and should\n  // support single character matching, matching ranges of characters, group\n  // matching, etc.\n  var extended = opts ? !!opts.extended : false;\n\n  // When globstar is _false_ (default), '/foo/*' is translated a regexp like\n  // '^\\/foo\\/.*$' which will match any string beginning with '/foo/'\n  // When globstar is _true_, '/foo/*' is translated to regexp like\n  // '^\\/foo\\/[^/]*$' which will match any string beginning with '/foo/' BUT\n  // which does not have a '/' to the right of it.\n  // E.g. with '/foo/*' these will match: '/foo/bar', '/foo/bar.txt' but\n  // these will not '/foo/bar/baz', '/foo/bar/baz.txt'\n  // Lastely, when globstar is _true_, '/foo/**' is equivelant to '/foo/*' when\n  // globstar is _false_\n  var globstar = opts ? !!opts.globstar : false;\n\n  // If we are doing extended matching, this boolean is true when we are inside\n  // a group (eg {*.html,*.js}), and false otherwise.\n  var inGroup = false;\n\n  // RegExp flags (eg \"i\" ) to pass in to RegExp constructor.\n  var flags = opts && typeof( opts.flags ) === \"string\" ? opts.flags : \"\";\n\n  var c;\n  for (var i = 0, len = str.length; i < len; i++) {\n    c = str[i];\n\n    switch (c) {\n    case \"/\":\n    case \"$\":\n    case \"^\":\n    case \"+\":\n    case \".\":\n    case \"(\":\n    case \")\":\n    case \"=\":\n    case \"!\":\n    case \"|\":\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"?\":\n      if (extended) {\n        reStr += \".\";\n\t    break;\n      }\n\n    case \"[\":\n    case \"]\":\n      if (extended) {\n        reStr += c;\n\t    break;\n      }\n\n    case \"{\":\n      if (extended) {\n        inGroup = true;\n\t    reStr += \"(\";\n\t    break;\n      }\n\n    case \"}\":\n      if (extended) {\n        inGroup = false;\n\t    reStr += \")\";\n\t    break;\n      }\n\n    case \",\":\n      if (inGroup) {\n        reStr += \"|\";\n\t    break;\n      }\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"*\":\n      // Move over all consecutive \"*\"'s.\n      // Also store the previous and next characters\n      var prevChar = str[i - 1];\n      var starCount = 1;\n      while(str[i + 1] === \"*\") {\n        starCount++;\n        i++;\n      }\n      var nextChar = str[i + 1];\n\n      if (!globstar) {\n        // globstar is disabled, so treat any number of \"*\" as one\n        reStr += \".*\";\n      } else {\n        // globstar is enabled, so determine if this is a globstar segment\n        var isGlobstar = starCount > 1                      // multiple \"*\"'s\n          && (prevChar === \"/\" || prevChar === undefined)   // from the start of the segment\n          && (nextChar === \"/\" || nextChar === undefined)   // to the end of the segment\n\n        if (isGlobstar) {\n          // it's a globstar, so match zero or more path segments\n          reStr += \"((?:[^/]*(?:\\/|$))*)\";\n          i++; // move over the \"/\"\n        } else {\n          // it's not a globstar, so only match one path segment\n          reStr += \"([^/]*)\";\n        }\n      }\n      break;\n\n    default:\n      reStr += c;\n    }\n  }\n\n  // When regexp 'g' flag is specified don't\n  // constrain the regular expression with ^ & $\n  if (!flags || !~flags.indexOf('g')) {\n    reStr = \"^\" + reStr + \"$\";\n  }\n\n  return new RegExp(reStr, flags);\n};\n","\r\n/**\r\n * This library helps to search and find resources.\r\n *\r\n * @example\r\n * // list all the txt files in the dir1 folder\r\n * EThing.arbo.load(function(){\r\n *   // the next line may list Table that ends with \".txt\"\r\n *   console.log(EThing.arbo.glob('dir1/*.txt');\r\n * })\r\n *\r\n * @namespace {object} EThing.arbo\r\n */\r\n\r\n\r\nvar EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar Resource = require(\"./resource.js\");\r\nvar globToRegExp = require('glob-to-regexp');\r\n\r\n\r\n\r\nEThing.on('ething.resource.removed', function(evt, resourceId){\r\n\tvar resource = EThing.arbo.get(resourceId);\r\n\tif(resource)\r\n\t\tEThing.arbo.remove(resource);\r\n});\r\n\r\n\r\n\r\n\r\nEThing.arbo = {\r\n\r\n  resources: [],\r\n  loaddfr: null,\r\n\r\n  /**\r\n   * Load all available resources.\r\n   * @memberof EThing.arbo\r\n   * @param {function(EThing.Resource[])} [callback] function executed once the resources are loaded\r\n   * @param {boolean} [force] force to reload the entire resources\r\n   * @returns {Promise}\r\n   */\r\n  load: function(callback, force) {\r\n      var self = this;\r\n\r\n      if(this.loaddfr===null || force){\r\n      // load the resources\r\n          this.loaddfr = EThing.request({\r\n              'url': '/resources',\r\n              'method': 'GET',\r\n              'dataType': 'json'\r\n          }).then(function(rs) {\r\n\r\n              self.loaddfr = true;\r\n\r\n              // reset\r\n              self.resources.splice(0,self.resources.length) // keep reference\r\n\r\n              rs.map(function(resource) {\r\n                  return EThing.instanciate(resource);\r\n              }).filter(function(resource){\r\n                  return !!resource;\r\n              }).forEach(function(r) {\r\n                self.resources.push(r)\r\n              });\r\n\r\n              EThing.trigger('ething.arbo.loaded');\r\n\r\n              return self.resources;\r\n          });\r\n      }\r\n\r\n      this.loaddfr.then(function(resources){\r\n          if (typeof callback == 'function')\r\n              callback.call(self, resources)\r\n      })\r\n\r\n      return this.loaddfr\r\n  },\r\n\r\n\tlastRefreshTs: 0,\r\n\r\n  /**\r\n   * Refresh the resources list from the server.\r\n   *\r\n   * @memberof EThing.arbo\r\n   * @return {Promise} return a Promise object\r\n   */\r\n  refresh: function(callback) {\r\n    var self = this;\r\n    this.lastRefreshTs = Date.now();\r\n\r\n    return EThing.request({\r\n      'url': '/resources',\r\n      'method': 'GET',\r\n      'dataType': 'json'\r\n    }).then(function(rs) {\r\n\r\n      rs = rs.map(function(r){\r\n        return EThing.instanciate(r);\r\n      }).filter(function(r){\r\n        return r;\r\n      });\r\n\r\n      self.update(rs, true);\r\n\r\n          if (typeof callback === 'function')\r\n              callback.call(self, self.resources)\r\n\r\n      return self.resources;\r\n    });\r\n\r\n  },\r\n\r\n\tremove: function (resource,noTrigger){\r\n    if(Array.isArray(resource)){\r\n      resource.forEach(function(r){\r\n        remove(r,noTrigger);\r\n      });\r\n      return;\r\n    }\r\n\r\n    if(typeof resource === 'string'){\r\n      resource = this.get(resource);\r\n      if(!resource) return;\r\n    }\r\n\r\n    var removed = [];\r\n\r\n    for (var i=0; i<this.resources.length; i++) {\r\n      var r = this.resources[i];\r\n      if (r.id() == resource.id()) {\r\n        removed.push(r);\r\n        this.resources.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n\r\n    if(!noTrigger && removed.length){\r\n      EThing.trigger('ething.arbo.changed', [[], removed, []]);\r\n    }\r\n  },\r\n\r\n  update: function (newResources, replaceAll, noTrigger){\r\n\r\n    if(!Array.isArray(newResources)) newResources = [newResources];\r\n\r\n    var self = this;\r\n    var removed = [];\r\n    var added = [];\r\n    var updated = [];\r\n\r\n    if(replaceAll){\r\n      // check for removed resources\r\n      // search for resources that have been deleted\r\n      this.resources.forEach(function(r, index){\r\n\r\n        for(var i in newResources){\r\n          if(newResources[i].id() === r.id()){\r\n            return;\r\n          }\r\n        }\r\n\r\n        removed.push(index);\r\n      });\r\n\r\n      removed.map(function(i){\r\n        var r = self.resources[i];\r\n        self.resources.splice(i, 1);\r\n        return r;\r\n      });\r\n    }\r\n\r\n    // check for new resources or update ones\r\n    newResources.forEach(function(r, index){\r\n\r\n      var found = false;\r\n      for(var i in self.resources){\r\n        if(self.resources[i].id() === r.id()){\r\n          found = i;\r\n          break;\r\n        }\r\n      }\r\n      if(found===false){\r\n        // new resource\r\n        added.push(r);\r\n        self.resources.push(r);\r\n      } else {\r\n        // maybe updated ?\r\n        var o = self.resources[found];\r\n        if(o._fromJson(r.json())){\r\n          updated.push(o);\r\n        }\r\n        newResources[index] = o;\r\n      }\r\n\r\n    });\r\n\r\n    var hasChanged = removed.length>0 || added.length>0 || updated.length>0;\r\n\r\n    if(!noTrigger && hasChanged){\r\n      EThing.trigger('ething.arbo.changed', [added, removed, updated]);\r\n    }\r\n\r\n    return {\r\n      resources : newResources,\r\n      removed : removed,\r\n      added : added,\r\n      updated: updated,\r\n      hasChanged: hasChanged\r\n    };\r\n  },\r\n\r\n\r\n  /**\r\n   * Find a resource by its unique id. For all the resources except the Folder, the id is a 7 character alphanumeric string.\r\n   * Since there is no duplicate name for folders, their id is equal to their name.\r\n   *\r\n   * @memberof EThing.arbo\r\n   * @param {string} id 7 character alphanumeric string for all resources except for Folders which is their name.\r\n   * @return {EThing.Resource|undefined} return undefined if not found\r\n   */\r\n  get: function (id) {\r\n    for(var i=0; i<this.resources.length; i++)\r\n      if(this.resources[i].id() === id)\r\n        return this.resources[i];\r\n  },\r\n\r\n\r\n  /**\r\n   * Returns a list of resources that match a *-wildcard style glob string.\r\n   *\r\n   * @memberof EThing.arbo\r\n   * @param {string} filter only the resources that match the glob filter are returned.\r\n   * @return {EThing.Resource[]}\r\n   * @example\r\n   * // return all jpg and png files in 'dir' directory :\r\n   * EThing.arbo.glob('dir/{*.jpg,*.png}')\r\n   *\r\n   * // return all resource under 'dir' directory or subdirectories :\r\n   * EThing.arbo.glob('dir/**')\r\n   */\r\n  glob: function (filter){\r\n      var re = globToRegExp(filter, {\r\n          extended: true,\r\n          globstar: true\r\n      });\r\n    return this.resources.filter(function(r){\r\n          return re.test(r.name())\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * return all the resources. Same as {@link EThing.arbo.find|EThing.arbo.find()}.\r\n   * @memberof EThing.arbo\r\n   * @return {EThing.Resource[]}\r\n   */\r\n  list: function (){\r\n    return this.resources;\r\n  },\r\n\r\n  /**\r\n   * Returns a list of resources that pass the test implemented by the provided function.\r\n   *\r\n   * @memberof EThing.arbo\r\n   * @param {function} filter Function is a predicate, to test each resource of the array. Return true to keep the resource, false otherwise.\r\n   * @return {EThing.Resource[]}\r\n   */\r\n  find: function (f) {\r\n    return this.resources.filter(f)\r\n  },\r\n\r\n\t/**\r\n\t * Check if the resources are loaded (ie. if the {@link EThing.arbo.load} function has been called and has returned).\r\n\t * @memberof EThing.arbo\r\n\t * @return {boolean}\r\n\t */\r\n\tisLoaded: function(){\r\n\t\treturn this.loaddfr === true || ( this.loaddfr && this.loaddfr.state() == 'resolved' );\r\n\t},\r\n\r\n\r\n};\r\n\r\nmodule.exports = EThing.arbo;\r\n","var utils = require(\"./utils.js\");\r\nvar EThing = require(\"./core.js\");\r\n\r\nfunction Auth() {\r\n    \r\n}\r\n\r\nAuth.prototype.install = function(){\r\n    // to be implemented\r\n}\r\n\r\nAuth.prototype.uninstall = function(){\r\n    // to be implemented\r\n}\r\n\r\nAuth.prototype.set = function(options){\r\n    // to be implemented\r\n}\r\n\r\nAuth.prototype.setUrl = function(url){\r\n    return url; // to be implemented\r\n}\r\n\r\n\r\nfunction NoAuth(){\r\n    \r\n}\r\nutils.inherits(NoAuth, Auth)\r\n\r\n\r\nfunction BasicAuth(login, password){\r\n    this.login = login;\r\n    this.password = password;\r\n}\r\nutils.inherits(BasicAuth, Auth)\r\n\r\nBasicAuth.prototype.install = function(){\r\n    EThing.axios.defaults.auth = {\r\n        username: this.login,\r\n        password: this.password\r\n    }\r\n}\r\n\r\nBasicAuth.prototype.uninstall = function(){\r\n    EThing.axios.defaults.auth = {}\r\n}\r\n\r\nBasicAuth.prototype.setUrl = function(url){\r\n    return url.replace(/\\/\\/([^:]+:)?[^@]+@/, '//').replace(/\\/\\//, '//'+login+':'+password+'@');\r\n}\r\n\r\n\r\nfunction ApiKeyAuth(apikey){\r\n    this.apikey = apikey;\r\n}\r\nutils.inherits(ApiKeyAuth, Auth)\r\n\r\nApiKeyAuth.prototype.install = function(){\r\n    EThing.axios.defaults.headers.common['X-API-KEY'] = this.apikey;\r\n}\r\n\r\nApiKeyAuth.prototype.uninstall = function(){\r\n    delete EThing.axios.defaults.headers.common['X-API-KEY'];\r\n}\r\n\r\nApiKeyAuth.prototype.setUrl = function(url){\r\n    return utils.insertParam(url, 'api_key', this.apiey);\r\n}\r\n\r\nvar _auth = null;\r\n\r\n/**\r\n * @namespace EThing.auth\r\n */\r\nvar auth = {\r\n    instance: function(){\r\n        return _auth\r\n    },\r\n    \r\n    /**\r\n     * Returns true if an authentication scheme has been set.\r\n     * @method EThing.auth.isAuthenticated\r\n     * @returns {boolean}\r\n     */\r\n    isAuthenticated: function() {\r\n        return !(_auth instanceof NoAuth)\r\n    },\r\n    \r\n    install: function(auth){\r\n        if(_auth) _auth.uninstall()\r\n        _auth = auth;\r\n        _auth.install()\r\n    },\r\n    \r\n    reset: function(){\r\n        this.install(new NoAuth());\r\n    },\r\n    \r\n    /**\r\n     * Set the apikey authentication scheme for the next requests.\r\n     * @method EThing.auth.setApiKey\r\n     * @param {string} apiKey\r\n     */\r\n    setApiKey: function(apiKey){\r\n        this.install(new ApiKeyAuth(apiKey));\r\n    },\r\n    \r\n    /**\r\n     * Set the basic authentication scheme for the next requests.\r\n     * @method EThing.auth.setBasicAuth\r\n     * @param {string} login\r\n     * @param {string} password\r\n     */\r\n    setBasicAuth: function(login, password){\r\n        this.install(new BasicAuth(login, password));\r\n    },\r\n\r\n}\r\n\r\nauth.reset()\r\n\r\n\r\nEThing.auth = auth;\r\n\r\nmodule.exports = auth;","\r\nvar utils = require(\"./utils.js\");\r\nvar Event = require(\"./event.js\");\r\nvar EventEngine = require(\"./eventEngine.js\");\r\nvar axios = require('axios');\r\n\r\n\r\n/**\r\n * Contains all eThing API classes and functions.\r\n * @namespace EThing\r\n */\r\nvar EThing = {};\r\n\r\n\r\nvar extend = utils.extend;\r\nvar isPlainObject = utils.isPlainObject;\r\n\r\n\r\nEThing.Event = Event;\r\n\r\nEThing.utils = utils;\r\n\r\nEThing.axios = axios.create({});\r\n\r\n\r\n\r\nEThing.config = {\r\n\tserverUrl: 'http://localhost:8000'\r\n};\r\n\r\n\r\nEThing.pairing = false;\r\n\r\n\r\n\r\n/**\r\n * register an handler to an event.\r\n * @name on\r\n * @memberof EThing\r\n * @param {string} event event type string. Multiple space separated events can be given.\r\n * @param {function(EThing.Event)} handler the function to be called when the event has been triggered.\r\n */\r\n\r\n/**\r\n * Remove an event handler.\r\n * @name off\r\n * @memberof EThing\r\n * @param {string} event event type string. Multiple space separated events can be given.\r\n * @param {function(EThing.Event)} [handler] A handler function previously attached for the event(s)\r\n */\r\n\r\n/**\r\n * register an handler to an event. The handler will be only executed once.\r\n * @name one\r\n * @memberof EThing\r\n * @param {string} event event type string. Multiple space separated events can be given.\r\n * @param {function(EThing.Event)} handler the function to be called when the event has been triggered.\r\n */\r\n\r\n/**\r\n * Execute all handlers attached for the given event type.\r\n * @name trigger\r\n * @memberof EThing\r\n * @param {string|EThing.Event} event An event object instance or an event type string.\r\n * @param {object} [extraParameters] Additional parameters to pass along to the event handler.\r\n */\r\n\r\n\r\n/**\r\n * @memberof EThing\r\n * @event \"ething.resource.removed\"\r\n */\r\n\r\n/**\r\n * @memberof EThing\r\n * @event \"ething.file.created\"\r\n */\r\n\r\n/**\r\n * @memberof EThing\r\n * @event \"ething.table.created\"\r\n */\r\n\r\n/**\r\n * @memberof EThing\r\n * @event \"ething.device.created\"\r\n */\r\n\r\n/**\r\n * @memberof EThing\r\n * @event \"ething.app.created\"\r\n */\r\nEventEngine(EThing);\r\n\r\n\r\n\r\n// only absolute url will be preserved untouched,\r\n// else api server url is prepended\r\nEThing.toApiUrl = function(url, auth){\r\n\turl = url || '';\r\n\r\n\tif(!/^([a-z]+:)?\\/\\//.test(url)){\r\n\t\t// relative url\r\n\t\tif(!/^\\//.test(url) && url)\r\n\t\t\turl = '/'+url;\r\n\r\n\t\turl = apiUrl() + url;\r\n\t}\r\n\r\n\tif(auth && isApiUrl(url)){\r\n\t\turl = this.auth.instance().setUrl(url);\r\n\t}\r\n\r\n\treturn url;\r\n}\r\n\r\n// returns true if it is an URL to the HTTP API\r\nvar isApiUrl = function(url){\r\n\treturn (new RegExp('^([a-z]+:)?//'+apiUrl().replace(/^([a-z]+:)?\\/\\//,''))).test(url);\r\n}\r\n\r\n\r\nvar apiUrl = function(){\r\n\treturn EThing.config.serverUrl.replace(/\\/+$/, '') + '/api';\r\n}\r\n\r\nEThing.apiUrl = function(){\r\n\treturn EThing.toApiUrl();\r\n}\r\n\r\n\r\n\r\nvar instanciate = EThing.instanciate = function (json){\r\n\r\n    for(var i in json.extends){\r\n        var clsName = json.extends[i].split('/').pop();\r\n\r\n        if(typeof EThing[clsName] != 'undefined'){\r\n            return new EThing[clsName](json)\r\n        }\r\n\r\n    }\r\n\r\n    console.warn('unknown type: ' + json.type)\r\n\r\n    return new EThing.Resource(json);\r\n\r\n\t//return false;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// if the argument is a json object describing a resource, then it converts it into a Resource instance, else it returns the object unchanged\r\nEThing.resourceConverter = function(data){\r\n\r\n\tif(typeof data == 'object' && data !== null){\r\n\r\n\t\tvar isArray = Array.isArray(data);\r\n\t\tif(!isArray) data = [data];\r\n\r\n\t\t// convert into resource instance\r\n\t\tdata = data.map(function(r){\r\n\t\t\treturn EThing.instanciate(r);\r\n\t\t}).filter(function(r){\r\n\t\t\treturn r;\r\n\t\t});\r\n\r\n\r\n\t\t// update the arbo collection with the new properties\r\n\t\t// and return the corresponding resource object(s)\r\n\t\tif(EThing.arbo)\r\n\t\t\tdata = EThing.arbo.update(data).resources;\r\n\r\n\t\tif(!isArray) data = data.length ? data[0] : null;\r\n\t}\r\n\r\n\treturn data;\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * Make a HTTP request. The options object contains the following properties :\r\n *  - url {string} __required__ The url of the request. The API url will be prepended to relative URLs.\r\n *  - method {string} The HTTP request method to use. Default is GET.\r\n *  - data {string|object|Blob|ArrayBuffer|Buffer} The query string for GET request. The HTTP request body for POST|PATCH|PUT requests. If an object is given, it will be serialized into a query string.\r\n *  - contentType {string} When sending data to the server, use this content type. Default is 'application/octet-stream' if the data is an instance of ArrayBuffer or Buffer, if data is an instance of Blob, the default will be the type of the data itself, else 'application/x-www-form-urlencoded; charset=UTF-8'.\r\n *  - dataType {string} The type of data that you're expecting back from the server: 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'\r\n *  - headers {object} Additional HTTP request headers.\r\n *  - context {object} The value of this provided for the call of the callback\r\n *  - converter {function(data,XHR)} A function that returns the transformed value of the response\r\n *\r\n *\r\n * You may also give a callback as a second parameter. This callback is executed when the request is complete whether in failure or success.\r\n * On success, it receives the returned request data, as well as the XMLHttpRequest object.\r\n * On failure, the first parameter will be a Error object describing the error.\r\n * To check if a request is in failure :\r\n * <pre><code>EThing.request(options,function(data,error){\r\n *     if(error){\r\n *       // an error occurs, print the associated message\r\n *       console.log(error);\r\n *     }\r\n *   })`\r\n * </code></pre>\r\n *\r\n *\r\n * This function returns a {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise Promise} object.\r\n *\r\n *\r\n *\r\n * @method EThing.request\r\n * @param {string|object} options a set of key/value pairs that configure the request. If an URL is given, a GET request with the default options is made.\r\n * @param {function(data,error)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @example\r\n * // GET request\r\n * EThing.request('/resources') // is equivalent to EThing.list()\r\n *\r\n * // pass an object to make more complex request\r\n * // store some data in a file\r\n * EThing.request({\r\n *   url: '/files/'+fileId,\r\n *   method: 'PUT',\r\n *   data: 'some content here ...',\r\n *   contentType: 'text/plain'\r\n * })\r\n * .then(function(file){\r\n *   console.log(\"the content was stored in the file \"+file.name());\r\n * })\r\n * .catch(function(error){\r\n *   console.log(\"an error occurs : \"+error);\r\n * });\r\n */\r\n// opt : same as ajax options or an url\r\nEThing.request = function(opt,callback){\r\n    var self = this;\r\n\r\n    if(typeof opt == 'string')\r\n\t\topt = {\r\n\t\t\turl: opt\r\n\t\t};\r\n\r\n\tvar options = Object.assign({\r\n\t\tmethod: 'GET',\r\n\t\tcontext: this,\r\n\t\turl: null,\r\n\t\tdata: null,\r\n\t\tcontentType: null, // When sending data to the server, use this content type\r\n\t\theaders: null,\r\n\t\tdataType: 'json', // The type of data that you're expecting back from the server (json -> {object}, text -> {string} , arraybuffer, blob -> (not available on nodejs), buffer (nodejs only) )\r\n\t\tconverter: null, // a user defined function to convert the receive data into something else ...\r\n        params: {}\r\n\t},opt);\r\n\r\n    this.auth.instance().set(options);\r\n\r\n    if (options.contentType) {\r\n        options.headers = options.headers || {}\r\n        options.headers['content-type'] = options.contentType\r\n    }\r\n\r\n    return this.axios.request({\r\n        url: options.url,\r\n        baseURL: this.apiUrl(),\r\n        method: options.method.toLowerCase(),\r\n        params: options.params,\r\n        data: options.data,\r\n        responseType: options.dataType.toLowerCase(),\r\n        headers: options.headers\r\n\r\n    }).then(function(response){\r\n        /*console.log(response.data);\r\n        console.log(response.status);\r\n        console.log(response.statusText);\r\n        console.log(response.headers);\r\n        console.log(response.config);*/\r\n\r\n        var data = response.data;\r\n\r\n        if(options.converter){\r\n            try {\r\n                data = options.converter.call(options.context,data);\r\n            } catch(e){\r\n                return Promise.reject(String(e))\r\n            }\r\n        }\r\n\r\n        return Promise.resolve(data)\r\n\r\n    }, function(error){\r\n\r\n        if (error.response) {\r\n          // The request was made and the server responded with a status code\r\n          // that falls out of the range of 2xx\r\n          /*console.log(error.response.data);\r\n          console.log(error.response.status);\r\n          console.log(error.response.headers);*/\r\n\r\n          // get the error message from the response.data\r\n          var parseData = new Promise(function(resolve, reject) {\r\n              var data = error.response.data;\r\n              var responseType = error.config.responseType;\r\n\r\n              function decodeJson(data){\r\n\t\t\t\t\t\t\t\tif (typeof data === 'string') {\r\n\t                try {\r\n\t                    data = JSON.parse(data);\r\n\t                } catch(e){\r\n\t                    reject('invalid JSON data')\r\n\t                    return\r\n\t                }\r\n\t\t\t\t\t\t\t\t}\r\n                resolve(data)\r\n              }\r\n\r\n              switch(responseType){ // 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'\r\n\r\n                    case 'text':\r\n                        decodeJson(data)\r\n                        break;\r\n                    case 'json':\r\n                        resolve(data)\r\n                        break;\r\n                    case 'blob':\r\n\r\n                        if(typeof FileReader === \"undefined\"){\r\n                            reject(\"FileReader not supported.\");\r\n                            return;\r\n                        }\r\n\r\n                        var fileReader = new FileReader();\r\n                        fileReader.onload = function() {\r\n                            decodeJson(String.fromCharCode.apply(null, new Uint8Array(this.result)));\r\n                        };\r\n                        fileReader.readAsArrayBuffer(data);\r\n\r\n                        break;\r\n                    case 'arraybuffer':\r\n                        decodeJson(String.fromCharCode.apply(null, new Uint8Array(data)));\r\n                        break;\r\n                    case 'buffer':\r\n                        decodeJson(data.toString(\"utf8\"));\r\n                        break;\r\n                    default:\r\n                        reject(responseType+\" response type not supported.\");\r\n                        break;\r\n                }\r\n          })\r\n\r\n          return parseData.then(function(serverErr){\r\n              return Promise.reject(serverErr.message);\r\n          }, function(parseErr) {\r\n              return Promise.reject(parseErr);\r\n          })\r\n\r\n\r\n        } else if (error.request) {\r\n          // The request was made but no response was received\r\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n          // http.ClientRequest in node.js\r\n          return Promise.reject('no response from the server');\r\n        } else {\r\n          // Something happened in setting up the request that triggered an Error\r\n          console.log('Error', error.message);\r\n          return Promise.reject(error.message || 'invalid request');\r\n        }\r\n    }).then(function(data){\r\n        self.trigger('ething.request.success',[data]);\r\n\r\n        if(typeof callback === 'function'){\r\n            callback.call(self, data, false)\r\n        }\r\n\r\n        return data\r\n    }, function(err){\r\n        self.trigger('ething.request.error',[err]);\r\n\r\n        if(typeof callback === 'function'){\r\n            callback.call(self, null, err)\r\n        }\r\n\r\n        return Promise.reject(err)\r\n    })\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * This function get the available resources. A filter may be given to retrieve resources with specific attributes (see the HTTP API for more details).\r\n * @method EThing.list\r\n * @param {string} [query] Query string for searching resources\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @example\r\n * // get all the resources\r\n * EThing.list().then(function(resources){\r\n *     console.log(resources);\r\n * })\r\n *\r\n * // get only File & Table resources\r\n * EThing.list('type == \"File\" or type == \"Table\"').then(function(resources){\r\n *     console.log(resources);\r\n * })\r\n */\r\nEThing.list = EThing.find = function(a,b)\r\n{\r\n\tvar query = null, callback = null;\r\n\r\n\tif(arguments.length==1){\r\n\t\tif(typeof arguments[0] == 'function')\r\n\t\t\tcallback = arguments[0];\r\n\t\telse\r\n\t\t\tquery = arguments[0];\r\n\t}\r\n\telse if(arguments.length>=2){\r\n\t\tquery = arguments[0];\r\n\t\tcallback = arguments[1];\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources?' + utils.param({'q':query}),\r\n\t\t'method': 'GET',\r\n\t\t'dataType': 'json',\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n};\r\n\r\n\r\n/**\r\n * Gets a resource by its id.\r\n *\r\n * @method EThing.get\r\n * @param {string|EThing.Resource} resourceIdentifier\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @example\r\n * // get a resource by its id\r\n * EThing.get(\"54516eb\").then(function(resource){\r\n *     console.log('the name is ' + resource.name());\r\n * })\r\n */\r\nEThing.get = function(a,b)\r\n{\r\n\tvar context;\r\n\tif(a instanceof EThing.Resource){\r\n\t\tcontext = a;\r\n\t\ta = a.id();\r\n\t}\r\n\telse if(!utils.isId(a)) {\r\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar callback = b;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources/' + a,\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'GET',\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n};\r\n\r\n\r\n/**\r\n * start pairing.\r\n *\r\n * @method EThing.startPairing\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n */\r\nEThing.startPairing = function(callback)\r\n{\r\n\treturn EThing.request({\r\n\t\t'url': '/start_pairing',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t},callback);\r\n};\r\n\r\n/**\r\n * stop pairing.\r\n *\r\n * @method EThing.stopPairing\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n */\r\nEThing.stopPairing = function(callback)\r\n{\r\n\treturn EThing.request({\r\n\t\t'url': '/stop_pairing',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t},callback);\r\n};\r\n\r\n/**\r\n * dispatch an event emitted by the server (through SSE or socketio)\r\n *\r\n * @method EThing.dispatch\r\n * @param {object} event the event object provided by the server\r\n */\r\nEThing.dispatch = function (event) {\r\n\t// console.log(event)\r\n\r\n\tvar name = event.type,\r\n\t\tisResourceEvent = !!event.resource,\r\n\t\tresource,\r\n\t\tevt = Event(name, {\r\n\t\t\tdata: event.data,\r\n\t\t\toriginalEvent: event\r\n\t\t}),\r\n\t\tarbo = EThing.arbo;\r\n\r\n\tif(isResourceEvent){\r\n\t\tif (arbo) {\r\n\t\t\tvar resourceId, resourceObj;\r\n\r\n\t\t\tif (typeof event.resource === 'string') {\r\n\t\t\t\tresourceId = event.resource;\r\n\t\t\t\tresourceObj = {};\r\n\t\t\t} else {\r\n\t\t\t\tresourceId = event.resource.id;\r\n\t\t\t\tresourceObj = event.resource;\r\n\t\t\t}\r\n\r\n\t\t\tif (name === 'signals/ResourceDeleted') {\r\n\t\t\t\tarbo.remove(resourceId);\r\n\t\t\t} else if (name === 'signals/ResourceCreated') {\r\n\t\t\t\tarbo.update(EThing.instanciate(resourceObj))\r\n\t\t\t} else if (name === 'signals/ResourceUpdated') {\r\n\t\t\t\tresource = arbo.get(resourceId);\r\n\t\t\t\tif (resource) resource._fromJson(resourceObj)\r\n\t\t\t}\r\n\r\n\t\t\tif (!resource) resource = arbo.get(resourceId);\r\n\t\t\tif(resource){\r\n\t\t\t\tevt.resource = resource;\r\n\t\t\t\tresource.trigger(evt);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t// other type of event\r\n\t\tif (name === 'signals/PluginUpdated') {\r\n\t\t\tvar plugin = EThing.Plugin._updateFromJson(event.plugin);\r\n\t\t\tif (plugin) {\r\n\t\t\t\tevt.plugin = plugin;\r\n\t\t\t\tplugin.trigger(evt);\r\n\t\t\t}\r\n\t\t} else if (name === 'signals/PairingUpdated') {\r\n\t\t\tEThing.pairing = !!event.data.state;\r\n\t\t}\r\n\t}\r\n\r\n\tEThing.trigger(evt);\r\n\r\n}\r\n\r\n\r\n\r\nmodule.exports = EThing;\r\n","var EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar Resource = require(\"./resource.js\");\r\n\r\n\r\n\r\n/**\r\n * Constructs a Device instance from an object decribing a device. Should not be called directly. Use instead {@link EThing.list}.\r\n * @protected\r\n * @class The Device resource handle a device\r\n * @memberof EThing\r\n * @extends EThing.Resource\r\n * @param {object} json\r\n */\r\nvar Device = function(json)\r\n{\r\n\tResource.call(this, json);\r\n}\r\nutils.inherits(Device, Resource);\r\n\r\n\r\n/**\r\n *\r\n * @this {EThing.Device}\r\n * @returns {string|null} Return either a string containing information about the location (coordinates, place, room ...) or empty if no location is defined for this device.\r\n */\r\nDevice.prototype.location = function() {\r\n  return this._json.location || '';\r\n}\r\n\r\n/**\r\n *\r\n * @this {EThing.Device}\r\n * @returns {boolean} Return true if the device is connected.\r\n */\r\nDevice.prototype.connected = function() {\r\n\treturn !!this._json.connected;\r\n}\r\n\r\n/**\r\n *\r\n * @this {EThing.Device}\r\n * @returns {Date|null}\r\n */\r\nDevice.prototype.lastSeenDate = function() {\r\n  return (typeof this._json.lastSeenDate == 'string') ? new Date(this._json.lastSeenDate) : null;\r\n}\r\n\r\n/**\r\n *\r\n * @this {EThing.Device}\r\n * @returns {boolean}\r\n */\r\nDevice.prototype.hasBattery = function() {\r\n  return (typeof this._json.battery == \"number\") && this._json.battery >= 0 ;\r\n}\r\n\r\n/**\r\n *\r\n * @this {EThing.Device}\r\n * @returns {number}\r\n */\r\nDevice.prototype.battery = function() {\r\n  return this.hasBattery() ? this._json.battery : null ;\r\n}\r\n\r\n\r\n/**\r\n * Creates a new device\r\n *\r\n * @method EThing.Device.create\r\n * @param {string} type the type of the device to create (ie: SSH, MQTT ...)\r\n * @param {object} attributes\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @fires EThing#ething.device.created\r\n * @example\r\n * EThing.Device.create('SSH', {\r\n *   host: \"localhost\",\r\n *   auth: {\r\n *     user: \"foo\",\r\n *     password: \"bar\"\r\n *   }\r\n * }).then(function(resource){\r\n *     console.log('the new SSH device has been created');\r\n * })\r\n */\r\nDevice.create = function(type, a,callback){\r\n\r\n\treturn Resource.create(Object.assign({type}, a),callback).then(function(r){\r\n\t\tEThing.trigger('ething.device.created',[r]);\r\n    return r;\r\n\t});\r\n\r\n};\r\n\r\nEThing.Device = Device;\r\n\r\nmodule.exports = Device;\r\n","/**\r\n * EThing - javascript API of the EThing project\r\n */\r\n\r\n\r\nvar EThing = require(\"./core.js\");\r\n\r\n// do not touch the following line, the version number will be automatically updated when executing 'npm version'\r\nEThing.VERSION = '0.1.26';\r\n\r\nrequire(\"./resource.js\");\r\nrequire(\"./settings.js\");\r\nrequire(\"./auth.js\");\r\nrequire(\"./file.js\");\r\nrequire(\"./table.js\");\r\nrequire(\"./flow.js\");\r\nrequire(\"./device.js\");\r\nrequire(\"./arbo.js\");\r\nrequire(\"./plugin.js\");\r\n\r\nmodule.exports = EThing;\r\n","var utils = require(\"./utils.js\");\r\n\r\n\r\nfunction returnTrue() {\r\n\treturn true;\r\n}\r\n\r\nfunction returnFalse() {\r\n\treturn false;\r\n}\r\n\r\n\r\n/*\r\nEvent object\r\n*/\r\n\r\nvar Event = function( src, props ) {\r\n\r\n\t// Allow instantiation without the 'new' keyword\r\n\tif ( !( this instanceof Event ) ) {\r\n\t\treturn new Event( src, props );\r\n\t}\r\n\r\n\t// Event type\r\n\tthis.type = src;\r\n\r\n\t// Put explicitly provided properties onto the event object\r\n\tif ( props ) {\r\n\t\tutils.extend( this, props );\r\n\t}\r\n\r\n\t// Create a timestamp if incoming event doesn't have one\r\n\tthis.timeStamp = Date.now();\r\n\t\r\n};\r\n\r\nEvent.prototype = {\r\n\tconstructor: Event,\r\n\tisDefaultPrevented: returnFalse,\r\n\tisPropagationStopped: returnFalse,\r\n\tisImmediatePropagationStopped: returnFalse,\r\n\r\n\tpreventDefault: function() {\r\n\t\tthis.isDefaultPrevented = returnTrue;\r\n\t},\r\n\tstopPropagation: function() {\r\n\t\tthis.isPropagationStopped = returnTrue;\r\n\t},\r\n\tstopImmediatePropagation: function() {\r\n\t\tthis.isImmediatePropagationStopped = returnTrue;\r\n\t\tthis.stopPropagation();\r\n\t}\r\n};\r\n\r\n\r\n\r\n\t\r\nmodule.exports = Event;\r\n\r\n","\r\nvar Event = require(\"./event.js\");\r\n\r\nfunction EventEngine(obj){\r\n\r\n\tvar event_map = {};\r\n\r\n\tobj.on = function(events, handler) {\r\n\t\tif(typeof handler == 'function'){\r\n\t\t\tevents = events.split(' ');\r\n\t\t\tfor(var i=0; i<events.length; i++){\r\n\t\t\t\tvar event = events[i];\r\n\t\t\t\tif(event.length){\r\n\t\t\t\t\tif(!event_map[event]) event_map[event] = [];\r\n\t\t\t\t\tevent_map[event].push(handler);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tobj.off = function(events, handler) {\r\n\t\tevents = events.split(' ');\r\n\t\tfor(var i=0; i<events.length; i++){\r\n\t\t\tvar event = events[i];\r\n\t\t\tif(event.length && event_map[event]){\r\n\t\t\t\tif(typeof handler == 'function'){\r\n\t\t\t\t\tfor(var j=0; j<event_map[event].length; j++){\r\n\t\t\t\t\t\tif(event_map[event][j]===handler){\r\n\t\t\t\t\t\t\tevent_map[event].splice(j, 1);\r\n\t\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tevent_map[event] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tobj.one = function(events, handler) {\r\n\t\tif(typeof handler == 'function'){\r\n\t\t\tobj.on(events, function(){\r\n\t\t\t\tobj.off(events,handler);\r\n\t\t\t\thandler.apply(this,Array.prototype.slice.call(arguments));\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tobj.trigger = function(event, extraParameters){\r\n\t\tif(typeof event === 'string')\r\n\t\t\tevent = Event(event);\r\n\r\n\t\tvar type = event.type,\r\n\t\t\th = event_map[type] || [];\r\n\r\n\t\tif (event_map['*']) h = h.concat(event_map['*'])\r\n\r\n\t\tfor(var i=0; i<h.length; i++){\r\n\t\t\tvar args = [event];\r\n\t\t\tif(Array.isArray(extraParameters))\r\n\t\t\t\targs = args.concat(extraParameters);\r\n\t\t\th[i].apply(obj,args);\r\n\r\n\t\t\tif(event.isImmediatePropagationStopped() || event.isPropagationStopped())\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n\r\n\r\n}\r\n\r\nmodule.exports = EventEngine;\r\n","\r\nvar EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar Resource = require(\"./resource.js\");\r\n\r\n\r\n/**\r\n * Constructs a File instance from an object decribing a file. Should not be called directly. Use instead {@link EThing.list}.\r\n * @protected\r\n * @class The File resource handle regular file such as image or text\r\n * @memberof EThing\r\n * @extends EThing.Resource\r\n * @param {object} json\r\n */\r\nvar File = function(json)\r\n{\r\n\tResource.call(this, json);\r\n}\r\nutils.inherits(File, Resource);\r\n\r\n/**\r\n * Returns the size of this file in bytes.\r\n * @this {EThing.File}\r\n * @returns {number}\r\n */\r\nFile.prototype.size = function() {\r\n\treturn this._json.size;\r\n}\r\n\r\n/**\r\n * Returns the MIME type of this file\r\n * @this {EThing.File}\r\n * @returns {string}\r\n */\r\nFile.prototype.mime = function(){\r\n\treturn this._json.mime;\r\n}\r\n\r\n/**\r\n * Last time the content of this resource was modified\r\n * @this {EThing.File}\r\n * @returns {Date}\r\n */\r\nFile.prototype.contentModifiedDate = function() {\r\n\treturn new Date(this._json.contentModifiedDate);\r\n}\r\n\r\n/**\r\n * Returns the link to access the content.\r\n * @this {EThing.File}\r\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\r\n * @returns {string}\r\n * @example\r\n * // using EThing.request() :\r\n * EThing.request(file.getContentUrl()).then(function(content){\r\n *   // success\r\n *   console.log('content as text : '+content);\r\n * });\r\n *\r\n * // HTML <img> Tag :\r\n * var image = new Image();\r\n * image.src = imageFile.getContentUrl(true);\r\n * document.body.appendChild(image);\r\n */\r\nFile.prototype.getContentUrl = function(auth) {\r\n\treturn EThing.toApiUrl('files/'+this.id(),auth);\r\n}\r\n\r\n// specific methods\r\n\r\n/**\r\n * Gets the content of this file as text or as binary data.\r\n * @this {EThing.File}\r\n * @param {boolean|string} [binary] if true, return the content as ArrayBuffer, if false return the content as text. A string such as 'blob' or 'json' may also be passed.\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.File} The instance on which this method was called.\r\n * @example\r\n * file.read().then(function(content){\r\n *   // success\r\n *   console.log('content as text : '+content);\r\n * });\r\n *\r\n * // nodejs + browser :\r\n * file.read(true).then(function(contentAsArrayBuffer){\r\n *   // success\r\n * });\r\n *\r\n * // browser :\r\n * file.read('blob').then(function(contentAsBlob){\r\n *   // success\r\n * });\r\n *\r\n * // NodeJs :\r\n * var fs = require(\"fs\");\r\n * EThing.get('kDO5Fk4').then(function(resource){\r\n * \tresource.read(true).then(function(data){\r\n * \t\t// data : Buffer instance\r\n * \t\tfs.writeFile(resource.basename(), data, function(){\r\n * \t\t\tconsole.log('It\\'s saved!');\r\n * \t\t});\r\n * \t});\r\n * });\r\n *\r\n */\r\nFile.prototype.read = function(binary, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return File.read.apply(EThing, args);\r\n}\r\n\r\n/**\r\n * Writes some content to this file.\r\n * @this {EThing.File}\r\n * @param {string|Blob|Buffer|ArrayBuffer} data\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.File} The instance on which this method was called.\r\n * @example\r\n * file.write(\"hello world !\").then(function(){\r\n *   // success\r\n * });\r\n *\r\n */\r\nFile.prototype.write = function(data, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return File.write.apply(EThing, args);\r\n}\r\n\r\n\r\n\r\n/**\r\n * Creates a new File from the following attributes :\r\n *   - name {string} __required__ the name of the file\r\n *   - description {string} a string describing this file\r\n *   - data {object} key/value pairs to attach to this file\r\n *\r\n * @method EThing.File.create\r\n * @param {object} attributes\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @fires EThing#ething.file.created\r\n * @example\r\n * EThing.File.create({\r\n *   name: \"foobar.txt\",\r\n *   description: \"this is my file\"\r\n * }).then(function(resource){\r\n *     console.log('file created : ' + resource.name());\r\n * })\r\n */\r\nFile.create = function(a,callback){\r\n\r\n\tif(typeof a == \"string\") {\r\n\t\ta = {\r\n\t\t\t'name': a\r\n\t\t};\r\n\t}\r\n\r\n  var json = Object.assign({type:'resources/File'}, a);\r\n\r\n\tvar content = json.content\r\n\tdelete json.content\r\n\r\n  p = new Promise(function(resolve, reject) {\r\n\r\n\t\t\tResource.create(json).then(function(file){\r\n\r\n          EThing.trigger('ething.file.created',[file]);\r\n\r\n\t\t\t\t\tif (content) {\r\n\t\t\t\t\t\tFile.write(file, content).then(function(file){\r\n\t\t\t\t\t\t\tresolve(file)\r\n\t\t\t\t\t\t}).catch(function(err){\r\n\t              reject(err)\r\n\t          });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve(file)\r\n\t\t\t\t\t}\r\n      }).catch(function(err){\r\n          reject(err)\r\n      });\r\n  })\r\n\r\n\tif (callback) {\r\n\t\tp.then(function(file){\r\n\t\t\tcallback.call(EThing, file, false)\r\n\t\t}).catch(function(err){\r\n\t\t\tcallback.call(EThing, null, err)\r\n\t\t});\r\n\t}\r\n\r\n\treturn p\r\n};\r\n\r\n/*\r\nResource,boolean,callback{function({string|buffer})}\r\n*/\r\nFile.read = function(file, binary, callback)\r\n{\r\n\tvar context;\r\n\tif(file instanceof File){\r\n\t\tcontext = file;\r\n\t\tfile = file.id();\r\n\t}\r\n\telse if(!utils.isId(file)){\r\n\t\tthrow \"First argument must be a File object or a file id !\";\r\n\t}\r\n\r\n\tif(typeof callback == 'undefined' && typeof binary == 'function'){\r\n\t\tcallback = binary;\r\n\t\tbinary = false;\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/files/' + file,\r\n\t\t'method': 'GET',\r\n\t\t'dataType': binary ? (typeof binary === 'string' ? binary : 'arraybuffer') : 'text',\r\n\t\t'context': context\r\n\t},callback);\r\n};\r\n\r\n/*\r\nResource,data{string},callback{function({EThing.File})}\r\n*/\r\nFile.write = function(a,b,c)\r\n{\r\n\tvar file_id = null, context;\r\n\tif(a instanceof File){\r\n\t\tcontext = a;\r\n\t\tfile_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\tfile_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a File object or a file id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar callback = c;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/files/' + file_id,\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'PUT',\r\n\t\t'contentType': (typeof b == 'string') ? 'text/plain' : 'application/octet-stream',\r\n\t\t'data': b,\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n};\r\n\r\nEThing.File = File;\r\n\r\nmodule.exports = File;\r\n","\r\nvar EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar Resource = require(\"./resource.js\");\r\n\r\n\r\n/**\r\n * Constructs a Flow instance from an object decribing a flow. Should not be called directly. Use instead {@link EThing.list}.\r\n * @protected\r\n * @class The Rule resource handle an application\r\n * @memberof EThing\r\n * @extends EThing.Resource\r\n * @param {object} json\r\n */\r\nvar Flow = function(json)\r\n{\r\n\tResource.call(this, json);\r\n}\r\nutils.inherits(Flow, Resource);\r\n\r\n// specific methods\r\n\r\n/**\r\n * Returns the list of nodes.\r\n * @this {EThing.Flow}\r\n * @returns {object}\r\n */\r\nFlow.prototype.nodes = function(){\r\n\treturn this._json.nodes;\r\n}\r\n\r\n/**\r\n * Returns the list of connections.\r\n * @this {EThing.Flow}\r\n * @returns {object}\r\n */\r\nFlow.prototype.connections = function(){\r\n\treturn this._json.connections;\r\n}\r\n\r\n\r\n/**\r\n * Deploy this flow.\r\n * @this {EThing.Flow}\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Flow} The instance on which this method was called.\r\n */\r\nFlow.prototype.deploy = function(callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Flow.deploy.apply(EThing, args);\r\n}\r\n\r\n\r\n/**\r\n * Creates a new Flow from the following attributes :\r\n *   - name {string} __required__ the name of the flow\r\n *   - flow {object} the object describing the flow\r\n *\r\n * @method EThing.Flow.create\r\n * @param {object} attributes\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @fires EThing#ething.flow.created\r\n * @example\r\n * EThing.Flow.create({\r\n *   name: \"myFlow\"\r\n * }).then(function(resource){\r\n *     console.log('the new flow is created');\r\n * })\r\n */\r\nFlow.create = function(json,callback){\r\n\r\n\treturn Resource.create(Object.assign({type:'resources/Flow'}, json), callback).then(function(r){\r\n\t\tEThing.trigger('ething.flow.created',[r]);\r\n    return r\r\n\t});\r\n\r\n};\r\n\r\n\r\n/*\r\nResource,callback\r\n*/\r\nFlow.deploy = function(a,b)\r\n{\r\n\tvar r_id = null, context;\r\n\tif(a instanceof Flow){\r\n\t\tcontext = a;\r\n\t\tr_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\tr_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Flow object or a flow id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar callback = b;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/flows/' + r_id + '/deploy',\r\n\t\t'method': 'GET',\r\n\t\t'dataType': 'text',\r\n\t\t'context': context\r\n\t},callback);\r\n};\r\n\r\n\r\nEThing.Flow = Flow;\r\n\r\nmodule.exports = Flow;\r\n","var EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar EventEngine = require(\"./eventEngine.js\");\r\n\r\n\r\n\r\n/**\r\n * Constructs a Plugin instance from an object decribing a plugin. Should not be called directly.\r\n * @protected\r\n * @class The Plugin\r\n * @memberof EThing\r\n * @param {object} json\r\n */\r\nvar Plugin = function(json)\r\n{\r\n\tEventEngine(this);\r\n\r\n\tthis._json = {};\r\n\tthis._fromJson(json, true);\r\n}\r\n\r\n// loader\r\nPlugin.prototype._fromJson = function(json, noTrigger){\r\n\r\n\tvar updatedKeys = [];\r\n\r\n\tif(!noTrigger && updated) {\r\n\t\t// list the kays that have been updated\r\n\t\tObject.keys(json).forEach(function(key){\r\n\t\t\tif((typeof this._json[key] !== 'undefined') && !utils.isEqual(json[key],this._json[key])){\r\n\t\t\t\tupdatedKeys.push(key);\r\n\t\t\t}\r\n\t\t},this);\r\n\t}\r\n\r\n\tvar updated = updatedKeys.length>0;\r\n\r\n\tObject.assign(this._json, json);\r\n\r\n\tif(!noTrigger && updated) {\r\n\t\t//console.log('plugin updated '+this.name());\r\n\t\tthis.trigger('updated', [updatedKeys]);\r\n\t\tEThing.trigger('ething.plugin.updated',[this, updatedKeys]);\r\n\t}\r\n\r\n\treturn updated;\r\n}\r\n\r\n/**\r\n *  Returns the name of this plugin :\r\n * @this {EThing.Plugin}\r\n * @returns {string}\r\n */\r\nPlugin.prototype.name = function() {\r\n\treturn this._json.name;\r\n}\r\n\r\n/**\r\n *  Returns the type of this plugin :\r\n * @this {EThing.Plugin}\r\n * @returns {string}\r\n */\r\nPlugin.prototype.type = function() {\r\n\treturn this._json.type;\r\n}\r\n\r\n\r\n/**\r\n * Returns the attributes to this plugin.\r\n * @param {string} [name] an optional attribute name. If none is given, an object with all the attributes is returned.\r\n * @this {EThing.Plugin}\r\n * @returns {object|null}\r\n */\r\nPlugin.prototype.attr = function(name, defaultVal) {\r\n\tif(typeof name == 'undefined')\r\n\t\treturn this._json;\r\n\telse {\r\n        if(typeof defaultVal == 'undefined') defaultVal = null\r\n\t\treturn this._json.hasOwnProperty(name) ? this._json[name] : defaultVal;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Execute an operation on this plugin. Same as for Resource.\r\n * @this {EThing.Plugin}\r\n * @param {string} operationId\r\n * @param {object|array|anything} [data] the optional arguments required by the operation\r\n * @param {boolean} [binary] if true, return the content as ArrayBuffer, if false return the content as text. A string such as 'blob' or 'json' may also be passed.\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.plugin} The instance on which this method was called.\r\n */\r\nPlugin.prototype.execute = function(){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Plugin.execute.apply(EThing, args);\r\n}\r\n\r\n/**\r\n * Returns an url for executing an operation.\r\n * @this {EThing.Plugin}\r\n * @param {string} operationId\r\n * @param {object} [data] the optional data required by the operation\r\n * @returns {string} The url.\r\n */\r\nPlugin.prototype.executeUrl = function(operationId, data){\r\n\tvar url = 'plugins/'+this.id()+'/call/'+operationId;\r\n\r\n\tif(utils.isPlainObject(data) && Object.keys(data).length !== 0){\r\n\t\turl += '?' + utils.param(data);\r\n\t}\r\n\r\n\treturn EThing.toApiUrl(url,true);\r\n}\r\n\r\n/**\r\n * Update this plugin attributes\r\n * @this {EThing.Plugin}\r\n * @param {} properties\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Plugin} The instance on which this method was called.\r\n */\r\nPlugin.prototype.set = function(properties, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Plugin.set.apply(EThing, args);\r\n}\r\n\r\n\r\nPlugin.list = function(callback){\r\n\treturn EThing.request({\r\n\t\t'url': '/plugins',\r\n\t\t'method': 'GET',\r\n\t\t'dataType': 'json',\r\n\t\t'converter': Plugin._updateFromJson\r\n\t},callback);\r\n\r\n};\r\n\r\n/*\r\nPlugin,data,callback\r\n*/\r\nPlugin.set = function(a,b,c){\r\n\tvar context;\r\n\r\n\tif(!utils.isPlainObject(b) || !b){\r\n\t\tthrow 'Second argument must be a unempty object !';\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(a instanceof Plugin){\r\n\t\tcontext = a;\r\n\t\ta = a.name();\r\n\t}\r\n\telse if(typeof a != 'string') {\r\n\t\tthrow \"First argument must be a Plugin object or a Plugin name : \"+a;\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar callback = c;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/plugins/' + a,\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': b,\r\n\t\t'context': context,\r\n\t\t'headers': {\r\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\r\n\t\t},\r\n\t\t'converter': Plugin._updateFromJson\r\n\t},callback);\r\n};\r\n\r\n\r\n\r\n/*\r\nplugin, operationId[, data ]\r\n*/\r\nPlugin.execute = function(plugin, operationId, data, binary, callback){\r\n\r\n\tvar context;\r\n\r\n\tif(plugin instanceof Plugin){\r\n\t\tcontext = plugin;\r\n\t\tplugin = plugin.name();\r\n\t}\r\n\telse if(typeof plugin != 'string')\r\n\t\tplugin = plugin;\r\n\telse {\r\n\t\tthrow \"First argument must be a Resource object or a Resource id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(arguments.length == 4){\r\n\r\n\t\tif(typeof binary == 'function'){\r\n\t\t\tcallback = binary;\r\n\t\t\tbinary = undefined;\r\n\t\t}\r\n\r\n\t} else if(arguments.length == 3){\r\n\r\n\t\tif(typeof data == 'function'){\r\n\t\t\tcallback = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/plugins/' + plugin + '/call/' + operationId,\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': typeof data != 'undefined' && data!==null ? JSON.stringify(data) : undefined,\r\n\t\t'dataType': binary ? (typeof binary === 'string' ? binary : 'arraybuffer') : 'text',\r\n\t\t'context': context\r\n\t},callback);\r\n\r\n};\r\n\r\nPlugin.plugins = {};\r\n\r\nPlugin._updateFromJson = function (data) {\r\n\tif(typeof data == 'object' && data !== null){\r\n\r\n\t\tvar isArray = Array.isArray(data);\r\n\t\tif(!isArray) data = [data];\r\n\r\n\t\t// convert into resource instance\r\n\t\tdata = data.map(function(jsondata){\r\n\r\n\t\t\tvar pluginName = jsondata.name;\r\n\t\t\tvar plugin = Plugin.plugins[pluginName];\r\n\r\n\t\t\tif (plugin) {\r\n\t\t\t\t// update\r\n\t\t\t\tplugin._fromJson(jsondata);\r\n\t\t\t} else {\r\n\t\t\t\tplugin = new Plugin(jsondata);\r\n\t\t\t\tPlugin.plugins[pluginName] = plugin;\r\n\t\t\t}\r\n\r\n\t\t\treturn plugin;\r\n\t\t});\r\n\r\n\t\tif(!isArray) data = data.length ? data[0] : null;\r\n\t}\r\n\r\n\treturn data;\r\n}\r\n\r\n\r\nEThing.Plugin = Plugin;\r\n\r\nmodule.exports = Plugin;\r\n","\r\nvar utils = require(\"./utils.js\");\r\nvar EventEngine = require(\"./eventEngine.js\");\r\nvar EThing = require(\"./core.js\");\r\n\r\n\r\n/**\r\n * Base class of all the resources\r\n * @protected\r\n * @class\r\n * @memberOf EThing\r\n * @param {object} json\r\n */\r\nvar Resource = function (json)\r\n{\r\n\tEventEngine(this);\r\n\r\n\tthis._json = {}\r\n\tthis._fromJson(json, true);\r\n}\r\n\r\n// loader\r\nResource.prototype._fromJson = function(json, noTrigger){\r\n\r\n\tvar updated = this._json.modifiedDate && json.modifiedDate && this._json.modifiedDate !== json.modifiedDate;\r\n\tvar updatedKeys = [];\r\n\r\n\tif(!noTrigger && updated) {\r\n\t\t// list the kays that have been updated\r\n\t\tObject.keys(json).forEach(function(key){\r\n\t\t\tif((typeof this._json[key] !== 'undefined') && !utils.isEqual(json[key],this._json[key])){\r\n\t\t\t\tupdatedKeys.push(key);\r\n\t\t\t}\r\n\t\t},this);\r\n\t}\r\n\r\n\tObject.assign(this._json, json);\r\n\r\n\tif(!noTrigger && updated) {\r\n\t\t//console.log('resource updated '+this.name());\r\n\t\tthis.trigger('updated', [updatedKeys]);\r\n\t\tEThing.trigger('ething.resource.updated',[this, updatedKeys]);\r\n\t}\r\n\r\n\treturn updated;\r\n}\r\n\r\n\r\n/**\r\n *  Returns the representation of this instance\r\n * @this {EThing.Resource}\r\n * @returns {object}\r\n */\r\nResource.prototype.json = function(){\r\n\treturn this._json;\r\n}\r\n\r\n/**\r\n * Return true if the resource is of the given type.\r\n * @this {EThing.Resource}\r\n * @param {string} type\r\n * @returns {boolean}\r\n */\r\nResource.prototype.isTypeof = function(type) {\r\n\treturn this._json.extends.indexOf(type) !== -1;\r\n}\r\n\r\n// path accessors\r\n/**\r\n * Returns the name of this resource. A name is constructed as __PathName/FileName__.\r\n * To get only the FileName, see {@link EThing.Resource#basename}.\r\n * To get only the PathName, see {@link EThing.Resource#dirname}.\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.name = function() {\r\n\treturn this._json.name;\r\n}\r\n/**\r\n * Returns the path of this resource\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.dirname = function() {\r\n\treturn EThing.Resource.dirname(this._json.name);\r\n}\r\n/**\r\n * Returns the basename of this resource\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.basename = function() {\r\n\treturn EThing.Resource.basename(this._json.name);\r\n}\r\n/**\r\n * Returns the extension of this resource\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.extension = function(){\r\n\treturn EThing.Resource.extension(this._json.name);\r\n}\r\n/**\r\n * Returns the id of this resource. This id is unique and immutable.\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.id = function(){\r\n\treturn this._json.id;\r\n}\r\n/**\r\n * Returns the id of the Resource which creates it if any, or returns null.\r\n * @this {EThing.Resource}\r\n * @returns {string|null}\r\n */\r\nResource.prototype.createdBy = function(){\r\n\treturn this._json.createdBy;\r\n}\r\n\r\n/**\r\n *  Returns the type of this resource :\r\n *  - \"File\"\r\n *  - \"Table\"\r\n *  - \"App\"\r\n *  - \"Device\"\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.type = function() {\r\n\treturn this._json.type;\r\n}\r\n\r\n/**\r\n *  Returns the types this resource depends on\r\n * @this {EThing.Resource}\r\n * @returns {string[]}\r\n */\r\nResource.prototype.types = function() {\r\n\treturn this._json.extends.slice();\r\n}\r\n\r\n/**\r\n *  Returns the type of this resource :\r\n *  - \"File\"\r\n *  - \"Table\"\r\n *  - \"App\"\r\n *  - \"Device\"\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.baseType = function() {\r\n\tt = this.types()\r\n\treturn t[t.length - 1];\r\n}\r\n\r\n/**\r\n * Create time for this resource\r\n * @this {EThing.Resource}\r\n * @returns {Date}\r\n */\r\nResource.prototype.createdDate = function() {\r\n\treturn new Date(this._json.createdDate);\r\n}\r\nResource.prototype.ctime = function(){\r\n\treturn this.createdDate();\r\n}\r\n\r\n/**\r\n * Last time this resource was modified\r\n * @this {EThing.Resource}\r\n * @returns {Date}\r\n */\r\nResource.prototype.modifiedDate = function() {\r\n\treturn new Date(this._json.modifiedDate);\r\n}\r\nResource.prototype.mtime = function(){\r\n\treturn this.modifiedDate();\r\n}\r\n\r\n/**\r\n * Tells if this resource is publicly available.\r\n * @this {EThing.Resource}\r\n * @returns {boolean|string}\r\n */\r\nResource.prototype.public = function() {\r\n\treturn this._json.public || false;\r\n}\r\n\r\n/**\r\n * Returns the data attached to this resource.\r\n * @param {string} [name] an optional data attribute name.\r\n * @param {} [defaultValue] a default value if the attribute was not found.\r\n * @this {EThing.Resource}\r\n * @returns {object|null}\r\n */\r\nResource.prototype.data = function(name, defaultValue) {\r\n\tif(typeof name == 'undefined')\r\n\t\treturn this._json.data;\r\n\telse {\r\n\t\treturn this._json.data.hasOwnProperty(name) ? this._json.data[name] : defaultValue;\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns the attributes to this resource.\r\n * @param {string} [name] an optional attribute name. If none is given, an object with all the attributes is returned.\r\n * @this {EThing.Resource}\r\n * @returns {object|null}\r\n */\r\nResource.prototype.attr = function(name, defaultVal) {\r\n\tif(typeof name == 'undefined')\r\n\t\treturn this._json;\r\n\telse {\r\n        if(typeof defaultVal == 'undefined') defaultVal = null\r\n\t\treturn this._json.hasOwnProperty(name) ? this._json[name] : defaultVal;\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns true if the attribute exists for this resource.\r\n * @param {string} name attribute name.\r\n * @this {EThing.Resource}\r\n * @returns {boolean}\r\n */\r\nResource.prototype.hasAttr = function(name) {\r\n\treturn this._json.hasOwnProperty(name);\r\n}\r\n\r\n/**\r\n * Returns the description of this resource\r\n * @this {EThing.Resource}\r\n * @returns {string}\r\n */\r\nResource.prototype.description = function() {\r\n\treturn this._json.description || \"\";\r\n}\r\n\r\n// resource modificators (async)\r\n/**\r\n * Remove this resource.\r\n * @this {EThing.Resource}\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Resource} The instance on which this method was called.\r\n * @fires EThing#ething.resource.removed\r\n * @example\r\n * resource.remove().then(function(){\r\n *   // the resource was successfully removed\r\n * });\r\n */\r\nResource.prototype.remove = function(callback){\r\n    var args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Resource.remove.apply(EThing, args);\r\n}\r\n\r\nResource.prototype.update = function(callback){\r\n    return EThing.get(this, callback);\r\n}\r\n\r\n/**\r\n * Update this resource attributes\r\n * @this {EThing.Resource}\r\n * @param {} properties\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Resource} The instance on which this method was called.\r\n * @example\r\n * resource.set({\r\n *   name: \"newName.txt\"\r\n * }).then(function(){\r\n *   console.log(\"the resource was successfully renamed to :\"+this.name());\r\n * });\r\n */\r\nResource.prototype.set = function(properties, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Resource.set.apply(EThing, args);\r\n}\r\n/**\r\n * Attaches persistant data to this resource\r\n * @this {EThing.Resource}\r\n * @param {object} data\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Resource} The instance on which this method was called.\r\n * @example\r\n * resource.setData({\r\n *   \"key\": \"value\"\r\n * }).then(function(){\r\n *   // success\r\n * });\r\n *\r\n * // you can also write :\r\n * resource.setData(\"key\", \"value\").then(function(){\r\n *   // success\r\n * });\r\n */\r\nResource.prototype.setData = function(data, callback){\r\n\r\n\tif(typeof data === 'string' && typeof callback != 'function'){\r\n\t\tvar key = data, value = callback, callback = arguments[2];\r\n\t\tdata = {};\r\n\t\tdata[key] = value;\r\n\t}\r\n\r\n\treturn this.set({'data':data},callback);\r\n}\r\n\r\n/**\r\n * Execute an operation on this resource.\r\n * @this {EThing.Resource}\r\n * @param {string} operationId\r\n * @param {object|array|anything} [data] the optional arguments required by the operation\r\n * @param {boolean} [binary] if true, return the content as ArrayBuffer, if false return the content as text. A string such as 'blob' or 'json' may also be passed.\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Resource} The instance on which this method was called.\r\n * @example\r\n *\r\n * // if this resource is a switch :\r\n * resource.execute('setState', {\r\n * \t state: true\r\n * });\r\n *\r\n * // you can also pass the arguments as an array :\r\n * resource.execute('setState', [true]);\r\n *\r\n * // or as is :\r\n * resource.execute('setState', true);\r\n *\r\n */\r\nResource.prototype.execute = function(){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Resource.execute.apply(EThing, args);\r\n}\r\n\r\n/**\r\n * Returns an url for executing an operation.\r\n * @this {EThing.Resource}\r\n * @param {string} operationId\r\n * @param {object} [data] the optional data required by the operation\r\n * @returns {string} The url.\r\n * @example\r\n *\r\n * var image = new Image();\r\n * image.src = resource.executeUrl('getImage');\r\n * document.body.appendChild(image);\r\n *\r\n */\r\nResource.prototype.executeUrl = function(operationId, data){\r\n\tvar url = 'resources/'+this.id()+'/call/'+operationId;\r\n\r\n\tif(utils.isPlainObject(data) && Object.keys(data).length !== 0){\r\n\t\turl += '?' + utils.param(data);\r\n\t}\r\n\r\n\treturn EThing.toApiUrl(url,true);\r\n}\r\n\r\n\r\n/**\r\n * Creates a new Resource\r\n *\r\n * @method EThing.Resource.create\r\n * @param {object} attributes\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @fires EThing#ething.resource.created\r\n * @example\r\n * EThing.Resource.create({\r\n *   type: \"resources/File\",\r\n *   name: \"foobar\"\r\n * }).then(function(resource){\r\n *     console.log('created : ' + resource.name());\r\n * })\r\n */\r\nResource.create = function(a,callback){\r\n\tif(typeof a.type == 'undefined') {\r\n\t\tthrow \"type attribute is mandatory !\";\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': a,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback).then(function(r){\r\n\t\tEThing.trigger('ething.resource.created',[r]);\r\n    return r\r\n\t});\r\n\r\n};\r\n\r\n\r\n\r\n/*\r\nResource,callback\r\n*/\r\nResource.remove = function(a,callback)\r\n{\r\n\tvar context;\r\n\tif(a instanceof Resource){\r\n\t\tcontext = a;\r\n\t\ta = a.id();\r\n\t}\r\n\telse if(!utils.isId(a)) {\r\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources/' + a,\r\n\t\t'method': 'DELETE',\r\n\t\t'context': context\r\n\t},callback).then(function(){\r\n\t\tEThing.trigger('ething.resource.removed',[a]);\r\n\t});\r\n};\r\n\r\n\r\n/*\r\nResource,data,callback\r\n*/\r\nResource.set = function(a,b,c){\r\n\tvar context;\r\n\r\n\tif(!utils.isPlainObject(b) || !b){\r\n\t\tthrow 'Second argument must be a unempty object !';\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(a instanceof Resource){\r\n\t\tcontext = a;\r\n\t\ta = a.id();\r\n\t}\r\n\telse if(!utils.isId(a)) {\r\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar callback = c;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources/' + a,\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': b,\r\n\t\t'context': context,\r\n\t\t'headers': {\r\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\r\n\t\t},\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n};\r\n\r\n\r\n\r\n/*\r\nresource, operationId[, data ]\r\n*/\r\nResource.execute = function(resource, operationId, data, binary, callback){\r\n\r\n\tvar context;\r\n\r\n\tif(resource instanceof Resource){\r\n\t\tcontext = resource;\r\n\t\tresource = resource.id();\r\n\t}\r\n\telse if(utils.isId(resource))\r\n\t\tresource = resource;\r\n\telse {\r\n\t\tthrow \"First argument must be a Resource object or a Resource id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(arguments.length == 4){\r\n\r\n\t\tif(typeof binary == 'function'){\r\n\t\t\tcallback = binary;\r\n\t\t\tbinary = undefined;\r\n\t\t}\r\n\r\n\t} else if(arguments.length == 3){\r\n\r\n\t\tif(typeof data == 'function'){\r\n\t\t\tcallback = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/resources/' + resource + '/call/' + operationId,\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': typeof data != 'undefined' && data!==null ? JSON.stringify(data) : undefined,\r\n\t\t'dataType': binary ? (typeof binary === 'string' ? binary : 'arraybuffer') : 'text',\r\n\t\t'context': context\r\n\t},callback);\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n* TOOLS\r\n*/\r\nResource.dirname = function(f) {\r\n\tvar s = f.replace(/\\/[^\\/]*\\/?$/, '');\r\n\treturn ( s === f ) ? \"\" : s;\r\n}\r\nResource.basename = function(f) {\r\n\treturn f.replace( /.*\\//, '' );\r\n}\r\nResource.extension = function(f){\r\n\treturn f.indexOf('.')>=0 ? f.split('.').pop() : '';\r\n}\r\nResource.fnmatch = function fnmatch(pattern, path) {\r\n\r\n\tvar patternTab = pattern.split(' ');\r\n\tvar parsedPattern, regexp;\r\n\r\n\tfor(var i=0; i<patternTab.length; i++){\r\n\t\tif(patternTab[i] == '') continue;\r\n\r\n\t\tparsedPattern = '^' + patternTab[i].replace(/\\//g, '\\\\/').\r\n\t\treplace(/\\*\\*/g, '(\\\\/[^\\\\/]+)*').\r\n\t\treplace(/\\*/g, '[^\\\\/]+').\r\n\t\treplace(/((?!\\\\))\\?/g, '$1.') + '$';\r\n\r\n\t\tparsedPattern = '^' + parsedPattern + '$';\r\n\r\n\t\tregexp = new RegExp(parsedPattern);\r\n\t\tif( path.match(regexp) != null ) return true;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\n\r\nEThing.Resource = Resource;\r\n\r\nmodule.exports = Resource;\r\n","\t\r\nvar EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\n\r\n\r\n\r\n/*\r\n* Settings\r\n*/\r\n\r\nvar settings = {};\r\n\r\n/**\r\n * Retrieve the settings.\r\n * @memberof EThing.settings\r\n * @this {EThing.settings}\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n */\r\n\r\nsettings.get = function(callback){\r\n\treturn EThing.request({\r\n\t\t'url': '/settings',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'GET'\r\n\t},callback);\r\n};\r\n\r\n/**\r\n * Update the settings.\r\n * @memberof EThing.settings\r\n * @this {EThing.settings}\r\n * @param {object} [data] updated settings object\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n */\r\nsettings.set = function(data, callback){\r\n\t\r\n\tif(!utils.isPlainObject(data))\r\n\t\tthrow \"First argument must be an object !\";\r\n\t\r\n\t\r\n\treturn EThing.request({\r\n\t\t'url': '/settings',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': data,\r\n\t\t'headers': {\r\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\r\n\t\t}\r\n\t},callback);\r\n};\r\n\r\nEThing.settings = settings;\r\n\r\nmodule.exports = settings;\r\n\r\n\r\n","var EThing = require(\"./core.js\");\r\nvar utils = require(\"./utils.js\");\r\nvar Resource = require(\"./resource.js\");\r\n\r\n\r\n\r\n/**\r\n * Constructs a Table instance from an object decribing a table. Should not be called directly. Use instead {@link EThing.list}.\r\n * @protected\r\n * @class The Table resource handle data in rows and columns\r\n * @memberof EThing\r\n * @extends EThing.Resource\r\n * @param {object} json\r\n */\r\nvar Table = function(json)\r\n{\r\n\tResource.call(this, json);\r\n}\r\nutils.inherits(Table, Resource);\r\n\r\n\r\n// specific methods\r\n/**\r\n * The number of rows in this table\r\n * @this {EThing.Table}\r\n * @returns {number}\r\n */\r\nTable.prototype.length = function(){\r\n\treturn this._json['length'];\r\n}\r\n/**\r\n * The maximum number of rows allowed in this table. Returns null if this feature is disable (number of rows is unlimited).\r\n * @this {EThing.Table}\r\n * @returns {number|null}\r\n */\r\nTable.prototype.maxLength = function(){\r\n\treturn this._json.maxLength;\r\n}\r\n\r\n/**\r\n * Returns the keys in this table. __The default keys (\"id\" and \"date\" are not listed)__.\r\n * @this {EThing.Table}\r\n * @returns {string[]}\r\n */\r\nTable.prototype.keys = function(){\r\n\tvar keys = [];\r\n\tfor(var k in this._json.keys)\r\n\t\tif(this._json.keys.hasOwnProperty(k))\r\n\t\t\tkeys.push(k);\r\n\treturn keys;\r\n}\r\n/**\r\n * Last time the content of this resource was modified\r\n * @this {EThing.Table}\r\n * @returns {Date}\r\n */\r\nTable.prototype.contentModifiedDate = function() {\r\n\treturn new Date(this._json.contentModifiedDate);\r\n}\r\n/**\r\n * Returns rows.\r\n * @this {EThing.Table}\r\n * @param {Object} [options] Customize the selection\r\n * @param {number} [options.start=0] Position of the first rows to return. If start is negative, it starts from the end.\r\n * @param {number} [options.length] Maximum number of rows to return.\r\n * @param {string} [options.sort] The key on which to do the sorting, by default the sort is made by date.\r\n * @param {string} [options.query] A query string to filter the results.\r\n * @param {string} [options.fields] Fields of the results to return. If omitted, all the fields are returned.\r\n * @param {string} [options.datefmt] the format of the date field (values: \"RFC3339\"(default), \"TIMESTAMP\", \"TIMESTAMP_MS\", \"ISO8601\", \"RSS\").\r\n * @param {function(data)} [callback] It is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * @example\r\n * // returns all the content of a table :\r\n * table.select().then(function(data){\r\n *   // success\r\n * });\r\n *\r\n * // returns the last 10 rows sorted by the \"foo\" column :\r\n * table.select({start: -10, sort: \"foo\"}).then(function(data){\r\n *   // success\r\n * });\r\n *\r\n */\r\nTable.prototype.select = function(options,callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.select.apply(EThing, args);\r\n}\r\n/**\r\n * Performs statistics on a specific column.\r\n * @this {EThing.Table}\r\n * @param {string} key The column name on which the statistics should be performed.\r\n * @param {string} [query] A query string to filter the data.\r\n * @param {function(statistics,XHR,options)} [callback] It is executed once the request is complete whether in failure or success\r\n * @returns {Object} The instance on which this method was called.\r\n *\r\n */\r\nTable.prototype.computeStatistics = function(key,query,callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.computeStatistics.apply(EThing, args);\r\n}\r\n/**\r\n * Removes one or multiple rows.\r\n * @this {EThing.Table}\r\n * @param {string|string[]} id The id of the row(s) to be removed\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * @example\r\n * // removes the last 10 rows :\r\n * table.select(-10).then(function(data){\r\n *   this.removeRow(data.map(function(row){\r\n *     return row.id;\r\n *   }));\r\n * });\r\n *\r\n */\r\nTable.prototype.removeRow = function(id,callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.removeRow.apply(EThing, args);\r\n}\r\n/**\r\n * Set new data to a row.\r\n * @this {EThing.Table}\r\n * @param {object} data the data to be updated, it must contain the row id.\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * @example\r\n * table.replaceRow({\r\n * \t 'id': 'g45Tdk4',\r\n * \t 'value': 45\r\n * }).then(function(data){\r\n *   // updated !\r\n * });\r\n *\r\n */\r\nTable.prototype.replaceRow = function(data,callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.replaceRow.apply(EThing, args);\r\n}\r\n\r\n/**\r\n * Finds a single row matching the query and replaces it.\r\n * @this {EThing.Table}\r\n * @param {string} query A query string to filter the data.\r\n * @param {object} data the new data.\r\n * @param {boolean} [upsert] If true, the data will be inserted if no match is found. (default to false).\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * @example\r\n * table.findOneAndReplace(\"name=='foo'\", {\r\n * \t 'name': 'foo',\r\n * \t 'value': 'bar'\r\n * }).then(function(table){\r\n *   // updated or inserted if not found !\r\n * });\r\n *\r\n */\r\nTable.prototype.findOneAndReplace = function(query,data,upsert,callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.findOneAndReplace.apply(EThing, args);\r\n}\r\n\r\n/**\r\n * Insert new data into the table. The data argument must be a key/value object.\r\n * @this {EThing.Table}\r\n * @param {object} data\r\n * @param {string} [invalid_field] The behaviour to adopt when an invalid field name appears. The value must be one of the following : \"rename\",\"stop\",\"skip\",\"none\".\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * @example\r\n * table.insert({\r\n *   'field1': \"foobar\",\r\n *   'field2': 3.14,\r\n *   'field3': true\r\n * }).then(function(){\r\n *   // success\r\n * });\r\n *\r\n */\r\nTable.prototype.insert = function(data, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.insert.apply(this,args);\r\n}\r\n\r\n/**\r\n * Replace the content of this table by a new set of data.\r\n * @this {EThing.Table}\r\n * @param {object[]} data\r\n * @param {string} [invalid_field] The behaviour to adopt when an invalid field name appears. The value must be one of the following : \"rename\",\"stop\",\"skip\",\"none\".\r\n * @param {bool} [skip_error] Whether to skip data on error or not\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {EThing.Table} The instance on which this method was called.\r\n * // copy table content\r\n * var tableSrc, tableDst;\r\n * tableSrc.select().then(function(data){\r\n *   tableDst.import(data);\r\n * });\r\n *\r\n */\r\nTable.prototype.import = function(data, callback){\r\n\tvar args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n    return Table.import.apply(this,args);\r\n}\r\n\r\n/**\r\n * Returns the link to access the content.\r\n * @this {EThing.Table}\r\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\r\n * @returns {string}\r\n * @example\r\n * // using EThing.request() :\r\n * EThing.request(table.getContentUrl()).then(function(rows){\r\n *   // success, rows is an array of object\r\n *   console.log('number of rows : '+rows.length);\r\n * });\r\n *\r\n * // or using jQuery :\r\n * $.getJSON(table.getContentUrl(true)).then(function(rows){\r\n *   // success\r\n * });\r\n */\r\nTable.prototype.getContentUrl = function(auth) {\r\n\treturn EThing.toApiUrl('tables/'+this.id(),auth);\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * Creates a new Table from the following attributes :\r\n *   - name {string} __required__ the name of the table\r\n *   - description {string} a string describing this table\r\n *   - data {object} key/value pairs to attach to this table\r\n *   - maxLength {number} the maximum number of rows allowed in this table. 0 means unlimited. Default to 5000.\r\n *\r\n * @method EThing.Table.create\r\n * @param {object} attributes\r\n * @param {function(data)} [callback] it is executed once the request is complete whether in failure or success\r\n * @returns {Promise}\r\n * @fires EThing#ething.table.created\r\n * @example\r\n * EThing.Table.create({\r\n *   name: \"foobar\"\r\n * }).then(function(resource){\r\n *     console.log('table created : ' + resource.name());\r\n * })\r\n */\r\nTable.create = function(a,callback){\r\n\r\n\tif(typeof a == \"string\")\r\n\t\ta = {\r\n\t\t\t'name': a\r\n\t\t};\r\n\r\n\treturn Resource.create(Object.assign({type:'resources/Table'}, a), callback).then(function(r){\r\n\t\tEThing.trigger('ething.table.created',[r]);\r\n    return r\r\n\t});\r\n\r\n};\r\n\r\n\r\nTable.select = function(a,options,callback){\r\n\r\n\tvar table_id = null, context;\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif((typeof callback == 'undefined') && (typeof options == 'function')){\r\n\t\tcallback = options;\r\n\t\toptions = null;\r\n\t}\r\n\r\n\toptions = options || {};\r\n\r\n\tif(Array.isArray(options.fields)){\r\n\t\toptions.fields = options.fields.join(',');\r\n\t}\r\n\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '?' + utils.param({'start':options.start,'length':options.length,'sort':options.sort,'q':options.query,'fields':options.fields,'datefmt':options.datefmt}),\r\n\t\t'method': 'GET',\r\n\t\t'dataType': 'json',\r\n\t\t'context': context\r\n\t},callback);\r\n\r\n}\r\n\r\nTable.computeStatistics = function(a,key,query,callback){\r\n\r\n\tvar table_id = null, context;\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif((typeof callback == 'undefined') && (typeof query == 'function')){\r\n\t\tcallback = query;\r\n\t\tquery = null;\r\n\t}\r\n\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '/statistics?' + utils.param({'key':key,'q':query}),\r\n\t\t'method': 'GET',\r\n\t\t'dataType': 'json',\r\n\t\t'context': context\r\n\t},callback);\r\n\r\n}\r\n\r\n\r\n/*\r\nTable,id,callback\r\n*/\r\nTable.removeRow = function(a,b,c){\r\n\r\n\tvar table_id = null, context;\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar id = Array.isArray(b) ? b : [b];\r\n\tvar callback = c;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '/remove',\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': id,\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n\r\n}\r\n\r\n/*\r\nTable,data,callback\r\n*/\r\nTable.replaceRow = function(a,b,c){\r\n\r\n\tvar table_id = null, context;\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(typeof b === 'object' && !utils.isId(b.id))\r\n\t\tthrow \"Second argument must be an object containing at least a document id\";\r\n\r\n\tvar docId = b.id\r\n\tvar callback = c;\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '/id/'+docId,\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': b,\r\n\t\t'context': context,\r\n\t\t'headers': {\r\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\r\n\t\t}\r\n\t},callback);\r\n\r\n}\r\n\r\n/*\r\nTable,query,data[,upsert][,callback]\r\n*/\r\nTable.findOneAndReplace = function(a,b,c,d,e){\r\n\r\n\tvar table_id = null, context, callback = e, upsert = false;\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(typeof b !== 'string')\r\n\t\tthrow \"Second argument must be a query string\";\r\n\r\n\tif(typeof c !== 'object')\r\n\t\tthrow \"Third argument must be an object\";\r\n\r\n\tif(typeof e === 'undefined' && typeof d === 'function'){\r\n\t\tcallback = d;\r\n\t\tupsert = false;\r\n\t}\r\n\tif(typeof d === 'boolean') {\r\n\t\tupsert = d;\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '/replace?' + utils.param({'q':b, 'upsert':upsert}),\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': c,\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n\r\n}\r\n\r\n/*\r\nTable,kv,callback\r\nTable,column,data,callback\r\n\r\nkv = {\r\n\t...\r\n\tcolumnX: valueX,\r\n\t...\r\n}\r\n\r\nNote : if valueX is null, so no data will be appended and the columnX will be created if it does not exist\r\n\r\n*/\r\nTable.insert = function(a,postData,c,d){\r\n\r\n\tvar callback, table_id = null, context, invalid_field;\r\n\r\n\tif(a instanceof Table){\r\n\t\tcontext = a;\r\n\t\ttable_id = a.id();\r\n\t}\r\n\telse if(utils.isId(a))\r\n\t\ttable_id = a;\r\n\telse {\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif( typeof c == 'string' ){\r\n\t\tinvalid_field = c;\r\n\t\tcallback = d;\r\n\t}\r\n\telse {\r\n\t\tcallback = c;\r\n\t}\r\n\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table_id + '?' + utils.param({'invalid_field':invalid_field}),\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'POST',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': postData,\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n\r\n}\r\n\r\n\r\nTable.import = function(table,data){\r\n\tvar context,invalid_field,skip_error,callback;\r\n\r\n\tif(table instanceof Table){\r\n\t\tcontext = table;\r\n\t\ttable = table.id();\r\n\t}\r\n\telse if(!utils.isId(table)){\r\n\t\tthrow \"First argument must be a Table object or a table id !\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(!Array.isArray(data))\r\n\t\tthrow \"The data must be an array of objects\";\r\n\r\n\tfor(var i=2; i<arguments.length; i++){\r\n\t\tswitch(typeof arguments[i]){\r\n\t\t\tcase 'function':\r\n\t\t\t\tcallback = arguments[i];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'boolean':\r\n\t\t\t\tskip_error = arguments[i];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'string':\r\n\t\t\t\tinvalid_field = arguments[i];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn EThing.request({\r\n\t\t'url': '/tables/' + table + '?' + utils.param({'skip_error':skip_error,'invalid_field':invalid_field}),\r\n\t\t'dataType': 'json',\r\n\t\t'method': 'PUT',\r\n\t\t'contentType': \"application/json; charset=utf-8\",\r\n\t\t'data': data,\r\n\t\t'context': context,\r\n\t\t'converter': EThing.resourceConverter\r\n\t},callback);\r\n\r\n}\r\n\r\nEThing.Table = Table;\r\n\r\nmodule.exports = Table;\r\n","\r\n\r\nvar Utils = {};\r\n\r\n\r\nUtils.isId = function(s){\r\n\treturn (typeof s == 'string' && s.length === 7 && /^[0-9a-zA-Z\\-_]+$/.test(s));\r\n}\r\n\r\n\r\nUtils.parseUrl = function(url){\r\n\tvar r = /^((([a-z]+):)?\\/\\/)?(([^:]*)(:([^@]*))?@)?([^:\\/?#]+)?(:([0-9]+))?([^?#]+)?(\\?[^#]*)?(#.*)?$/i.exec(url);\r\n\treturn r ? {\r\n\t\tscheme : r[3],\r\n\t\tuser : r[5],\r\n\t\tpassword : r[7],\r\n\t\thostname : r[8],\r\n\t\tport : r[10],\r\n\t\tpath : r[11],\r\n\t\tsearch : r[12],\r\n\t\thash: r[13]\r\n\t} : false;\r\n}\r\n\r\nUtils.getParam = function(url, key) {\r\n\tvar queryIndex = url.indexOf('?'); \r\n\tvar regex = new RegExp(\"[\\\\?&]\" + encodeURIComponent(key) + \"=([^&#]*)\"),\r\n\t\tresults = queryIndex!==-1 ? regex.exec(url.substr(queryIndex)) : null;\r\n\treturn results === null ? \"\" : decodeURIComponent(results[1]);\r\n}\r\n\r\nUtils.getQueryString = function(url, key) {\r\n\tvar queryIndex = url.indexOf('?'); \r\n\tvar regex = new RegExp(\"[\\\\?&]\" + encodeURIComponent(key) + \"=([^&#]*)\"),\r\n\t\tresults = queryIndex!==-1 ? regex.exec(url.substr(queryIndex)) : null;\r\n\treturn results === null ? \"\" : decodeURIComponent(results[1]);\r\n}\r\n\r\nUtils.removeParam = function(url,key){\r\n\t//prefer to use l.search if you have a location/link object\r\n\tvar urlparts= url.split('?');   \r\n\tif (urlparts.length>=2) {\r\n\t\t\r\n\t\tvar hashIndex = urlparts[1].indexOf('#'),\r\n\t\t\thash = '';\r\n\t\tif(hashIndex !== -1){\r\n\t\t\thash = urlparts[1].substr(hashIndex);\r\n\t\t\turlparts[1] = urlparts[1].substr(0,hashIndex);\r\n\t\t}\r\n\t\t\t\r\n\t\tvar prefix= encodeURIComponent(key)+'=';\r\n\t\tvar pars= urlparts[1].split(/[&;]/g);\r\n\r\n\t\t//reverse iteration as may be destructive\r\n\t\tfor (var i= pars.length; i-- > 0;) {    \r\n\t\t\t//idiom for string.startsWith\r\n\t\t\tif (pars[i].lastIndexOf(prefix, 0) !== -1) {  \r\n\t\t\t\tpars.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\turl= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\") + hash;\r\n\t\treturn url;\r\n\t} else {\r\n\t\treturn url;\r\n\t}\r\n};\r\n\r\nUtils.insertParam = function(url,key,value){\r\n\t\r\n\turl = Utils.removeParam(url,key);\r\n\t\r\n\tvar hashIndex = url.indexOf('#'),\r\n\t\thash = '';\r\n\tif(hashIndex !== -1){ // extract hash\r\n\t\thash = url.substr(hashIndex);\r\n\t\turl = url.substr(0,hashIndex);\r\n\t}\r\n\t\r\n\tvar queryIndex = url.indexOf('?'),\r\n\t\tquery = '';\r\n\tif(queryIndex !== -1){ // extract query\r\n\t\tquery = url.substr(queryIndex);\r\n\t\turl = url.substr(0,queryIndex);\r\n\t}\r\n\t\r\n\tquery += query.length ? '&' : '?';\r\n\tquery += encodeURIComponent(key)+'='+encodeURIComponent(value);\r\n\t\r\n\treturn url+query+hash;\r\n};\r\n\r\n\r\nfunction buildParams( prefix, obj, add ) {\r\n\tvar name;\r\n\r\n\tif ( Array.isArray( obj ) ) {\r\n\t\t// Serialize array item.\r\n\t\tfor(var i in obj){\r\n\t\t\tvar v = obj[i];\r\n\t\t\tif ( /\\[\\]$/.test( prefix ) ) {\r\n\t\t\t\t// Treat each array item as a scalar.\r\n\t\t\t\tadd( prefix, v );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\r\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, add );\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t} else if ( typeof obj === \"object\" ) {\r\n\t\t// Serialize object item.\r\n\t\tfor ( name in obj ) {\r\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], add );\r\n\t\t}\r\n\r\n\t} else {\r\n\t\t// Serialize scalar item.\r\n\t\tadd( prefix, obj );\r\n\t}\r\n}\r\nUtils.param = function(data){\r\n\t\r\n\tvar prefix,\r\n\t\ts = [],\r\n\t\tadd = function( key, value ) {\r\n\t\t\t// If value is a function, invoke it and return its value\r\n\t\t\tvalue = (typeof value == 'function') ? value() : ( value == null ? \"\" : value );\r\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\r\n\t\t};\r\n\r\n\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n\t// did it), otherwise encode params recursively.\r\n\tfor ( prefix in data ) {\r\n\t\tif(!(data[prefix] === null || typeof data[prefix] == 'undefined'))\r\n\t\t\tbuildParams( prefix, data[ prefix ], add );\r\n\t}\r\n\r\n\t// Return the resulting serialization\r\n\treturn s.join( \"&\" ).replace( /%20/g, \"+\" );\r\n\t\r\n}\r\n\r\n\r\n\r\n\r\nvar pad = Utils.pad = function(n, width, z) {\r\n\tz = z || '0';\r\n\tn = n + '';\r\n\treturn n.length >= width ? n : new Array(width - n.length + 1)\r\n\t\t.join(z) + n;\r\n}\r\n\r\n\r\nUtils.sizeToString = function(s) {\r\n\ts = parseInt(s);\r\n\tif(isNaN(s)) return '-';\r\n\tvar coef = 0.9;\r\n\tif (s > 1000000000 * coef)\r\n\t\ts = (Math.floor((s / 1000000000) * 100 ) / 100) + ' GB';\r\n\telse if (s > 1000000 * coef)\r\n\t\ts = (Math.floor((s / 1000000) * 100) / 100) + ' MB';\r\n\telse if (s > 1000 * coef)\r\n\t\ts = (Math.floor((s / 1000) * 100) / 100) + ' KB';\r\n\telse\r\n\t\ts = s + ' B';\r\n\treturn s;\r\n};\r\n\r\nUtils.dateToString = function(d) {\r\n\tvar now = new Date();\r\n\t\r\n\tif(typeof d == 'number'){\r\n\t\td = new Date(d*1000);\r\n\t}\r\n\t\r\n\tif(!d)\r\n\t\treturn '-';\r\n\telse if(now.getTime()-d.getTime() < 86400000){\r\n\t\t// 22:52\r\n\t\treturn pad(d.getHours(),2) + ':' + pad(d.getMinutes(),2);\r\n\t}\r\n\telse {\r\n\t\tvar curr_year = d.getFullYear();\r\n\t\tvar curr_date = d.getDate();\r\n\t\tvar curr_month = d.getMonth();\r\n\t\t\r\n\t\tif(curr_year == now.getFullYear()){\r\n\t\t\t// Jul. 27\r\n\t\t\tvar m_names = new Array(\"Jan\", \"Feb\", \"Mar\",\r\n\t\t\t\t\"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\",\r\n\t\t\t\t\"Oct\", \"Nov\", \"Dec\");\r\n\t\t\treturn curr_date + ' ' + m_names[curr_month] + '.';\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// 2014/07/27\r\n\t\t\treturn curr_year + '/' + pad(curr_month+1,2) + '/' + pad(curr_date,2);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nUtils.dateDiffToString = function(diffInSec) {\r\n\tdiffInSec = parseInt(diffInSec);\r\n\tif(isNaN(diffInSec)) return '-';\r\n\t// transform it into interval\r\n\tvar divideBy = {\r\n\t\t\tw: 604800,\r\n\t\t\td: 86400,\r\n\t\t\th: 3600,\r\n\t\t\tm: 60\r\n\t\t},\r\n\t\tw = 0, // number of word\r\n\t\ts = '', // output string\r\n\t\tv;\r\n\tv = Math.floor(diffInSec / divideBy.w);\r\n\tif (v >= 1 && w < 2) {\r\n\t\ts += Math.floor(v) + ' week' + (v > 1 ? 's' : '');\r\n\t\tdiffInSec -= v * divideBy.w;\r\n\t\tw++;\r\n\t}\r\n\tv = Math.floor(diffInSec / divideBy.d);\r\n\tif (v >= 1 && w < 2) {\r\n\t\tif (w) s += ' ';\r\n\t\ts += Math.floor(v) + ' day' + (v > 1 ? 's' : '');\r\n\t\tdiffInSec -= v * divideBy.d;\r\n\t\tw++;\r\n\t}\r\n\tv = Math.floor(diffInSec / divideBy.h);\r\n\tif (v >= 1 && w < 2) {\r\n\t\tif (w) s += ' ';\r\n\t\ts += Math.floor(v) + ' hour' + (v > 1 ? 's' : '');\r\n\t\tdiffInSec -= v * divideBy.h;\r\n\t\tw++;\r\n\t}\r\n\tv = Math.floor(diffInSec / divideBy.m);\r\n\tif (v >= 1 && w < 2) {\r\n\t\tif (w) s += ' ';\r\n\t\ts += Math.floor(v) + ' minute' + (v > 1 ? 's' : '');\r\n\t\tdiffInSec -= v * divideBy.m;\r\n\t\tw++;\r\n\t}\r\n\tv = diffInSec;\r\n\tif (v >= 1 && w < 2) {\r\n\t\tif (w) s += ' ';\r\n\t\ts += Math.floor(v) + ' seconde' + (v > 1 ? 's' : '');\r\n\t\tw++;\r\n\t}\r\n\r\n\treturn s;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar class2type = {},\r\n\ttoString = class2type.toString,\r\n\thasOwn = class2type.hasOwnProperty;\r\n\r\n// Populate the class2type map\r\n\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \").forEach(function(name){\r\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\r\n});\r\n\r\n\r\nUtils.type = function( obj ) {\r\n\tif ( obj == null ) {\r\n\t\treturn obj + \"\";\r\n\t}\r\n\r\n\t// Support: Android<4.0, iOS<6 (functionish RegExp)\r\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\r\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\r\n\t\ttypeof obj;\r\n};\r\n\r\nUtils.isPlainObject = function( obj ) {\r\n\tvar key;\r\n\r\n\t// Not plain objects:\r\n\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\r\n\t// - DOM nodes\r\n\t// - window\r\n\tif ( Utils.type( obj ) !== \"object\" || obj.nodeType || (obj != null && obj === obj.window) ) {\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\ttry {\r\n\t\t// Not own constructor property must be Object\r\n\t\tif ( obj.constructor &&\r\n\t\t\t\t!hasOwn.call( obj, \"constructor\" ) &&\r\n\t\t\t\t!hasOwn.call( obj.constructor.prototype || {}, \"isPrototypeOf\" ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} catch ( e ) {\r\n\t  // IE8,9 Will throw exceptions on certain host objects #9897\r\n\t  return false;\r\n\t}\r\n\r\n\t// Own properties are enumerated firstly, so to speed up,\r\n\t// if last one is own, then all properties are own\r\n\tfor ( key in obj ) {}\r\n\r\n\treturn key === undefined || hasOwn.call( obj, key );\r\n};\r\n\r\nUtils.extend = function() {\r\n\tvar options, name, src, copy, copyIsArray, clone,\r\n\t  target = arguments[0] || {},\r\n\t  i = 1,\r\n\t  length = arguments.length,\r\n\t  deep = false;\r\n\r\n\t// Handle a deep copy situation\r\n\tif ( typeof target === \"boolean\" ) {\r\n\t  deep = target;\r\n\t  target = arguments[1] || {};\r\n\t  // skip the boolean and the target\r\n\t  i = 2;\r\n\t}\r\n\r\n\t// Handle case when target is a string or something (possible in deep copy)\r\n\tif ( typeof target !== \"object\" && typeof target !== 'function' ) {\r\n\t  target = {};\r\n\t}\r\n\r\n\tif ( length === i ) {\r\n\t  target = this;\r\n\t  --i;\r\n\t}\r\n\r\n\tfor ( ; i < length; i++ ) {\r\n\t  // Only deal with non-null/undefined values\r\n\t  if ( (options = arguments[ i ]) != null ) {\r\n\t\t// Extend the base object\r\n\t\tfor ( name in options ) {\r\n\t\t  src = target[ name ];\r\n\t\t  copy = options[ name ];\r\n\r\n\t\t  // Prevent never-ending loop\r\n\t\t  if ( target === copy ) {\r\n\t\t\tcontinue;\r\n\t\t  }\r\n\r\n\t\t  // Recurse if we're merging plain objects or arrays\r\n\t\t  if ( deep && copy && ( Utils.isPlainObject(copy) || (copyIsArray = Array.isArray(copy)) ) ) {\r\n\t\t\tif ( copyIsArray ) {\r\n\t\t\t  copyIsArray = false;\r\n\t\t\t  clone = src && Array.isArray(src) ? src : [];\r\n\r\n\t\t\t} else {\r\n\t\t\t  clone = src && Utils.isPlainObject(src) ? src : {};\r\n\t\t\t}\r\n\r\n\t\t\t// Never move original objects, clone them\r\n\t\t\ttarget[ name ] = Utils.extend( deep, clone, copy );\r\n\r\n\t\t  // Don't bring in undefined values\r\n\t\t  } else if ( copy !== undefined ) {\r\n\t\t\ttarget[ name ] = copy;\r\n\t\t  }\r\n\t\t}\r\n\t  }\r\n\t}\r\n\t// Return the modified object\r\n\treturn target;\r\n};\r\n\r\nUtils.isEqual = function(x, y) {\r\n\t'use strict';\r\n\r\n\tif (x === null || x === undefined || y === null || y === undefined) { return x === y; }\r\n\t// after this just checking type of one would be enough\r\n\tif (x.constructor !== y.constructor) { return false; }\r\n\t// if they are functions, they should exactly refer to same one (because of closures)\r\n\tif (x instanceof Function) { return x === y; }\r\n\t// if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\r\n\tif (x instanceof RegExp) { return x === y; }\r\n\tif (x === y || x.valueOf() === y.valueOf()) { return true; }\r\n\tif (Array.isArray(x) && x.length !== y.length) { return false; }\r\n\r\n\t// if they are dates, they must had equal valueOf\r\n\tif (x instanceof Date) { return false; }\r\n\r\n\t// if they are strictly equal, they both need to be object at least\r\n\tif (!(x instanceof Object)) { return false; }\r\n\tif (!(y instanceof Object)) { return false; }\r\n\r\n\t// recursive object equality check\r\n\tvar p = Object.keys(x);\r\n\treturn Object.keys(y).every(function (i) { return p.indexOf(i) !== -1; }) &&\r\n\t\tp.every(function (i) { return Utils.isEqual(x[i], y[i]); });\r\n}\r\n\r\n\r\nUtils.inherits = function (extended, parent){\r\n\textended.prototype = new parent();\r\n\textended.prototype.constructor = extended; // fix constructor property\r\n};\r\n\r\n\r\nUtils.btoa = function (str) {\r\n    if(typeof btoa !== \"undefined\")\r\n        return btoa(str);\r\n    \r\n    var buffer;\r\n    if (str instanceof Buffer) {\r\n        buffer = str;\r\n    } else {\r\n        buffer = new Buffer(str.toString(), 'binary');\r\n    }\r\n    return buffer.toString('base64');\r\n}\r\n\r\n\t\r\nUtils.atob = function (str) {\r\n    if(typeof atob !== \"undefined\")\r\n        return atob(str);\r\n    \r\n    return new Buffer(str, 'base64').toString('binary');\r\n}\r\n\r\n\r\nUtils.toBase64 = function(content, callback){\r\n    \r\n    if(typeof Blob !== \"undefined\" && content instanceof Blob){\r\n        // asynchronous\r\n        \r\n        if(typeof FileReader === \"undefined\")\r\n            throw 'no FileReader instance found';\r\n        \r\n        var reader = new FileReader();\r\n        reader.onloadend = function() {\r\n          content = reader.result.substr(reader.result.indexOf(';base64,')+8);\r\n          callback(content);\r\n        }\r\n        reader.readAsDataURL(content);\r\n        \r\n        return;\r\n    }\r\n    else if(content instanceof ArrayBuffer){\r\n        var binary = '',\r\n            bytes = new Uint8Array(content);\r\n        for (var i = 0; i < bytes.byteLength; i++) {\r\n            binary += String.fromCharCode( bytes[ i ] );\r\n        }\r\n        content = Utils.btoa(binary);\r\n    }\r\n    else if(typeof Buffer !== \"undefined\" && content instanceof Buffer){\r\n        content = content.toString('base64');\r\n    }\r\n    else if(typeof content === 'string'){\r\n        content = Utils.btoa(content);\r\n    } else {\r\n        throw 'invalid type';\r\n    }\r\n    \r\n    callback(content);\r\n    \r\n    return;\r\n}\r\n\r\n\t\r\n\r\nmodule.exports = Utils;\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(977);\n"],"names":["root","factory","exports","module","define","amd","this","utils","settle","buildURL","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","data","requestHeaders","headers","isFormData","request","XMLHttpRequest","auth","username","password","Authorization","btoa","open","method","toUpperCase","url","params","paramsSerializer","timeout","onreadystatechange","readyState","status","responseURL","indexOf","responseHeaders","getAllResponseHeaders","response","responseType","responseText","statusText","onerror","ontimeout","isStandardBrowserEnv","cookies","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","forEach","val","key","toLowerCase","setRequestHeader","e","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","bind","Axios","defaults","createInstance","defaultConfig","context","instance","prototype","extend","axios","create","instanceConfig","merge","Cancel","CancelToken","isCancel","all","promises","spread","message","toString","__CANCEL__","executor","TypeError","resolvePromise","token","reason","throwIfRequested","source","c","value","InterceptorManager","dispatchRequest","interceptors","arguments","chain","interceptor","unshift","fulfilled","rejected","push","length","shift","handlers","use","eject","id","fn","h","enhanceError","code","error","Error","transformData","isAbsoluteURL","combineURLs","throwIfCancellationRequested","baseURL","transformRequest","common","adapter","transformResponse","validateStatus","fns","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","isUndefined","process","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","JSON","stringify","parse","maxContentLength","thisArg","args","Array","i","apply","encode","encodeURIComponent","replace","serializedParams","parts","isArray","v","isDate","toISOString","join","relativeURL","write","name","expires","path","domain","secure","cookie","isNumber","Date","toGMTString","isString","document","match","RegExp","decodeURIComponent","remove","now","test","originURL","msie","navigator","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","window","location","requestURL","parsed","normalizedName","ignoreDuplicateOf","split","line","trim","substr","concat","callback","arr","Object","call","isFunction","obj","l","hasOwnProperty","FormData","ArrayBuffer","isView","pipe","URLSearchParams","product","result","assignValue","a","b","str","constructor","glob","opts","String","reStr","extended","globstar","inGroup","flags","len","prevChar","starCount","nextChar","EThing","globToRegExp","on","evt","resourceId","resource","arbo","get","resources","loaddfr","load","force","self","rs","splice","map","instanciate","filter","r","trigger","lastRefreshTs","refresh","update","noTrigger","removed","newResources","replaceAll","added","updated","index","found","o","_fromJson","json","hasChanged","re","list","find","f","isLoaded","state","Auth","NoAuth","BasicAuth","login","ApiKeyAuth","apikey","install","uninstall","set","options","setUrl","inherits","insertParam","apiey","_auth","isAuthenticated","reset","setApiKey","apiKey","setBasicAuth","Event","EventEngine","isPlainObject","serverUrl","pairing","toApiUrl","apiUrl","isApiUrl","extends","clsName","pop","console","warn","type","Resource","resourceConverter","opt","assign","contentType","dataType","converter","decodeJson","FileReader","fileReader","onload","fromCharCode","Uint8Array","readAsArrayBuffer","serverErr","parseErr","log","err","query","param","isId","startPairing","stopPairing","dispatch","event","resourceObj","isResourceEvent","originalEvent","plugin","Plugin","_updateFromJson","Device","_json","connected","lastSeenDate","hasBattery","battery","VERSION","returnTrue","returnFalse","src","props","timeStamp","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","preventDefault","stopPropagation","stopImmediatePropagation","event_map","events","handler","off","j","one","slice","extraParameters","File","size","mime","contentModifiedDate","getContentUrl","binary","content","p","file","catch","file_id","Flow","nodes","connections","deploy","r_id","updatedKeys","keys","isEqual","attr","defaultVal","execute","executeUrl","operationId","properties","plugins","jsondata","pluginName","modifiedDate","isTypeof","dirname","basename","extension","createdBy","types","baseType","t","createdDate","ctime","mtime","public","defaultValue","hasAttr","description","setData","s","fnmatch","pattern","parsedPattern","regexp","patternTab","settings","Table","maxLength","k","select","computeStatistics","removeRow","replaceRow","findOneAndReplace","upsert","insert","import","table_id","fields","start","sort","datefmt","docId","d","postData","invalid_field","table","skip_error","Utils","buildParams","prefix","add","parseUrl","exec","scheme","user","getParam","queryIndex","regex","results","getQueryString","removeParam","urlparts","hashIndex","pars","lastIndexOf","pad","n","width","z","sizeToString","parseInt","isNaN","Math","floor","dateToString","getTime","getHours","getMinutes","curr_year","getFullYear","curr_date","getDate","curr_month","getMonth","dateDiffToString","diffInSec","divideBy","w","class2type","hasOwn","nodeType","copy","copyIsArray","clone","target","deep","x","y","Function","valueOf","every","parent","Buffer","atob","toBase64","Blob","reader","onloadend","readAsDataURL","bytes","byteLength","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}