{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/core.js","webpack:///./src/resource.js","webpack:///./src/device.js","webpack:///./src/deferred.js","webpack:///./src/deferredObject.js","webpack:///./src/eventEngine.js","webpack:///./src/event.js","webpack:///./src/devices/mqtt.js","webpack:///./src/devices/http.js","webpack:///./src/app.js","webpack:///./src/table.js","webpack:///./src/file.js","webpack:///./src/notify.js","webpack:///./src/settings.js","webpack:///./src/error.js","webpack:///./src/extra-browser.js","webpack:///./src/ething.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Utils","buildParams","prefix","obj","add","Array","isArray","v","test","isId","length","parseUrl","url","exec","scheme","user","password","hostname","port","path","search","hash","getParam","key","queryIndex","indexOf","regex","RegExp","encodeURIComponent","results","substr","decodeURIComponent","getQueryString","removeParam","urlparts","split","hashIndex","pars","lastIndexOf","splice","join","insertParam","query","param","data","replace","pad","width","z","sizeToString","parseInt","isNaN","Math","floor","dateToString","now","Date","getTime","getHours","getMinutes","curr_year","getFullYear","curr_date","getDate","curr_month","getMonth","dateDiffToString","diffInSec","divideBy","w","cache","createCache","requestFunction","callback","state","done","class2type","toString","hasOwn","forEach","toLowerCase","type","isPlainObject","nodeType","window","constructor","e","undefined","extend","options","src","copy","copyIsArray","clone","target","arguments","deep","this","isEqual","x","y","Function","valueOf","keys","every","inherits","extended","parent","utils","Deferred","Error","Event","EventEngine","DeferredObject","EThing","XMLHttpRequest","config","apiUrl","ajaxSuccessHandlers","ajaxCompleteHandlers","ajaxErrorHandlers","ajaxSendHandlers","apiRequestPrefilterHandler","toApiUrl","auth","isApiUrl","_processAuth","ajax","deferred","xhr","method","context","contentType","headers","dataType","converter","synchronous","apiRequest","toUpperCase","isBodyRequest","body","hasData","open","requestContentType","setRequestHeader","JSON","stringify","Blob","ArrayBuffer","Buffer","reject","error","ct","getResponseHeader","responseType","response","FileReaderSync","fileReader","String","fromCharCode","apply","Uint8Array","readAsArrayBuffer","FileReader","onload","resolve","result","when","always","parse","args","status","statusText","trigger","handler","rejectWith","err","resolveWith","onerror","onabort","onprogress","notifyWith","evt","isDefaultPrevented","send","promise","getClass","str","cc","instanciate","json","cl","extends","resourceConverter","map","filter","arbo","update","resources","request","opt","slice","apiRequestPrefilter","ajaxSend","push","ajaxComplete","ajaxSuccess","ajaxError","list","find","a","b","q","Resource","id","usage","NoAuth","_resource","_scope","_authType","isAuthenticated","getApp","App","getDevice","Device","getResource","getScope","reset","setApiKey","apiKey","xhrOrUrl","setBasicAuth","login","btoa","initialize","successFn","errorFn","resource","scope","authenticatedCb_","cb","fail","authenticated","_fromJson","noTrigger","updated","_json","modifiedDate","updatedKeys","createdBy","createdDate","description","isTypeof","dirname","basename","extension","types","baseType","t","ctime","mtime","public","defaultValue","attr","hasAttr","remove","removeChildren","set","properties","unshift","setData","children","X-HTTP-Method-Override","f","pop","fnmatch","pattern","parsedPattern","regexp","patternTab","match","methods","operationId","self","binary","execute","getApi","executeUrl","location","connected","lastSeenDate","hasBattery","battery","interfaces","device","isNode","create","D","fn","doneFuncs","failFuncs","progressFuncs","resultArgs","tuples","arr","j","progress","then","fns","newDefer","tuple","returned","notify","debug","console","log","isRejected","isResolved","df","size","rp","resolvedDfr","queue","processQueue","dfr","pending","fctname","action","event_map","on","events","event","off","one","extraParameters","h","concat","isImmediatePropagationStopped","isPropagationStopped","returnTrue","returnFalse","props","timeStamp","preventDefault","stopPropagation","stopImmediatePropagation","MQTT","getSubscription","dev","subs","subscription","Http","getSpecification","spec","swaggerSpecification","iconLink","hasIcon","getContentUrl","contentModifiedDate","version","read","write","content","icon","reader","onloadend","readAsDataURL","bytes","byteLength","file_id","getIcon","Table","maxLength","expireAfter","k","select","computeStatistics","removeRow","replaceRow","findOneAndReplace","upsert","insert","import","table_id","fields","start","sort","datefmt","docId","postData","invalid_field","table","skip_error","File","mime","thumbnailLink","hasThumbnail","isText","isScript","file","subject","message","settings","__proto__","captureStackTrace","atob"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAjB,GACAY,OAAAC,eAAAb,EAAA,cAAiDkB,OAAA,KAIjDpB,EAAAqB,EAAA,SAAAlB,GACA,IAAAS,EAAAT,KAAAmB,WACA,WAA2B,OAAAnB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDxB,EAAA2B,EAAA,GAIA3B,IAAA4B,EAAA,sBClEA,IAEAC,EAFA7B,EAAA,QA6FA,SAAA8B,EAAAC,EAAAC,EAAAC,GACA,IAAAtB,EAEA,GAAAuB,MAAAC,QAAAH,GAEA,QAAA5B,KAAA4B,EAAA,CACA,IAAAI,EAAAJ,EAAA5B,GACA,QAAAiC,KAAAN,GAEAE,EAAAF,EAAAK,GAIAN,EAAAC,EAAA,sBAAAK,EAAAhC,EAAA,QAAAgC,EAAAH,QAIE,oBAAAD,EAEF,IAAArB,KAAAqB,EACAF,EAAAC,EAAA,IAAApB,EAAA,IAAAqB,EAAArB,GAAAsB,QAKAA,EAAAF,EAAAC,GAjHAH,EAAAS,KAAA,SAAAV,GACA,uBAAAA,GAAA,IAAAA,EAAAW,QAAA,oBAAAF,KAAAT,IAIAC,EAAAW,SAAA,SAAAC,GACA,IAAAtB,EAAA,gGAAAuB,KAAAD,GACA,QAAAtB,IACAwB,OAAAxB,EAAA,GACAyB,KAAAzB,EAAA,GACA0B,SAAA1B,EAAA,GACA2B,SAAA3B,EAAA,GACA4B,KAAA5B,EAAA,IACA6B,KAAA7B,EAAA,IACA8B,OAAA9B,EAAA,IACA+B,KAAA/B,EAAA,MAIAU,EAAAsB,SAAA,SAAAV,EAAAW,GACA,IAAAC,EAAAZ,EAAAa,QAAA,KACAC,EAAA,IAAAC,OAAA,SAAAC,mBAAAL,GAAA,aACAM,GAAA,IAAAL,EAAAE,EAAAb,KAAAD,EAAAkB,OAAAN,IAAA,KACA,cAAAK,EAAA,GAAAE,mBAAAF,EAAA,KAGA7B,EAAAgC,eAAA,SAAApB,EAAAW,GACA,IAAAC,EAAAZ,EAAAa,QAAA,KACAC,EAAA,IAAAC,OAAA,SAAAC,mBAAAL,GAAA,aACAM,GAAA,IAAAL,EAAAE,EAAAb,KAAAD,EAAAkB,OAAAN,IAAA,KACA,cAAAK,EAAA,GAAAE,mBAAAF,EAAA,KAGA7B,EAAAiC,YAAA,SAAArB,EAAAW,GAEA,IAAAW,EAAAtB,EAAAuB,MAAA,KACA,GAAAD,EAAAxB,QAAA,GAEA,IAAA0B,EAAAF,EAAA,GAAAT,QAAA,KACAJ,EAAA,IACA,IAAAe,IACAf,EAAAa,EAAA,GAAAJ,OAAAM,GACAF,EAAA,GAAAA,EAAA,GAAAJ,OAAA,EAAAM,IAOA,IAJA,IAAAlC,EAAA0B,mBAAAL,GAAA,IACAc,EAAAH,EAAA,GAAAC,MAAA,SAGA5D,EAAA8D,EAAA3B,OAA0BnC,KAAA,IAE1B,IAAA8D,EAAA9D,GAAA+D,YAAApC,EAAA,IACAmC,EAAAE,OAAAhE,EAAA,GAKA,OADAqC,EAAAsB,EAAA,IAAAG,EAAA3B,OAAA,MAAA2B,EAAAG,KAAA,SAAAnB,EAGA,OAAAT,GAIAZ,EAAAyC,YAAA,SAAA7B,EAAAW,EAAAhC,GAIA,IAAA6C,GAFAxB,EAAAZ,EAAAiC,YAAArB,EAAAW,IAEAE,QAAA,KACAJ,EAAA,IACA,IAAAe,IACAf,EAAAT,EAAAkB,OAAAM,GACAxB,IAAAkB,OAAA,EAAAM,IAGA,IAAAZ,EAAAZ,EAAAa,QAAA,KACAiB,EAAA,GASA,OARA,IAAAlB,IACAkB,EAAA9B,EAAAkB,OAAAN,GACAZ,IAAAkB,OAAA,EAAAN,IAGAkB,KAAAhC,OAAA,QAGAE,GAFA8B,GAAAd,mBAAAL,GAAA,IAAAK,mBAAArC,IAEA8B,GAgCArB,EAAA2C,MAAA,SAAAC,GAEA,IAAA1C,EACAH,KACAK,EAAA,SAAAmB,EAAAhC,GAEAA,EAAA,mBAAAA,MAAA,MAAAA,EAAA,GAAAA,EACAQ,IAAAW,QAAAkB,mBAAAL,GAAA,IAAAK,mBAAArC,IAKA,IAAAW,KAAA0C,EACA,OAAAA,EAAA1C,SAAA,IAAA0C,EAAA1C,IACAD,EAAAC,EAAA0C,EAAA1C,GAAAE,GAIA,OAAAL,EAAAyC,KAAA,KAAAK,QAAA,aAOA,IAAAC,EAAA9C,EAAA8C,IAAA,SAAAtD,EAAAuD,EAAAC,GAGA,OAFAA,KAAA,KACAxD,GAAA,IACAkB,QAAAqC,EAAAvD,EAAA,IAAAa,MAAA0C,EAAAvD,EAAAkB,OAAA,GACA8B,KAAAQ,GAAAxD,GAIAQ,EAAAiD,aAAA,SAAAlD,GAEA,GADAA,EAAAmD,SAAAnD,GACAoD,MAAApD,GAAA,UAUA,OARAA,EAAA,IACAA,EAAAqD,KAAAC,MAAAtD,EAAA,mBACAA,EAAA,IACAA,EAAAqD,KAAAC,MAAAtD,EAAA,mBACAA,EAAA,IACAA,EAAAqD,KAAAC,MAAAtD,EAAA,mBAEAA,GAAA,KACAA,GAGAC,EAAAsD,aAAA,SAAAzE,GACA,IAAA0E,EAAA,IAAAC,KAMA,GAJA,iBAAA3E,IACAA,EAAA,IAAA2E,KAAA,IAAA3E,IAGAA,EAEA,IAAA0E,EAAAE,UAAA5E,EAAA4E,UAAA,MAEA,OAAAX,EAAAjE,EAAA6E,WAAA,OAAAZ,EAAAjE,EAAA8E,aAAA,GAGA,IAAAC,EAAA/E,EAAAgF,cACAC,EAAAjF,EAAAkF,UACAC,EAAAnF,EAAAoF,WAEA,OAAAL,GAAAL,EAAAM,cAKAC,EAAA,IAHA,IAAAzD,MAAA,kBACA,oCACA,mBACA2D,GAAA,IAIAJ,EAAA,IAAAd,EAAAkB,EAAA,SAAAlB,EAAAgB,EAAA,GAnBA,WAwBA9D,EAAAkE,iBAAA,SAAAC,GAEA,GADAA,EAAAjB,SAAAiB,GACAhB,MAAAgB,GAAA,UAEA,IAQA5D,EARA6D,EACA,OADAA,EAEA,MAFAA,EAGA,KAHAA,EAIA,GAEAC,EAAA,EACAtE,EAAA,GAoCA,OAlCAQ,EAAA6C,KAAAC,MAAAc,EAAAC,KACA,GAAAC,EAAA,IACAtE,GAAAqD,KAAAC,MAAA9C,GAAA,SAAAA,EAAA,UACA4D,GAAA5D,EAAA6D,EACAC,MAEA9D,EAAA6C,KAAAC,MAAAc,EAAAC,KACA,GAAAC,EAAA,IACAA,IAAAtE,GAAA,KACAA,GAAAqD,KAAAC,MAAA9C,GAAA,QAAAA,EAAA,UACA4D,GAAA5D,EAAA6D,EACAC,MAEA9D,EAAA6C,KAAAC,MAAAc,EAAAC,KACA,GAAAC,EAAA,IACAA,IAAAtE,GAAA,KACAA,GAAAqD,KAAAC,MAAA9C,GAAA,SAAAA,EAAA,UACA4D,GAAA5D,EAAA6D,EACAC,MAEA9D,EAAA6C,KAAAC,MAAAc,EAAAC,KACA,GAAAC,EAAA,IACAA,IAAAtE,GAAA,KACAA,GAAAqD,KAAAC,MAAA9C,GAAA,WAAAA,EAAA,UACA4D,GAAA5D,EAAA6D,EACAC,MAEA9D,EAAA4D,IACA,GAAAE,EAAA,IACAA,IAAAtE,GAAA,KACAA,GAAAqD,KAAAC,MAAA9C,GAAA,YAAAA,EAAA,UACA8D,KAGAtE,GAIA,IAAAuE,KAEAtE,EAAAuE,YAAA,SAAAC,GACA,gBAAAjD,EAAAkD,GAIA,QAHAH,EAAA/C,IAAA,mBAAA+C,EAAA/C,GAAAmD,OAAA,aAAAJ,EAAA/C,GAAAmD,WACAJ,EAAA/C,GAAAiD,EAAAjD,IAEA+C,EAAA/C,GAAAoD,KAAAF,KAWA,IAAAG,KACAC,EAAAD,EAAAC,SACAC,EAAAF,EAAA/E,eAGA,uEAAAsC,MAAA,KAAA4C,QAAA,SAAAjG,GACA8F,EAAA,WAAA9F,EAAA,KAAAA,EAAAkG,gBAIAhF,EAAAiF,KAAA,SAAA9E,GACA,aAAAA,EACAA,EAAA,GAIA,iBAAAA,GAAA,mBAAAA,EACAyE,EAAAC,EAAAnG,KAAAyB,KAAA,gBACAA,GAGAH,EAAAkF,cAAA,SAAA/E,GACA,IAAAoB,EAMA,cAAAvB,EAAAiF,KAAA9E,MAAAgF,UAAA,MAAAhF,SAAAiF,OACA,SAGA,IAEA,GAAAjF,EAAAkF,cACAP,EAAApG,KAAAyB,EAAA,iBACA2E,EAAApG,KAAAyB,EAAAkF,YAAAzF,cAAiD,iBACjD,SAEE,MAAA0F,GAEF,SAKA,IAAA/D,KAAApB,GAEA,YAAAoF,IAAAhE,GAAAuD,EAAApG,KAAAyB,EAAAoB,IAGAvB,EAAAwF,OAAA,WACA,IAAAC,EAAA3G,EAAA4G,EAAAC,EAAAC,EAAAC,EACAC,EAAAC,UAAA,OACAxH,EAAA,EACAmC,EAAAqF,UAAArF,OACAsF,GAAA,EAoBA,IAjBA,kBAAAF,IACAE,EAAAF,EACAA,EAAAC,UAAA,OAEAxH,EAAA,GAIA,iBAAAuH,GAAA,mBAAAA,IACAA,MAGApF,IAAAnC,IACAuH,EAAAG,OACA1H,GAGQA,EAAAmC,EAAYnC,IAEpB,UAAAkH,EAAAM,UAAAxH,IAEA,IAAAO,KAAA2G,EACAC,EAAAI,EAAAhH,GAIAgH,KAHAH,EAAAF,EAAA3G,MAQAkH,GAAAL,IAAA3F,EAAAkF,cAAAS,KAAAC,EAAAvF,MAAAC,QAAAqF,MACAC,GACAA,GAAA,EACAC,EAAAH,GAAArF,MAAAC,QAAAoF,SAGAG,EAAAH,GAAA1F,EAAAkF,cAAAQ,QAIAI,EAAAhH,GAAAkB,EAAAwF,OAAAQ,EAAAH,EAAAF,SAGKJ,IAAAI,IACLG,EAAAhH,GAAA6G,IAMA,OAAAG,GAGA9F,EAAAkG,QAAA,SAAAC,EAAAC,GACA,aAEA,UAAAD,QAAAZ,IAAAY,GAAA,OAAAC,QAAAb,IAAAa,EAAsE,OAAAD,IAAAC,EAEtE,GAAAD,EAAAd,cAAAe,EAAAf,YAAuC,SAEvC,GAAAc,aAAAE,SAA6B,OAAAF,IAAAC,EAE7B,GAAAD,aAAAxE,OAA2B,OAAAwE,IAAAC,EAC3B,GAAAD,IAAAC,GAAAD,EAAAG,YAAAF,EAAAE,UAA8C,SAC9C,GAAAjG,MAAAC,QAAA6F,MAAAzF,SAAA0F,EAAA1F,OAAiD,SAGjD,GAAAyF,aAAA3C,KAAyB,SAGzB,KAAA2C,aAAAlH,QAA8B,SAC9B,KAAAmH,aAAAnH,QAA8B,SAG9B,IAAAa,EAAAb,OAAAsH,KAAAJ,GACA,OAAAlH,OAAAsH,KAAAH,GAAAI,MAAA,SAAAjI,GAA2C,WAAAuB,EAAA2B,QAAAlD,MAC3CuB,EAAA0G,MAAA,SAAAjI,GAAwB,OAAAyB,EAAAkG,QAAAC,EAAA5H,GAAA6H,EAAA7H,OAIxByB,EAAAyG,SAAA,SAAAC,EAAAC,GACAD,EAAA9G,UAAA,IAAA+G,EACAD,EAAA9G,UAAAyF,YAAAqB,GAIApI,EAAAD,QAAA2B,mBChaA,IAAA4G,EAAAzI,EAAA,GACA0I,EAAA1I,EAAA,GACA2I,EAAA3I,EAAA,IACA4I,EAAA5I,EAAA,GACA6I,EAAA7I,EAAA,GACA8I,EAAA9I,EAAA,GAOA+I,KAGA1B,EAAAoB,EAAApB,OACAN,EAAA0B,EAAA1B,cAEAiC,EAAAP,EAAAO,eAGAD,EAAAH,QACAG,EAAAJ,QAEAI,EAAAN,QACAM,EAAAN,MAAAC,WAEAK,EAAAD,iBAEAC,EAAAE,QACAC,OAAA,6BAIA,IAAAC,KACAC,KACAC,KACAC,KACAC,EAAA,KAqEAV,EAAAE,GAMAA,EAAAS,SAAA,SAAA/G,EAAAgH,GAgBA,MAbA,kBAAApH,KAFAI,KAAA,OAIA,MAAAJ,KAAAI,QACAA,EAAA,IAAAA,GAEAA,EAAAsG,EAAAE,OAAAC,OAAAzG,GAGAgH,GAAAC,EAAAjH,KACAA,EAAAkH,EAAAlH,GACA,mBAAA8G,IACA9G,EAAA8G,EAAA9G,KAEAA,GAIA,IAAAiH,EAAA,SAAAjH,GACA,WAAAe,OAAA,gBAAAuF,EAAAE,OAAAC,OAAAxE,QAAA,uBAAArC,KAAAI,IAKAsG,EAAAG,OAAA,WACA,OAAAH,EAAAS,YAKA,IAAAI,EAAA,SAAAtC,GACA,IAAAuC,EAAA,IAAAnB,EACAoB,EAAA,IAAAd,EAoBA,GAlBA,iBAAA1B,IACAA,GACA7E,IAAA6E,IAgBA,iBAbAA,EAAAD,GACA0C,OAAA,MACAC,QAAA,KACAvH,IAAA,KACAgC,KAAA,KACAwF,YAAA,KACAC,QAAA,KACAC,SAAA,KACAC,UAAA,KACAC,aAAA,GACE/C,IAGF7E,IACA,YAEA,IAAAA,EAAAsG,EAAAS,SAAAlC,EAAA7E,KACA6H,EAAAZ,EAAAjH,GAGA6E,EAAAyC,OAAAzC,EAAAyC,OAAAQ,cAEA,IAAAP,EAAA1C,EAAA0C,SAAAjB,EAEAyB,GAAA,iBAAAnI,KAAAiF,EAAAyC,QACAU,OAAArD,EACAsD,OAAA,IAAApD,EAAA7C,MAAA,OAAA6C,EAAA7C,MAKA+F,GAAAE,IAEAjI,IAAA,KAAAJ,KAAAI,GAAA,2BAAA6E,EAAA7C,KAAA6C,EAAA7C,KAAAgE,EAAAjE,MAAA8C,EAAA7C,QAIAqF,EAAAa,KAAArD,EAAAyC,OAAAtH,GAAA6E,EAAA+C,aAIA,IAAAO,EAAA,KACA,GAAA7D,EAAAO,EAAA4C,SACA,QAAA9J,KAAAkH,EAAA4C,QACA5C,EAAA4C,QAAAxI,eAAAtB,KACA,kBAAAiC,KAAAjC,KACAwK,EAAAtD,EAAA4C,QAAA9J,IAEA0J,EAAAe,iBAAAzK,EAAAkH,EAAA4C,QAAA9J,MAMAwK,GAAAtD,EAAA2C,aACAH,EAAAe,iBAAA,eAAAD,EAAAtD,EAAA2C,aAEAO,GAAAE,IAEAE,GAEAH,EAAAnD,EAAA7C,MAEAsC,EAAAO,EAAA7C,OAAAvC,MAAAC,QAAAmF,EAAA7C,SAEA,QAAApC,KAAAuI,GACAH,EAAAK,KAAAC,UAAAzD,EAAA7C,MACA,sCAAApC,KAAAuI,KACAH,EAAAhC,EAAAjE,MAAA8C,EAAA7C,SAKA6C,EAAA7C,gBAAAuG,MACAlB,EAAAe,iBAAA,eAAAD,EAAAtD,EAAA7C,KAAAqC,MACA2D,EAAAnD,EAAA7C,MACI6C,EAAA7C,gBAAAwG,aAAA3D,EAAA7C,gBAAAgE,EAAAyC,QACJpB,EAAAe,iBAAA,eAAAD,EAAA,4BACAH,EAAAnD,EAAA7C,OAEAqF,EAAAe,iBAAA,eAAAD,EAAA,oDACAH,EAAA,iBAAAnD,EAAA7C,KAAA6C,EAAA7C,KAAAgE,EAAAjE,MAAA8C,EAAA7C,QASA6F,IACAR,EAAAH,EAAAG,GACA,mBAAAP,IACAO,EAAAP,EAAAO,KAIA,IAAAK,EAAA7C,EAAA6C,SAGA,SAAAgB,EAAAC,GAEA,IAAAC,EAAAvB,EAAAwB,kBAAA,oBACA7G,EAAA,KAEA,YAAA2G,EACA3G,EAAA2G,OAEA,UAAA/I,KAAAgJ,IAAA,cAAAhJ,KAAAgJ,GAGA,OAAAvB,EAAAyB,cAEA,OACA,WACA,WACA9G,EAAAqF,EAAA0B,SACA,MACA,WAEA,GAAAlE,EAAA+C,YAAA,CAEA,IAAA5B,EAAAgD,eACA,UAAA9C,EAAA,iCAGA,IAAA+C,EAAA,IAAAjD,EAAAgD,eACAhH,EAAAkH,OAAAC,aAAAC,MAAA,SAAAC,WAAAJ,EAAAK,kBAAAjC,EAAA0B,gBACM,CAGN,GAFA/G,EAAAiE,KAEAD,EAAAuD,WACA,UAAArD,EAAA,kCAGA+C,EAAA,IAAAjD,EAAAuD,YACAC,OAAA,WACAxH,EAAAyH,QAAAP,OAAAC,aAAAC,MAAA,SAAAC,WAAAhE,KAAAqE,WAEAT,EAAAK,kBAAAjC,EAAA0B,UAGA,MACA,kBACA/G,EAAAkH,OAAAC,aAAAC,MAAA,SAAAC,WAAAhC,EAAA0B,WACA,MACA,aACA/G,EAAAqF,EAAA0B,SAAA9E,SAAA,QACA,MACA,QACA,UAAAiC,EAAAmB,EAAAyB,aAAA,iCAMA7C,EAAA0D,KAAA3H,GAAA4H,OAAA,SAAA5H,GAEA,IACAA,EAAAqG,KAAAwB,MAAA7H,GACI,MAAA0C,IAEJ,IACAoF,GADA,IAAA5D,EAAAlE,IAAAqF,EAAA0C,OAAA1C,EAAA0C,OAAA,KAAA1C,EAAA2C,WAAA,sBACA3C,EAAAxC,GAEAyB,EAAA2D,QAAA,uBAAAH,GACAlD,EAAAzC,QAAA,SAAA+F,GACAA,EAAAd,MAAA7B,EAAAuC,KAEAxD,EAAA2D,QAAA,0BAAAH,GACAnD,EAAAxC,QAAA,SAAA+F,GACAA,EAAAd,MAAA7B,EAAAuC,KAEA1C,EAAA+C,WAAA5C,EAAAuC,KA3EApC,GAAA,QAAAA,IAAAL,EAAAyB,aAAApB,GAiGAL,EAAAmC,OAAA,WAEA,GADAnC,EAAA0C,QAAA,KAAA1C,EAAA0C,OAAA,WAAA1C,EAAA0C,OACA,CAEA,IAAA/H,EAAAqF,EAAA0B,SAEA,WAAArB,GACA,UAAA9H,KAAAyH,EAAAwB,kBAAA,qBACA,IACA7G,EAAAqG,KAAAwB,MAAA7H,GACM,MAAAoI,UAEF,WAAA1C,GAAA,iBAAA1F,EACJ,IACAA,EAAAqG,KAAAwB,MAAA7H,GACK,MAAAoI,IAGL,mBAAAvF,EAAA8C,YACA3F,EAAA6C,EAAA8C,UAAA7J,KAAAyJ,EAAAvF,EAAAqF,EAAAxC,IAlCA,SAAA7C,GACA,IAAA8H,GAAA9H,EAAAqF,EAAAxC,GAEAyB,EAAA2D,QAAA,yBAAAH,GACApD,EAAAvC,QAAA,SAAA+F,GACAA,EAAAd,MAAA7B,EAAAuC,KAEAxD,EAAA2D,QAAA,0BAAAH,GACAnD,EAAAxC,QAAA,SAAA+F,GACAA,EAAAd,MAAA7B,EAAAuC,KAEA1C,EAAAiD,YAAA9C,EAAAuC,GA0BAL,CAAAzH,QAGA0G,KAEArB,EAAAiD,QAAA,SAAAF,GAA2B1B,EAAA0B,IAC3B/C,EAAAkD,QAAA,WAAwB7B,KACxBrB,EAAAmD,WAAA,SAAA9F,GACA0C,EAAAqD,WAAAlD,GAAA7C,EAAA2C,EAAAxC,KAGA,IAAA6F,EAAAvE,EAAA,uBAgBA,OAfAG,EAAA2D,QAAAS,GAAArD,EAAAxC,IAEA6F,EAAAC,qBACAjC,EAAA,YAIA7B,EAAA1C,QAAA,SAAA+F,GACAA,EAAApM,KAAAyJ,EAAAF,KAGAA,EAAAuD,KAAA5C,IAIAZ,EAAAyD,WAWA,IAAAC,EAAAxE,EAAAwE,SAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAxJ,MAAA,SACA,GAAAyJ,EAAAlL,OAAA,YAAAwG,EAAA0E,EAAA,IACA,OAAA1E,EAAA0E,EAAA,KAKA1E,EAAA2E,YAAA,SAAAC,GACA,IAAAC,EAAAL,EAAAI,EAAA7G,MAKA,OAJA8G,GACAD,EAAAE,QAAAvK,QAAA,eACAsK,EAAAL,EAAA,aAEAK,GAAA,MAAAD,IAQA5E,EAAA+E,kBAAA,SAAArJ,GAEA,oBAAAA,GAAA,OAAAA,EAAA,CAEA,IAAAtC,EAAAD,MAAAC,QAAAsC,GACAtC,IAAAsC,OAGAA,IAAAsJ,IAAA,SAAA5M,GACA,OAAA4H,EAAA2E,YAAAvM,KACG6M,OAAA,SAAA7M,GACH,OAAAA,IAMA4H,EAAAkF,OACAxJ,EAAAsE,EAAAkF,KAAAC,OAAAzJ,GAAA0J,WAEAhM,IAAAsC,IAAAlC,OAAAkC,EAAA,SAGA,OAAAA,GA6DAsE,EAAAqF,QAAA,SAAAC,EAAA/H,GACA,IAAA5F,EAAAkJ,EAAAyE,GASA,GAPA,mBAAA/H,GACA5F,EAAA2L,OAAA,WACA/F,EAAAuF,MAAA/D,KAAA5F,MAAAT,UAAA6M,MAAA/N,KAAAqH,cAKAyG,EAAAhE,YAAA,CACA,IAAA8B,EAAA,KAIA,OAHAzL,EAAA2L,OAAA,SAAAlL,GACAgL,EAAAhL,IAEAgL,EAEA,OAAAzL,GAQAqI,EAAAwF,oBAAA,SAAA5B,GACApD,EAAAoD,GAQA5D,EAAAyF,SAAA,SAAA7B,GACA,mBAAAA,GACArD,EAAAmF,KAAA9B,IASA5D,EAAA2F,aAAA,SAAA/B,GACA,mBAAAA,GACAvD,EAAAqF,KAAA9B,IASA5D,EAAA4F,YAAA,SAAAhC,GACA,mBAAAA,GACAxD,EAAAsF,KAAA9B,IASA5D,EAAA6F,UAAA,SAAAjC,GACA,mBAAAA,GACAtD,EAAAoF,KAAA9B,IA0BA5D,EAAA8F,KAAA9F,EAAA+F,KAAA,SAAAC,EAAAC,GAEA,IAAAzK,EAAA,KAAA+B,EAAA,KAaA,OAXA,GAAAsB,UAAArF,OACA,mBAAAqF,UAAA,GACAtB,EAAAsB,UAAA,GAEArD,EAAAqD,UAAA,GAEAA,UAAArF,QAAA,IACAgC,EAAAqD,UAAA,GACAtB,EAAAsB,UAAA,IAGAmB,EAAAqF,SACA3L,IAAA,cAAAgG,EAAAjE,OAAsCyK,EAAA1K,IACtCwF,OAAA,MACAI,SAAA,OACAC,UAAArB,EAAA+E,mBACExH,IAiBFyC,EAAA7H,IAAA,SAAA6N,EAAAC,GAEA,IAAAhF,EACA,GAAA+E,aAAAhG,EAAAmG,SACAlF,EAAA+E,EACAA,IAAAI,UAEA,IAAA1G,EAAAnG,KAAAyM,GACA,oEAAAA,EAIA,IAAAzI,EAAA0I,EAEA,OAAAjG,EAAAqF,SACA3L,IAAA,cAAAsM,EACA5E,SAAA,OACAJ,OAAA,MACAC,UACAI,UAAArB,EAAA+E,mBACExH,IAkBFyC,EAAAqG,MAAA,SAAAL,GAEA,IAAAzI,EAAAyI,EAEA,OAAAhG,EAAAqF,SACA3L,IAAA,SACA0H,SAAA,OACAJ,OAAA,OACEzD,IAeF,IAAA+I,EAAA,SAAAN,GAAyB,OAAAA,GAIzBO,EAAA,KACAC,EAAA,KACAC,EAAA,KACA7F,EAAA0F,EAQAtG,EAAAU,QASAV,EAAAU,KAAAgG,gBAAA,WACA,QAAAD,GAQAzG,EAAAU,KAAAiG,OAAA,WACA,OAAAJ,aAAAvG,EAAA4G,IAAAL,EAAA,MAQAvG,EAAAU,KAAAmG,UAAA,WACA,OAAAN,aAAAvG,EAAA8G,OAAAP,EAAA,MAQAvG,EAAAU,KAAAqG,YAAA,WACA,OAAAR,GAQAvG,EAAAU,KAAAsG,SAAA,WACA,OAAAR,GASAxG,EAAAU,KAAAuG,MAAA,WACAV,EAAA,KACAE,EAAA,KACAD,EAAA,KACA5F,EAAA0F,GAMAtG,EAAAU,KAAAwG,UAAA,SAAAC,GAEAnH,EAAAU,KAAAuG,QAEArG,EAAA,SAAAwG,GAOA,MALA,iBAAAA,EACAA,EAAApH,EAAAN,MAAAnE,YAAA6L,EAAA,UAAAD,GAEAC,EAAAtF,iBAAA,YAAAqF,GAEAC,IAKApH,EAAAU,KAAA2G,aAAA,SAAAC,EAAAxN,GAEAkG,EAAAU,KAAAuG,QAEArG,EAAA,SAAAwG,GAOA,MALA,iBAAAA,EACAA,IAAAzL,QAAA,2BAAA2L,EAAA,IAAAxN,EAAA,KAEAsN,EAAAtF,iBAAA,yBAAApC,EAAA6H,KAAAD,EAAA,IAAAxN,IAEAsN,IAiCApH,EAAAwH,WAAA,SAAAjJ,EAAAkJ,EAAAC,GAsBA,OApBA1H,EAAAU,KAAAuG,SAEA1I,EAAAD,GACA6B,OAAA,KAEAgH,OAAA,KAEAG,MAAA,SACAxN,SAAA,MACEyE,QAEF4B,SACAH,EAAAE,OAAAC,OAAA5B,EAAA4B,QAGA5B,EAAA4I,OACAnH,EAAAU,KAAAwG,UAAA3I,EAAA4I,QACA5I,EAAA+I,OAAA/I,EAAAzE,UACAkG,EAAAU,KAAA2G,aAAA9I,EAAA+I,MAAA/I,EAAAzE,UAEAkG,EAAAqF,SACA3L,IAAA,QACA0H,SAAA,OACAH,QAAAjB,EACAqB,UAAA,SAAA3F,GACA+K,EAAA/K,EAAAqC,KACArC,EAAAiM,WACApB,EAAAvG,EAAA2E,YAAAjJ,EAAAiM,WACAjM,EAAAkM,QACApB,EAAA9K,EAAAkM,UAEEnK,KAAA,WAEFoK,EAAAhK,QAAA,SAAAiK,GACAA,EAAAtQ,KAAAwI,KAGAA,EAAA2D,QAAA,0BACElG,KAAAgK,GAAAM,KAAAL,IAYF,IAAAG,KACA7H,EAAAgI,cAAA,SAAAzK,GAEA,mBAAAA,IACAsK,EAAAnC,KAAAnI,GAEAyC,EAAAU,KAAAgG,mBACAnJ,EAAA/F,KAAAwI,KAKA5I,EAAAD,QAAA6I,mBCh5BA,IAAAN,EAAAzI,EAAA,GACA6I,EAAA7I,EAAA,GACA8I,EAAA9I,EAAA,GACA+I,EAAA/I,EAAA,GAUAkP,EAAA,SAAAvB,GAEA7E,EAAAvI,KAAAuH,MAEAe,EAAAf,MAEAA,KAAAkJ,UAAArD,GAAA,IAEAlF,EAAAH,SAAA4G,EAAApG,GAGAoG,EAAAzN,UAAAuP,UAAA,SAAArD,EAAAsD,GAEA,IAAAC,EAAApJ,KAAAqJ,OAAAxD,GAAA7F,KAAAqJ,MAAAC,cAAAzD,EAAAyD,cAAAtJ,KAAAqJ,MAAAC,eAAAzD,EAAAyD,aACAC,KA8BA,OA5BA1D,EAAAlF,EAAApB,QACA1G,KAAA,KACAwO,GAAA,KACArI,KAAA,KACAwK,UAAA,KACAC,YAAA,EACAH,aAAA,EACA3M,KAAA,KACA+M,YAAA,MACE7D,QAEFsD,GAAAC,GAEApQ,OAAAsH,KAAAuF,GAAA/G,QAAA,SAAAxD,QACA,IAAA0E,KAAAqJ,MAAA/N,IAAAqF,EAAAV,QAAA4F,EAAAvK,GAAA0E,KAAAqJ,MAAA/N,KACAiO,EAAA5C,KAAArL,IAEG0E,MAGHA,KAAAqJ,MAAAxD,GAEAsD,GAAAC,IAEApJ,KAAA4E,QAAA,WAAA2E,IACAtI,EAAA2D,QAAA,2BAAA5E,KAAAuJ,KAGAH,GAUAhC,EAAAzN,UAAAkM,KAAA,WACA,OAAA7F,KAAAqJ,OAUAjC,EAAAzN,UAAAgQ,SAAA,SAAA3K,GACA,WAAAgB,KAAAqJ,MAAAtD,QAAAvK,QAAAwD,IAYAoI,EAAAzN,UAAAd,KAAA,WACA,OAAAmH,KAAAqJ,MAAAxQ,MAQAuO,EAAAzN,UAAAiQ,QAAA,WACA,OAAA3I,EAAAmG,SAAAwC,QAAA5J,KAAAqJ,MAAAxQ,OAQAuO,EAAAzN,UAAAkQ,SAAA,WACA,OAAA5I,EAAAmG,SAAAyC,SAAA7J,KAAAqJ,MAAAxQ,OAQAuO,EAAAzN,UAAAmQ,UAAA,WACA,OAAA7I,EAAAmG,SAAA0C,UAAA9J,KAAAqJ,MAAAxQ,OAQAuO,EAAAzN,UAAA0N,GAAA,WACA,OAAArH,KAAAqJ,MAAAhC,IAQAD,EAAAzN,UAAA6P,UAAA,WACA,OAAAxJ,KAAAqJ,MAAAG,WAaApC,EAAAzN,UAAAqF,KAAA,WACA,OAAAgB,KAAAqJ,MAAArK,MASAoI,EAAAzN,UAAAoQ,MAAA,WACA,OAAA/J,KAAAqJ,MAAAtD,aAaAqB,EAAAzN,UAAAqQ,SAAA,WAEA,OADAC,EAAAjK,KAAA+J,QACAE,IAAAxP,OAAA,IASA2M,EAAAzN,UAAA8P,YAAA,WACA,WAAAlM,KAAAyC,KAAAqJ,MAAAI,cAEArC,EAAAzN,UAAAuQ,MAAA,WACA,OAAAlK,KAAAyJ,eASArC,EAAAzN,UAAA2P,aAAA,WACA,WAAA/L,KAAAyC,KAAAqJ,MAAAC,eAEAlC,EAAAzN,UAAAwQ,MAAA,WACA,OAAAnK,KAAAsJ,gBASAlC,EAAAzN,UAAAyQ,OAAA,WACA,OAAApK,KAAAqJ,MAAAe,SAAA,GAWAhD,EAAAzN,UAAAgD,KAAA,SAAA9D,EAAAwR,GACA,gBAAAxR,EACAmH,KAAAqJ,MAAA1M,KAEAqD,KAAAqJ,MAAA1M,KAAA/C,eAAAf,GAAAmH,KAAAqJ,MAAA1M,KAAA9D,GAAAwR,GAWAjD,EAAAzN,UAAA2Q,KAAA,SAAAzR,GACA,gBAAAA,EACAmH,KAAAqJ,MAEArJ,KAAAqJ,MAAAzP,eAAAf,GAAAmH,KAAAqJ,MAAAxQ,GAAA,MAWAuO,EAAAzN,UAAA4Q,QAAA,SAAA1R,GACA,OAAAmH,KAAAqJ,MAAAzP,eAAAf,IASAuO,EAAAzN,UAAA+P,YAAA,WACA,OAAA1J,KAAAqJ,MAAAK,aAAA,IAiBAtC,EAAAzN,UAAA6Q,OAAA,SAAAC,EAAAjM,GACA,OAAAwB,KAAA+B,SAAA,WACA,OAAAqF,EAAAoD,OAAAxK,KAAAxB,MAIA4I,EAAAzN,UAAAyM,OAAA,SAAA5H,GACA,OAAAwB,KAAA+B,SAAA,WACA,OAAAd,EAAA7H,IAAA4G,KAAAxB,MAkBA4I,EAAAzN,UAAA+Q,IAAA,SAAAC,EAAAnM,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAoH,EAAAsD,IAAA3G,MAAA9C,EAAAwD,MAsBA2C,EAAAzN,UAAAkR,QAAA,SAAAlO,EAAA6B,GAEA,oBAAA7B,GAAA,mBAAA6B,EAAA,CACA,IAAAlD,EAAAqB,EAAArD,EAAAkF,IAAAsB,UAAA,IACAnD,MACArB,GAAAhC,EAGA,OAAA0G,KAAA0K,KAAkB/N,QAAY6B,IAa9B4I,EAAAoD,OAAA,SAAAvD,EAAAwD,EAAAjM,GAEA,IAAA0D,EACA,GAAA+E,aAAAG,EACAlF,EAAA+E,EACAA,IAAAI,UAEA,IAAA1G,EAAAnG,KAAAyM,GACA,oEAAAA,EASA,OALA,GAAAnH,UAAArF,QAAA,mBAAAgQ,IACAjM,EAAAiM,EACAA,GAAA,GAGAxJ,EAAAqF,SACA3L,IAAA,cAAAsM,EAAA,IAAAtG,EAAAjE,OAAgDoO,SAAAL,IAChDxI,OAAA,SACAC,WACE1D,GAAAE,KAAA,WACFuC,EAAA2D,QAAA,2BAAAqC,OASAG,EAAAsD,IAAA,SAAAzD,EAAAC,EAAAvO,GACA,IAAAuJ,EAEA,IAAAvB,EAAA1B,cAAAiI,OACA,kDAIA,GAAAD,aAAAG,EACAlF,EAAA+E,EACAA,IAAAI,UAEA,IAAA1G,EAAAnG,KAAAyM,GACA,oEAAAA,EAIA,IAAAzI,EAAA7F,EAEA,OAAAsI,EAAAqF,SACA3L,IAAA,cAAAsM,EACA5E,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAuK,EACAhF,UACAE,SACA2I,yBAAA,SAEAzI,UAAArB,EAAA+E,mBACExH,IAYF4I,EAAAwC,QAAA,SAAAoB,GACA,IAAAlR,EAAAkR,EAAApO,QAAA,mBACA,OAAA9C,IAAAkR,EAAA,GAAAlR,GAEAsN,EAAAyC,SAAA,SAAAmB,GACA,OAAAA,EAAApO,QAAA,YAEAwK,EAAA0C,UAAA,SAAAkB,GACA,OAAAA,EAAAxP,QAAA,QAAAwP,EAAA9O,MAAA,KAAA+O,MAAA,IAEA7D,EAAA8D,QAAA,SAAAC,EAAAjQ,GAKA,IAHA,IACAkQ,EAAAC,EADAC,EAAAH,EAAAjP,MAAA,KAGA5D,EAAA,EAAaA,EAAAgT,EAAA7Q,OAAqBnC,IAClC,OAAAgT,EAAAhT,KAOA8S,EAAA,KALAA,EAAA,IAAAE,EAAAhT,GAAAsE,QAAA,aACAA,QAAA,yBACAA,QAAA,iBACAA,QAAA,0BAEA,IAEAyO,EAAA,IAAA3P,OAAA0P,GACA,MAAAlQ,EAAAqQ,MAAAF,IAAA,SAEA,UAIApK,EAAAmG,WAEA/O,EAAAD,QAAAgP,mBC9cA,IAAAnG,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACAkP,EAAAlP,EAAA,GAOA6P,EAAA,SAAAlC,GAEAuB,EAAA3O,KAAAuH,KAAA6F,IAEA7F,KAAAqJ,MAAAmC,aAAA1M,QAAA,SAAA2M,GACA,YAAAzL,KAAAyL,GAAA,CACA,IAAAC,EAAA1L,KAEAA,KAAAyL,GAAA,SAAA9O,EAAAgP,EAAAnN,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAGA,OAFA0C,EAAAmG,QAAAa,GACAhH,EAAAmG,QAAA5K,MACA+H,EAAA6D,QAAA7H,MAAA9C,EAAAwD,MAIAzE,KAAAyL,GAAAI,OAAA,SAAArN,GACA,OAAAuJ,EAAA8D,OAAAH,EAAAD,EAAAjN,IAGAwB,KAAAyL,GAAAK,WAAA,SAAAnP,GACA,OAAA+O,EAAAI,WAAAL,EAAA9O,MAGEqD,OAEFW,EAAAH,SAAAuH,EAAAX,GASAW,EAAApO,UAAAoS,SAAA,WACA,OAAA/L,KAAAqJ,MAAA0C,UAAA,MASAhE,EAAApO,UAAAqS,UAAA,WACA,QAAAhM,KAAAqJ,MAAA2C,WASAjE,EAAApO,UAAAsS,aAAA,WACA,uBAAAjM,KAAAqJ,MAAA4C,aAAA,IAAA1O,KAAAyC,KAAAqJ,MAAA4C,cAAA,MASAlE,EAAApO,UAAAuS,WAAA,WACA,uBAAAlM,KAAAqJ,MAAA8C,SAAAnM,KAAAqJ,MAAA8C,SAAA,GASApE,EAAApO,UAAAwS,QAAA,WACA,OAAAnM,KAAAkM,aAAAlM,KAAAqJ,MAAA8C,QAAA,MASApE,EAAApO,UAAA6R,QAAA,WACA,OAAAxL,KAAAqJ,MAAAmC,aASAzD,EAAApO,UAAAyS,WAAA,WACA,OAAApM,KAAAqJ,MAAA+C,gBAqCArE,EAAApO,UAAAiS,QAAA,WACA,IAAAnH,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACA+H,EAAA6D,QAAA7H,MAAA9C,EAAAwD,MAkBAsD,EAAApO,UAAAmS,WAAA,SAAAL,EAAA9O,GACA,IAAAhC,EAAA,WAAAqF,KAAAqH,KAAA,SAAAoE,EAMA,OAJAxM,cAAAtC,IAAA,IAAA3D,OAAAsH,KAAA3D,GAAAlC,SACAE,GAAA,IAAAgG,EAAAjE,MAAAC,IAGAsE,EAAAS,SAAA/G,GAAA,IAYAoN,EAAApO,UAAAkS,OAAA,SAAAJ,EAAAjN,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACA+H,EAAA8D,OAAA9H,MAAA9C,EAAAwD,MAWAsD,EAAA6D,QAAA,SAAAS,EAAAZ,EAAA9O,EAAAgP,EAAAnN,GAEA,IAAA0D,EAEA,GAAAmK,aAAAtE,EACA7F,EAAAmK,EACAA,IAAAhF,SAEA,KAAA1G,EAAAnG,KAAA6R,GAGA,+DAFAA,IAsBA,OAhBA,GAAAvM,UAAArF,OAEA,mBAAAkR,IACAnN,EAAAmN,EACAA,OAAArM,GAGE,GAAAQ,UAAArF,QAEF,mBAAAkC,IACA6B,EAAA7B,EACAA,OAAA2C,GAKA2B,EAAAqF,SACA3L,IAAA,YAAA0R,EAAA,SAAAZ,EACAxJ,OAAA,OACAE,YAAA,kCACAxF,UAAA,IAAAA,GAAA,OAAAA,EAAAqG,KAAAC,UAAAtG,QAAA2C,EACA+C,SAAAsJ,EAAAhL,EAAA2L,OAAA,uBACApK,WACE1D,IAQFuJ,EAAA8D,OAAA,SAAAQ,EAAAZ,EAAAjN,GAEA,IAAA0D,EAOA,GALA,mBAAAuJ,QAAA,IAAAjN,IACAA,EAAAiN,EACAA,OAAAnM,GAGA+M,aAAAtE,EACA7F,EAAAmK,EACAA,IAAAhF,SAEA,KAAA1G,EAAAnG,KAAA6R,GAGA,+DAFAA,IAMA,OAAApL,EAAAqF,SACA3L,IAAA,YAAA0R,EAAA,QAAAZ,EAAA,IAAAA,EAAA,IACAxJ,OAAA,MACAC,UACAG,SAAA,QACE7D,IAyBFuJ,EAAAwE,OAAA,SAAAvN,EAAAiI,EAAAzI,GAIA,OAFAyI,EAAAjI,OAEAiC,EAAAqF,SACA3L,IAAA,WACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAsK,EACA3E,UAAArB,EAAA+E,mBACExH,GAAAE,KAAA,SAAArF,GACF4H,EAAA2D,QAAA,yBAAAvL,OAKA4H,EAAA8G,SAEA1P,EAAAD,QAAA2P,iBC9SA,SAAAyE,EAAAC,GACA,IAAA/H,EAAA,UACAgI,KACAC,KACAC,KACAC,EAAA,KAEAC,IAEA,mBACA,kBACA,sBAGAtH,GACA9G,KAAA,WACA,QAAApG,EAAA,EAAkBA,EAAAwH,UAAArF,OAAsBnC,IAExC,GAAAwH,UAAAxH,GAIA,GAAA8B,MAAAC,QAAAyF,UAAAxH,IAEA,IADA,IAAAyU,EAAAjN,UAAAxH,GACA0U,EAAA,EAAoBA,EAAAD,EAAAtS,OAAgBuS,IAEpC,aAAAtI,GACAqI,EAAAC,GAAAjJ,MAAA/D,KAAA6M,GAGAH,EAAA/F,KAAAoG,EAAAC,QAKA,aAAAtI,GACA5E,UAAAxH,GAAAyL,MAAA/D,KAAA6M,GAGAH,EAAA/F,KAAA7G,UAAAxH,IAIA,OAAA0H,MAGAgJ,KAAA,WACA,QAAA1Q,EAAA,EAAkBA,EAAAwH,UAAArF,OAAsBnC,IAExC,GAAAwH,UAAAxH,GAIA,GAAA8B,MAAAC,QAAAyF,UAAAxH,IAEA,IADA,IAAAyU,EAAAjN,UAAAxH,GACA0U,EAAA,EAAoBA,EAAAD,EAAAtS,OAAgBuS,IAEpC,aAAAtI,GACAqI,EAAAC,GAAAjJ,MAAA/D,KAAA6M,GAGAF,EAAAhG,KAAAoG,EAAAC,QAKA,aAAAtI,GACA5E,UAAAxH,GAAAyL,MAAA/D,KAAA6M,GAGAF,EAAAhG,KAAA7G,UAAAxH,IAIA,OAAA0H,MAGAuE,OAAA,WACA,OAAAvE,KAAAtB,KAAAqF,MAAA/D,KAAAF,WAAAkJ,KAAAjF,MAAA/D,KAAAF,YAGAmN,SAAA,WACA,QAAA3U,EAAA,EAAkBA,EAAAwH,UAAArF,OAAsBnC,IAExC,GAAAwH,UAAAxH,GAIA,GAAA8B,MAAAC,QAAAyF,UAAAxH,IAEA,IADA,IAAAyU,EAAAjN,UAAAxH,GACA0U,EAAA,EAAoBA,EAAAD,EAAAtS,OAAgBuS,IAEpC,YAAAtI,GACAkI,EAAAjG,KAAAoG,EAAAC,QAMA,YAAAtI,GACAkI,EAAAjG,KAAA7G,UAAAxH,IAKA,OAAA0H,MAsBAkN,KAAA,WACA,IAAAC,EAAArN,UACA,OAAA0M,EAAA,SAAAY,GAEAN,EAAAhO,QAAA,SAAAuO,EAAA/U,GACA,IAAAmU,EAAA,mBAAAU,EAAA7U,IAAA6U,EAAA7U,GAGAyJ,EAAAsL,EAAA,eACA,IAAAC,EAAAb,KAAA1I,MAAA/D,KAAAF,WACAwN,GAAA,mBAAAA,EAAA9H,QACA8H,EAAA9H,UACAyH,SAAAG,EAAAG,QACA7O,KAAA0O,EAAAhJ,SACA4E,KAAAoE,EAAA/J,QAEA+J,EAAAC,EAAA,WACArN,OAAAwF,EAAA4H,EAAA5H,UAAAxF,KACAyM,GAAAa,GAAAxN,eAKAqN,EAAA,OACI3H,WAGJA,QAAA,SAAAtL,GACA,SAAAA,EACA,OAAAsL,EAEA,QAAAlN,KAAAkN,EACAtL,EAAA5B,GAAAkN,EAAAlN,GAEA,OAAA4B,GAIAuE,MAAA,WACA,OAAAiG,GAGA8I,MAAA,WACAC,QAAAC,IAAA,UAAAhB,EAAAC,EAAAjI,IAGAiJ,WAAA,WACA,mBAAAjJ,GAGAkJ,WAAA,WACA,mBAAAlJ,IAIA3C,GACAiD,YAAA,SAAA9C,GACA,eAAAwC,EAAA,CACAA,EAAA,WAEA,IADA,IAAAD,EAAAoI,EAAA/M,UAAArF,OAAA,EAAAqF,UAAA,MACAxH,EAAA,EAAmBA,EAAAoU,EAAAjS,OAAsBnC,IACzCoU,EAAApU,GAAAyL,MAAA7B,EAAAuC,GAGA,OAAAzE,MAGA8E,WAAA,SAAA5C,GACA,eAAAwC,EAAA,CACAA,EAAA,WAEA,IADA,IAAAD,EAAAoI,EAAA/M,UAAArF,OAAA,EAAAqF,UAAA,MACAxH,EAAA,EAAmBA,EAAAqU,EAAAlS,OAAsBnC,IACzCqU,EAAArU,GAAAyL,MAAA7B,EAAAuC,GAGA,OAAAzE,MAGAoF,WAAA,SAAAlD,GACA,eAAAwC,EAEA,IADA,IAAAD,EAAAoI,EAAA/M,UAAArF,OAAA,EAAAqF,UAAA,MACAxH,EAAA,EAAmBA,EAAAsU,EAAAnS,OAA0BnC,IAC7CsU,EAAAtU,GAAAyL,MAAA7B,EAAAuC,GAGA,OAAAzE,MAGAoE,QAAA,WACA,OAAApE,KAAAgF,YAAAhF,KAAAF,YAGAuD,OAAA,WACA,OAAArD,KAAA8E,WAAA9E,KAAAF,YAGAyN,OAAA,WACA,OAAAvN,KAAAoF,WAAApF,KAAAF,aAIA5F,EAAAsL,UAAAzD,GAMA,OAJA0K,GACAA,EAAA1I,MAAA7J,OAGAA,EAGAsS,EAAAlI,KAAA,WACA,GAAAxE,UAAArF,OAAA,GACA,IAAAP,EAAA4F,UAAArF,OAAAqF,UAAA,QAAAR,EACA,OAAApF,GAAA,mBAAAA,EAAA0T,YAAA,mBAAA1T,EAAAyT,WACAzT,EAAAsL,UAGAgH,IAAApI,QAAAlK,GAAAsL,UAIA,gBAAAf,GAMA,IALA,IAAAoJ,EAAArB,IACAsB,EAAArJ,EAAAhK,OACAiE,EAAA,EACAqP,EAAA,IAAA3T,MAAA0T,GAEAxV,EAAA,EAAkBA,EAAAmM,EAAAhK,OAAiBnC,KACnC,SAAA0U,GACA,IAAA9S,EAAA,KAEAuK,EAAAuI,GAAAtO,KACA+F,EAAAuI,GAAAtO,KAAA,WAA+BqP,EAAAf,GAAAlN,UAAArF,OAAA,EAAAqF,UAAA,GAAAA,YAA2DpB,GAAAoP,GAAsBD,EAAAzJ,QAAAL,MAAA8J,EAAAE,KAChH/E,KAAA,WAAwB6E,EAAAxK,OAAAvD,cAExB5F,EAAAuK,EAAAuI,GACAvI,EAAAuI,GAAA,IAAApM,SAEA6D,EAAAuI,GAAAtO,KAAA,WAA+BqP,EAAAf,GAAAlN,UAAArF,OAAA,EAAAqF,UAAA,GAAAA,YAA2DpB,GAAAoP,GAAsBD,EAAAzJ,QAAAL,MAAA8J,EAAAE,KAChH/E,KAAA,WAAwB6E,EAAAxK,OAAAvD,aAAwBsE,QAAAlK,IAXhD,CAaK5B,GAGL,OAAAuV,EAAArI,UAvBA,CAwBG1F,YAIHzH,EAAAD,QAAAoU,mBC/RA,IAAA5L,EAAA1I,EAAA,GAoGAG,EAAAD,QAhGA,WAEA,IAAA4V,EAAApN,IAAAwD,UACA6J,KACAvC,EAAA1L,KAsBA,SAAAkO,IAEA,QAAA5V,EAAA,EAAcA,EAAA2V,EAAAxT,OAAgBnC,IAAA,CAE9B,IAAA6V,EAAAF,EAAA3V,GAAA6V,IACAC,EAAAH,EAAA3V,GAAA8V,QACA3B,EAAAwB,EAAA3V,GAAAmU,GAEA,GAAA2B,EAEAH,EAAA3V,GAAA8V,SAAA,EAEA3B,EAAAhU,KAAAiT,KACAhN,KAAA,WAEA,IAAA+F,EAAArK,MAAAT,UAAA6M,MAAA/N,KAAAqH,WAEAqO,EAAAnJ,YAAA0G,EAAAjH,KAEAuE,KAAA,WACAmF,EAAArJ,WAAA4G,EAAAtR,MAAAT,UAAA6M,MAAA/N,KAAAqH,cAEAmN,SAAA,WACAkB,EAAA/I,WAAAsG,EAAAtR,MAAAT,UAAA6M,MAAA/N,KAAAqH,mBAMA,GAAAqO,EAAAP,cAAAO,EAAAR,aAAA,CACAM,EAAA3R,OAAAhE,EAAA,GACAA,IACA,SAMA,QAzDA,4EAAAwG,QAAA,SAAAuP,GACArO,KAAAqO,GAAA,WAEA,IAEAhV,GAFA4U,EAAAxT,OAAAwT,IAAAxT,OAAA,GAAA0T,IAAAH,GAEAK,GAAAtK,MAAA2H,EAAAtR,MAAAT,UAAA6M,MAAA/N,KAAAqH,YAEA,uBAAAzG,GAAA,SAAAgV,EAEA3C,EAEArS,IAGE2G,MACFA,KAAAwF,QAAA,WACA,OAAAkG,GA8CA1L,KAAA+B,SAAA,SAAAuM,GAGA,IAAAH,EAAA,IAAAvN,EAkBA,OAfAuN,EAAA5J,OAAA,WAEA2J,MAKAD,EAAAtH,MACA8F,GAAA6B,EACAH,MACAC,SAAA,IAGAF,IAEAlO,wBC9FA,IAAAc,EAAA5I,EAAA,GAsEAG,EAAAD,QApEA,SAAA8B,GAEA,IAAAqU,KAEArU,EAAAsU,GAAA,SAAAC,EAAA5J,GACA,sBAAAA,EAAA,CACA4J,IAAAvS,MAAA,KACA,QAAA5D,EAAA,EAAeA,EAAAmW,EAAAhU,OAAiBnC,IAAA,CAChC,IAAAoW,EAAAD,EAAAnW,GACAoW,EAAAjU,SACA8T,EAAAG,KAAAH,EAAAG,OACAH,EAAAG,GAAA/H,KAAA9B,OAMA3K,EAAAyU,IAAA,SAAAF,EAAA5J,GACA4J,IAAAvS,MAAA,KACA,QAAA5D,EAAA,EAAcA,EAAAmW,EAAAhU,OAAiBnC,IAAA,CAC/B,IAAAoW,EAAAD,EAAAnW,GACA,GAAAoW,EAAAjU,QAAA8T,EAAAG,GACA,sBAAA7J,EACA,QAAAmI,EAAA,EAAiBA,EAAAuB,EAAAG,GAAAjU,OAA2BuS,IAC5CuB,EAAAG,GAAA1B,KAAAnI,IACA0J,EAAAG,GAAApS,OAAA0Q,EAAA,GACAA,UAKAuB,EAAAG,QAMAxU,EAAA0U,IAAA,SAAAH,EAAA5J,GACA,mBAAAA,GACA3K,EAAAsU,GAAAC,EAAA,WACAvU,EAAAyU,IAAAF,EAAA5J,GACAA,EAAAd,MAAA/D,KAAA5F,MAAAT,UAAA6M,MAAA/N,KAAAqH,eAKA5F,EAAA0K,QAAA,SAAA8J,EAAAG,GACA,iBAAAH,IACAA,EAAA5N,EAAA4N,IAKA,IAHA,IAAA1P,EAAA0P,EAAA1P,KACA8P,EAAAP,EAAAvP,OAEA1G,EAAA,EAAcA,EAAAwW,EAAArU,OAAYnC,IAAA,CAC1B,IAAAmM,GAAAiK,GAKA,GAJAtU,MAAAC,QAAAwU,KACApK,IAAAsK,OAAAF,IACAC,EAAAxW,GAAAyL,MAAA7J,EAAAuK,GAEAiK,EAAAM,iCAAAN,EAAAO,uBACA,MAEA,OAAAP,qBCjEA,IAAA/N,EAAAzI,EAAA,GAGA,SAAAgX,IACA,SAGA,SAAAC,IACA,SAQA,IAAArO,EAAA,SAAArB,EAAA2P,GAGA,KAAApP,gBAAAc,GACA,WAAAA,EAAArB,EAAA2P,GAIApP,KAAAhB,KAAAS,EAGA2P,GACAzO,EAAApB,OAAAS,KAAAoP,GAIApP,KAAAqP,UAAA9R,KAAAD,OAIAwD,EAAAnH,WACAyF,YAAA0B,EACAwE,mBAAA6J,EACAF,qBAAAE,EACAH,8BAAAG,EAEAG,eAAA,WACAtP,KAAAsF,mBAAA4J,GAEAK,gBAAA,WACAvP,KAAAiP,qBAAAC,GAEAM,yBAAA,WACAxP,KAAAgP,8BAAAE,EACAlP,KAAAuP,oBAOAlX,EAAAD,QAAA0I,mBCzDA,IAAAG,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACA6P,EAAA7P,EAAA,GAEA6P,EAAA0H,QAEA1H,EAAA0H,KAAAC,gBAAA,SAAAC,EAAAnR,GACA,IAAA0D,EAEA,GAAAyN,aAAA5H,EACA7F,EAAAyN,EACAA,IAAAtI,UAEA,IAAA1G,EAAAnG,KAAAmV,GACA,+DAEA,OAAA1O,EAAAqF,SACA3L,IAAA,YAAAgV,EAAA,gBACAtN,SAAA,OACAH,UACAI,UAAA,SAAAsN,GAKA,OAJA1N,aAAA6F,IAEA7F,EAAA2N,aAAAD,GAEAA,IAEEpR,IAKFnG,EAAAD,QAAA2P,EAAA0H,sBChCA,IAAAxO,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACA6P,EAAA7P,EAAA,GAGA6P,EAAA+H,QAGA/H,EAAA+H,KAAAC,iBAAA,SAAAJ,EAAAnR,GACA,IAAA0D,EAEA,GAAAyN,aAAA5H,EACA7F,EAAAyN,EACAA,IAAAtI,UAEA,IAAA1G,EAAAnG,KAAAmV,GACA,+DAEA,OAAA1O,EAAAqF,SACA3L,IAAA,YAAAgV,EAAA,iBACAtN,SAAA,OACAH,UACAI,UAAA,SAAA0N,GAKA,OAJA9N,aAAA6F,IAEA7F,EAAA+N,qBAAAD,GAEAA,IAEExR,IAIFnG,EAAAD,QAAA2P,EAAA+H,sBChCA,IAAA7O,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACAkP,EAAAlP,EAAA,GACA0I,EAAA1I,EAAA,GAUA2P,EAAA,SAAAhC,GAEAuB,EAAA3O,KAAAuH,KAAA6F,IAEAlF,EAAAH,SAAAqH,EAAAT,GAUAS,EAAAlO,UAAAmU,KAAA,WACA,OAAA9N,KAAAqJ,MAAAyE,MAAA,GA4BAjG,EAAAlO,UAAAuW,SAAA,SAAAvO,GACA,OAAA3B,KAAAqJ,MAAA8G,QAAAlP,EAAAS,SAAA,QAAA1B,KAAAqH,KAAA,QAAA1F,GAAA,MAgBAkG,EAAAlO,UAAAyW,cAAA,SAAAzO,GACA,OAAAV,EAAAS,SAAA,QAAA1B,KAAAqH,KAAA1F,IASAkG,EAAAlO,UAAA0W,oBAAA,WACA,WAAA9S,KAAAyC,KAAAqJ,MAAAgH,sBASAxI,EAAAlO,UAAAkP,MAAA,WACA,uBAAA7I,KAAAqJ,MAAAR,MAAA7I,KAAAqJ,MAAAR,MAAA,IASAhB,EAAAlO,UAAA2W,QAAA,WACA,OAAAtQ,KAAAqJ,MAAAiH,SAAA,MAUAzI,EAAAlO,UAAA4W,KAAA,SAAA/R,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACA6H,EAAA0I,KAAAxM,MAAA9C,EAAAwD,MAYAoD,EAAAlO,UAAA6W,MAAA,SAAA7T,EAAA6B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACA6H,EAAA2I,MAAAzM,MAAA9C,EAAAwD,MA8BAoD,EAAA0E,OAAA,SAAA1G,EAAArH,GAMA,GAHAqH,EAAA4K,UAAA5K,EAAA4K,QAAA9P,EAAA6H,KAAA3C,EAAA4K,UAGA5K,EAAA6K,KAAA,CAEA,GAAA7K,EAAA6K,gBAAA/P,EAAAuC,KAAA,CAGA,IAAAvC,EAAAuD,WACA,oCACA,IAAAyM,EAAA,IAAAhQ,EAAAuD,WAAAiK,EAAAvN,IAoBA,OAnBA+P,EAAAC,UAAA,WACA/K,EAAA6K,KAAAC,EAAAtM,OAAAxI,OAAA8U,EAAAtM,OAAA7I,QAAA,YAA8D,GAE9DyF,EAAAqF,SACA3L,IAAA,QACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAkJ,EACAvD,UAAArB,EAAA+E,oBACMtH,KAAA,WACNyP,EAAAnJ,YAAAhF,KAAA5F,MAAAT,UAAA6M,MAAA/N,KAAAqH,cACMkJ,KAAA,WACNmF,EAAArJ,WAAA9E,KAAA5F,MAAAT,UAAA6M,MAAA/N,KAAAqH,eAIA6Q,EAAAE,cAAAhL,EAAA6K,MAEAvC,EAAAzP,KAAAF,GAAAE,KAAA,WACAuC,EAAA2D,QAAA,sBAAA5E,SACIwF,UAEJ,GAAAK,EAAA6K,gBAAAvN,YAAA,CAGA,IAFA,IAAAwI,EAAA,GACAmF,EAAA,IAAA9M,WAAA6B,EAAA6K,MACApY,EAAA,EAAkBA,EAAAwY,EAAAC,WAAsBzY,IACxCqT,GAAA9H,OAAAC,aAAAgN,EAAAxY,IAEAuN,EAAA6K,KAAA/P,EAAA6H,KAAAmD,QAEA,aAAA9F,EAAA6K,KACA,2CAIA,OAAAzP,EAAAqF,SACA3L,IAAA,QACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAkJ,EACAvD,UAAArB,EAAA+E,mBACExH,GAAAE,KAAA,SAAArF,GACF4H,EAAA2D,QAAA,sBAAAvL,OASAwO,EAAA0I,KAAA,SAAAtJ,EAAAC,GAEA,IAAAhF,EAAA8O,EAAA,KACA,GAAA/J,aAAAY,EACA3F,EAAA+E,EACA+J,EAAA/J,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,2DAFA+J,EAAA/J,EAMA,IAAAzI,EAAA0I,EAEA,OAAAjG,EAAAqF,SACA3L,IAAA,SAAAqW,EACA/O,OAAA,MACAI,SAAA,OACAH,WACE1D,IAMFqJ,EAAA2I,MAAA,SAAAvJ,EAAAC,EAAAvO,GAEA,IAAAuJ,EAAA8O,EAAA,KACA,GAAA/J,aAAAY,EACA3F,EAAA+E,EACA+J,EAAA/J,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,2DAFA+J,EAAA/J,EAMA,oBAAAC,EACA,0CAIA,IAAA1I,EAAA7F,EAEA,OAAAsI,EAAAqF,SACA3L,IAAA,SAAAqW,EACA3O,SAAA,OACAJ,OAAA,MACAE,YAAA,iBAAA+E,EAAA,wCACAvK,KAAAuK,EACAhF,UACAI,UAAArB,EAAA+E,mBACExH,IAOFqJ,EAAAoJ,QAAA,SAAAhK,EAAAC,GAEA,IAAAhF,EAAA8O,EAAA,KACA,GAAA/J,aAAAY,EACA3F,EAAA+E,EACA+J,EAAA/J,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,2DAFA+J,EAAA/J,EAMA,IAAAzI,EAAA0I,EAEA,OAAAjG,EAAAqF,SACA3L,IAAA,SAAAqW,EAAA,QACA/O,OAAA,MACAI,SAAA1B,EAAA2L,OAAA,gBACApK,WACE1D,IAGFyC,EAAA4G,MAEAxP,EAAAD,QAAAyP,mBCjUA,IAAA5G,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACAkP,EAAAlP,EAAA,GAYAgZ,EAAA,SAAArL,GAEAuB,EAAA3O,KAAAuH,KAAA6F,IAEAlF,EAAAH,SAAA0Q,EAAA9J,GAUA8J,EAAAvX,UAAAc,OAAA,WACA,OAAAuF,KAAAqJ,MAAA,QAQA6H,EAAAvX,UAAAwX,UAAA,WACA,OAAAnR,KAAAqJ,MAAA8H,WAQAD,EAAAvX,UAAAyX,YAAA,WACA,OAAApR,KAAAqJ,MAAA+H,aAQAF,EAAAvX,UAAA2G,KAAA,WACA,IAAAA,KACA,QAAA+Q,KAAArR,KAAAqJ,MAAA/I,KACAN,KAAAqJ,MAAA/I,KAAA1G,eAAAyX,IACA/Q,EAAAqG,KAAA0K,GACA,OAAA/Q,GAQA4Q,EAAAvX,UAAA0W,oBAAA,WACA,WAAA9S,KAAAyC,KAAAqJ,MAAAgH,sBA2BAa,EAAAvX,UAAA2X,OAAA,SAAA9R,EAAAhB,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAI,OAAAvN,MAAA9C,EAAAwD,MAaAyM,EAAAvX,UAAA4X,kBAAA,SAAAjW,EAAAmB,EAAA+B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAK,kBAAAxN,MAAA9C,EAAAwD,MAmBAyM,EAAAvX,UAAA6X,UAAA,SAAAnK,EAAA7I,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAM,UAAAzN,MAAA9C,EAAAwD,MAmBAyM,EAAAvX,UAAA8X,WAAA,SAAA9U,EAAA6B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAO,WAAA1N,MAAA9C,EAAAwD,MAsBAyM,EAAAvX,UAAA+X,kBAAA,SAAAjV,EAAAE,EAAAgV,EAAAnT,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAQ,kBAAA3N,MAAA9C,EAAAwD,MAsBAyM,EAAAvX,UAAAiY,OAAA,SAAAjV,EAAA6B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAU,OAAA7N,MAAA/D,KAAAyE,MAoBAyM,EAAAvX,UAAAkY,OAAA,SAAAlV,EAAA6B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAkR,EAAAW,OAAA9N,MAAA/D,KAAAyE,MAsBAyM,EAAAvX,UAAAyW,cAAA,SAAAzO,GACA,OAAAV,EAAAS,SAAA,UAAA1B,KAAAqH,KAAA1F,IA4BAuP,EAAA3E,OAAA,SAAAtF,EAAAzI,GAOA,MALA,iBAAAyI,IACAA,GACApO,KAAAoO,IAGAhG,EAAAqF,SACA3L,IAAA,UACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAsK,EACA3E,UAAArB,EAAA+E,mBACExH,GAAAE,KAAA,SAAArF,GACF4H,EAAA2D,QAAA,wBAAAvL,OAMA6X,EAAAI,OAAA,SAAArK,EAAAzH,EAAAhB,GAEA,IAAA0D,EAAA4P,EAAA,KACA,GAAA7K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAkBA,YAZA,IAAAzI,GAAA,mBAAAgB,IACAhB,EAAAgB,EACAA,EAAA,MAGAA,QAEApF,MAAAC,QAAAmF,EAAAuS,UACAvS,EAAAuS,OAAAvS,EAAAuS,OAAAxV,KAAA,MAIA0E,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,IAAAnR,EAAAjE,OAAoDsV,MAAAxS,EAAAwS,MAAAvX,OAAA+E,EAAA/E,OAAAwX,KAAAzS,EAAAyS,KAAA9K,EAAA3H,EAAA/C,MAAAsV,OAAAvS,EAAAuS,OAAAG,QAAA1S,EAAA0S,UACpDjQ,OAAA,MACAI,SAAA,OACAH,WACE1D,IAIF0S,EAAAK,kBAAA,SAAAtK,EAAA3L,EAAAmB,EAAA+B,GAEA,IAAA0D,EAAA4P,EAAA,KACA,GAAA7K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAYA,YANA,IAAAzI,GAAA,mBAAA/B,IACA+B,EAAA/B,EACAA,EAAA,MAIAwE,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,eAAAnR,EAAAjE,OAA+DpB,MAAA6L,EAAA1K,IAC/DwF,OAAA,MACAI,SAAA,OACAH,WACE1D,IAQF0S,EAAAM,UAAA,SAAAvK,EAAAC,EAAAvO,GAEA,IAAAuJ,EAAA4P,EAAA,KACA,GAAA7K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAMA,IAAAI,EAAAjN,MAAAC,QAAA6M,SACA1I,EAAA7F,EAEA,OAAAsI,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,UACAzP,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAA0K,EACAnF,UACAI,UAAArB,EAAA+E,mBACExH,IAOF0S,EAAAO,WAAA,SAAAxK,EAAAC,EAAAvO,GAEA,IAAAuJ,EAAA4P,EAAA,KACA,GAAA7K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAMA,oBAAAC,IAAAvG,EAAAnG,KAAA0M,EAAAG,IACA,2EAEA,IAAA8K,EAAAjL,EAAAG,GACA7I,EAAA7F,EAEA,OAAAsI,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,OAAAK,EACA9P,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAuK,EACAhF,UACAE,SACA2I,yBAAA,UAEEvM,IAOF0S,EAAAQ,kBAAA,SAAAzK,EAAAC,EAAAvO,EAAAC,EAAAyG,GAEA,IAAA6C,EAAA4P,EAAA,KAAAtT,EAAAa,EAAAsS,GAAA,EACA,GAAA1K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAMA,oBAAAC,EACA,8CAEA,oBAAAvO,EACA,wCAUA,YARA,IAAA0G,GAAA,mBAAAzG,IACA4F,EAAA5F,EACA+Y,GAAA,GAEA,kBAAA/Y,IACA+Y,EAAA/Y,GAGAqI,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,YAAAnR,EAAAjE,OAA4DyK,EAAAD,EAAAyK,WAC5DtP,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAhE,EACAuJ,UACAI,UAAArB,EAAA+E,mBACExH,IAiBF0S,EAAAU,OAAA,SAAA3K,EAAAmL,EAAAzZ,EAAAC,GAEA,IAAA4F,EAAA0D,EAAAmQ,EAAAP,EAAA,KAEA,GAAA7K,aAAAiK,EACAhP,EAAA+E,EACA6K,EAAA7K,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,6DAFA6K,EAAA7K,EAeA,MATA,iBAAAtO,GACA0Z,EAAA1Z,EACA6F,EAAA5F,GAGA4F,EAAA7F,EAIAsI,EAAAqF,SACA3L,IAAA,WAAAmX,EAAA,IAAAnR,EAAAjE,OAAoD2V,kBACpDhQ,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAyV,EACAlQ,UACAI,UAAArB,EAAA+E,mBACExH,IAKF0S,EAAAW,OAAA,SAAAS,EAAA3V,GACA,IAAAuF,EAAAmQ,EAAAE,EAAA/T,EAEA,GAAA8T,aAAApB,EACAhP,EAAAoQ,EACAA,IAAAjL,UAEA,IAAA1G,EAAAnG,KAAA8X,GACA,6DAIA,IAAAlY,MAAAC,QAAAsC,GACA,4CAEA,QAAArE,EAAA,EAAaA,EAAAwH,UAAArF,OAAoBnC,IACjC,cAAAwH,UAAAxH,IACA,eACAkG,EAAAsB,UAAAxH,GACA,MACA,cACAia,EAAAzS,UAAAxH,GACA,MACA,aACA+Z,EAAAvS,UAAAxH,GAKA,OAAA2I,EAAAqF,SACA3L,IAAA,WAAA2X,EAAA,IAAA3R,EAAAjE,OAAiD6V,aAAAF,kBACjDhQ,SAAA,OACAJ,OAAA,MACAE,YAAA,kCACAxF,OACAuF,UACAI,UAAArB,EAAA+E,mBACExH,IAIFyC,EAAAiQ,QAEA7Y,EAAAD,QAAA8Y,mBCpkBA,IAAAjQ,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GACAkP,EAAAlP,EAAA,GAWAsa,EAAA,SAAA3M,GAEAuB,EAAA3O,KAAAuH,KAAA6F,IAEAlF,EAAAH,SAAAgS,EAAApL,GAQAoL,EAAA7Y,UAAAmU,KAAA,WACA,OAAA9N,KAAAqJ,MAAAyE,MAQA0E,EAAA7Y,UAAAyX,YAAA,WACA,OAAApR,KAAAqJ,MAAA+H,aAAA,MAQAoB,EAAA7Y,UAAA8Y,KAAA,WACA,OAAAzS,KAAAqJ,MAAAoJ,MASAD,EAAA7Y,UAAA0W,oBAAA,WACA,WAAA9S,KAAAyC,KAAAqJ,MAAAgH,sBA4BAmC,EAAA7Y,UAAA+Y,cAAA,SAAA/Q,GACA,OAAA3B,KAAAqJ,MAAAsJ,aAAA1R,EAAAS,SAAA,SAAA1B,KAAAqH,KAAA,aAAA1F,GAAA,MAqBA6Q,EAAA7Y,UAAAyW,cAAA,SAAAzO,GACA,OAAAV,EAAAS,SAAA,SAAA1B,KAAAqH,KAAA1F,IASA6Q,EAAA7Y,UAAAiZ,OAAA,WACA,OAAA5S,KAAAqJ,MAAAuJ,QASAJ,EAAA7Y,UAAAkZ,SAAA,WACA,OAAA7S,KAAAqJ,MAAAuJ,QAAA,2BAAA5S,KAAAqJ,MAAAoJ,MAmBAD,EAAA7Y,UAAAiS,QAAA,SAAAnH,EAAAjG,GACAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAwS,EAAA5G,QAAA7H,MAAA9C,EAAAwD,MAkCA+N,EAAA7Y,UAAA4W,KAAA,SAAA5E,EAAAnN,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAwS,EAAAjC,KAAAxM,MAAA9C,EAAAwD,MAiBA+N,EAAA7Y,UAAA6W,MAAA,SAAA7T,EAAA6B,GACA,IAAAiG,KAAA+B,MAAA/N,KAAAqH,WACA,OAAAE,KAAA+B,SAAA,WAEA,OADA0C,EAAAmG,QAAA5K,MACAwS,EAAAhC,MAAAzM,MAAA9C,EAAAwD,MA0BA+N,EAAAjG,OAAA,SAAAtF,EAAAzI,GAOA,MALA,iBAAAyI,IACAA,GACApO,KAAAoO,IAGAhG,EAAAqF,SACA3L,IAAA,SACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,KAAAsK,EACA3E,UAAArB,EAAA+E,mBACExH,GAAAE,KAAA,SAAArF,GACF4H,EAAA2D,QAAA,uBAAAvL,OAQAmZ,EAAAjC,KAAA,SAAAuC,EAAAnH,EAAAnN,GAEA,IAAA0D,EACA,GAAA4Q,aAAAN,EACAtQ,EAAA4Q,EACAA,IAAAzL,UAEA,IAAA1G,EAAAnG,KAAAsY,GACA,2DAQA,YALA,IAAAtU,GAAA,mBAAAmN,IACAnN,EAAAmN,EACAA,GAAA,GAGA1K,EAAAqF,SACA3L,IAAA,UAAAmY,EACA7Q,OAAA,MACAI,SAAAsJ,EAAAhL,EAAA2L,OAAA,uBACApK,WACE1D,IAMFgU,EAAA5G,QAAA,SAAAkH,EAAArO,EAAAjG,GAEA,IAAA0D,EACA,GAAA4Q,aAAAN,EACAtQ,EAAA4Q,EACAA,IAAAzL,UAEA,IAAA1G,EAAAnG,KAAAsY,GACA,2DAQA,YALA,IAAAtU,GAAA,mBAAAiG,IACAjG,EAAAiG,EACAA,EAAA,MAGAxD,EAAAqF,SACA3L,IAAA,UAAAmY,EAAA,YAAAnS,EAAAjE,OAAuD+H,SACvDxC,OAAA,MACAI,SAAA,OACAH,WACE1D,IAMFgU,EAAAhC,MAAA,SAAAvJ,EAAAC,EAAAvO,GAEA,IAAAuJ,EAAA8O,EAAA,KACA,GAAA/J,aAAAuL,EACAtQ,EAAA+E,EACA+J,EAAA/J,EAAAI,SAEA,KAAA1G,EAAAnG,KAAAyM,GAGA,2DAFA+J,EAAA/J,EAMA,IAAAzI,EAAA7F,EAEA,OAAAsI,EAAAqF,SACA3L,IAAA,UAAAqW,EACA3O,SAAA,OACAJ,OAAA,MACAE,YAAA,iBAAA+E,EAAA,wCACAvK,KAAAuK,EACAhF,UACAI,UAAArB,EAAA+E,mBACExH,IAGFyC,EAAAuR,OAEAna,EAAAD,QAAAoa,mBCnVA,IAAAvR,EAAA/I,EAAA,GAgBAqV,EAAA,SAAAwF,EAAAC,EAAAxU,GACA,IAAA/B,KAEA,MAAAqD,UAAArF,OACAgC,EAAA,KAAAuW,EACAvW,EAAA,QAAAsW,OAEA,MAAAjT,UAAArF,OACA,iBAAAuY,GACAvW,EAAA,QAAAsW,EACAtW,EAAA,KAAAuW,IAGAvW,EAAA,KAAAsW,EACAvU,EAAAwU,OAGA,OAAAlT,UAAArF,OAIA,sBAHAgC,EAAA,KAAAsW,EAOA,OAAA9R,EAAAqF,SACA3L,IAAA,gBACAsH,OAAA,OACAE,YAAA,kCACAxF,KAAAF,GACE+B,IAIFyC,EAAAsM,SAEAlV,EAAAD,QAAAmV,mBCpDA,IAAAtM,EAAA/I,EAAA,GACAyI,EAAAzI,EAAA,GAQA+a,GAUA7Z,IAAA,SAAAoF,GACA,OAAAyC,EAAAqF,SACA3L,IAAA,YACA0H,SAAA,OACAJ,OAAA,OACEzD,IAWFkM,IAAA,SAAA/N,EAAA6B,GAEA,IAAAmC,EAAA1B,cAAAtC,GACA,0CAGA,OAAAsE,EAAAqF,SACA3L,IAAA,YACA0H,SAAA,OACAJ,OAAA,OACAE,YAAA,kCACAxF,OACAyF,SACA2I,yBAAA,UAEEvM,KAGFyC,EAAAgS,WAEA5a,EAAAD,QAAA6a,mBCvDA,IAAAtS,EAAAzI,EAAA,GAoBAG,EAAAD,QAlBA,SAAAyN,GACA7F,KAAAZ,YAAAzF,UAAAuZ,UAAArS,MAAAlH,UACAkH,MAAAsS,kBAAAnT,UAAAZ,aACAY,KAAAnH,KAAA,eACA,iBAAAgN,IACAA,GACAmN,QAAAnN,IAEAA,aAAAhF,QACAgF,GACAmN,QAAAnN,EAAAmN,UAEArS,EAAApB,OAAAS,MACAgT,QAAA,iBACEnN,mBCfFxN,EAAAD,SAEAkU,QAAA,EAEA9D,UAEA4K,UAEAlS,8BAEAgC,UAEAE,OAAA,aAEAc,uBAAA,KAEAP,+BAAA,uBCZA,IAAA1C,EAAA/I,EAAA,GAEAA,EAAA,GACAA,EAAA,IACAA,EAAA,IACAA,EAAA,IACAA,EAAA,IACAA,EAAA,IACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GAEAG,EAAAD,QAAA6I","file":"ething.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","\nvar extra = require(\"./extra.js\");\n\nvar Utils = extra || {};\n\n\nUtils.isId = function(s){\n\treturn (typeof s == 'string' && s.length === 7 && /^[0-9a-zA-Z\\-_]+$/.test(s));\n}\n\n\nUtils.parseUrl = function(url){\n\tvar r = /^((([a-z]+):)?\\/\\/)?(([^:]*)(:([^@]*))?@)?([^:\\/?#]+)?(:([0-9]+))?([^?#]+)?(\\?[^#]*)?(#.*)?$/i.exec(url);\n\treturn r ? {\n\t\tscheme : r[3],\n\t\tuser : r[5],\n\t\tpassword : r[7],\n\t\thostname : r[8],\n\t\tport : r[10],\n\t\tpath : r[11],\n\t\tsearch : r[12],\n\t\thash: r[13]\n\t} : false;\n}\n\nUtils.getParam = function(url, key) {\n\tvar queryIndex = url.indexOf('?'); \n\tvar regex = new RegExp(\"[\\\\?&]\" + encodeURIComponent(key) + \"=([^&#]*)\"),\n\t\tresults = queryIndex!==-1 ? regex.exec(url.substr(queryIndex)) : null;\n\treturn results === null ? \"\" : decodeURIComponent(results[1]);\n}\n\nUtils.getQueryString = function(url, key) {\n\tvar queryIndex = url.indexOf('?'); \n\tvar regex = new RegExp(\"[\\\\?&]\" + encodeURIComponent(key) + \"=([^&#]*)\"),\n\t\tresults = queryIndex!==-1 ? regex.exec(url.substr(queryIndex)) : null;\n\treturn results === null ? \"\" : decodeURIComponent(results[1]);\n}\n\nUtils.removeParam = function(url,key){\n\t//prefer to use l.search if you have a location/link object\n\tvar urlparts= url.split('?');   \n\tif (urlparts.length>=2) {\n\t\t\n\t\tvar hashIndex = urlparts[1].indexOf('#'),\n\t\t\thash = '';\n\t\tif(hashIndex !== -1){\n\t\t\thash = urlparts[1].substr(hashIndex);\n\t\t\turlparts[1] = urlparts[1].substr(0,hashIndex);\n\t\t}\n\t\t\t\n\t\tvar prefix= encodeURIComponent(key)+'=';\n\t\tvar pars= urlparts[1].split(/[&;]/g);\n\n\t\t//reverse iteration as may be destructive\n\t\tfor (var i= pars.length; i-- > 0;) {    \n\t\t\t//idiom for string.startsWith\n\t\t\tif (pars[i].lastIndexOf(prefix, 0) !== -1) {  \n\t\t\t\tpars.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\turl= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\") + hash;\n\t\treturn url;\n\t} else {\n\t\treturn url;\n\t}\n};\n\nUtils.insertParam = function(url,key,value){\n\t\n\turl = Utils.removeParam(url,key);\n\t\n\tvar hashIndex = url.indexOf('#'),\n\t\thash = '';\n\tif(hashIndex !== -1){ // extract hash\n\t\thash = url.substr(hashIndex);\n\t\turl = url.substr(0,hashIndex);\n\t}\n\t\n\tvar queryIndex = url.indexOf('?'),\n\t\tquery = '';\n\tif(queryIndex !== -1){ // extract query\n\t\tquery = url.substr(queryIndex);\n\t\turl = url.substr(0,queryIndex);\n\t}\n\t\n\tquery += query.length ? '&' : '?';\n\tquery += encodeURIComponent(key)+'='+encodeURIComponent(value);\n\t\n\treturn url+query+hash;\n};\n\n\nfunction buildParams( prefix, obj, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tfor(var i in obj){\n\t\t\tvar v = obj[i];\n\t\t\tif ( /\\[\\]$/.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, add );\n\t\t\t}\n\t\t};\n\n\t} else if ( typeof obj === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\nUtils.param = function(data){\n\t\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = (typeof value == 'function') ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t// did it), otherwise encode params recursively.\n\tfor ( prefix in data ) {\n\t\tif(!(data[prefix] === null || typeof data[prefix] == 'undefined'))\n\t\t\tbuildParams( prefix, data[ prefix ], add );\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( /%20/g, \"+\" );\n\t\n}\n\n\n\n\nvar pad = Utils.pad = function(n, width, z) {\n\tz = z || '0';\n\tn = n + '';\n\treturn n.length >= width ? n : new Array(width - n.length + 1)\n\t\t.join(z) + n;\n}\n\n\nUtils.sizeToString = function(s) {\n\ts = parseInt(s);\n\tif(isNaN(s)) return '-';\n\tvar coef = 0.9;\n\tif (s > 1000000000 * coef)\n\t\ts = (Math.floor((s / 1000000000) * 100 ) / 100) + ' GB';\n\telse if (s > 1000000 * coef)\n\t\ts = (Math.floor((s / 1000000) * 100) / 100) + ' MB';\n\telse if (s > 1000 * coef)\n\t\ts = (Math.floor((s / 1000) * 100) / 100) + ' KB';\n\telse\n\t\ts = s + ' B';\n\treturn s;\n};\n\nUtils.dateToString = function(d) {\n\tvar now = new Date();\n\t\n\tif(typeof d == 'number'){\n\t\td = new Date(d*1000);\n\t}\n\t\n\tif(!d)\n\t\treturn '-';\n\telse if(now.getTime()-d.getTime() < 86400000){\n\t\t// 22:52\n\t\treturn pad(d.getHours(),2) + ':' + pad(d.getMinutes(),2);\n\t}\n\telse {\n\t\tvar curr_year = d.getFullYear();\n\t\tvar curr_date = d.getDate();\n\t\tvar curr_month = d.getMonth();\n\t\t\n\t\tif(curr_year == now.getFullYear()){\n\t\t\t// Jul. 27\n\t\t\tvar m_names = new Array(\"Jan\", \"Feb\", \"Mar\",\n\t\t\t\t\"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\",\n\t\t\t\t\"Oct\", \"Nov\", \"Dec\");\n\t\t\treturn curr_date + ' ' + m_names[curr_month] + '.';\n\t\t}\n\t\telse {\n\t\t\t// 2014/07/27\n\t\t\treturn curr_year + '/' + pad(curr_month+1,2) + '/' + pad(curr_date,2);\n\t\t}\n\t}\n};\n\nUtils.dateDiffToString = function(diffInSec) {\n\tdiffInSec = parseInt(diffInSec);\n\tif(isNaN(diffInSec)) return '-';\n\t// transform it into interval\n\tvar divideBy = {\n\t\t\tw: 604800,\n\t\t\td: 86400,\n\t\t\th: 3600,\n\t\t\tm: 60\n\t\t},\n\t\tw = 0, // number of word\n\t\ts = '', // output string\n\t\tv;\n\tv = Math.floor(diffInSec / divideBy.w);\n\tif (v >= 1 && w < 2) {\n\t\ts += Math.floor(v) + ' week' + (v > 1 ? 's' : '');\n\t\tdiffInSec -= v * divideBy.w;\n\t\tw++;\n\t}\n\tv = Math.floor(diffInSec / divideBy.d);\n\tif (v >= 1 && w < 2) {\n\t\tif (w) s += ' ';\n\t\ts += Math.floor(v) + ' day' + (v > 1 ? 's' : '');\n\t\tdiffInSec -= v * divideBy.d;\n\t\tw++;\n\t}\n\tv = Math.floor(diffInSec / divideBy.h);\n\tif (v >= 1 && w < 2) {\n\t\tif (w) s += ' ';\n\t\ts += Math.floor(v) + ' hour' + (v > 1 ? 's' : '');\n\t\tdiffInSec -= v * divideBy.h;\n\t\tw++;\n\t}\n\tv = Math.floor(diffInSec / divideBy.m);\n\tif (v >= 1 && w < 2) {\n\t\tif (w) s += ' ';\n\t\ts += Math.floor(v) + ' minute' + (v > 1 ? 's' : '');\n\t\tdiffInSec -= v * divideBy.m;\n\t\tw++;\n\t}\n\tv = diffInSec;\n\tif (v >= 1 && w < 2) {\n\t\tif (w) s += ' ';\n\t\ts += Math.floor(v) + ' seconde' + (v > 1 ? 's' : '');\n\t\tw++;\n\t}\n\n\treturn s;\n};\n\n\nvar cache = {};// private\n\nUtils.createCache = function( requestFunction ) {\n\treturn function( key, callback ) {\n\t\tif ( !cache[key] || (typeof cache[key].state == 'function' && cache[key].state() === 'rejected') ) {\n\t\t\tcache[key] = requestFunction(key);\n\t\t}\n\t\treturn cache[key].done( callback );\n\t};\n};\n\n\n\n\n\n\n\n\nvar class2type = {},\n\ttoString = class2type.toString,\n\thasOwn = class2type.hasOwnProperty;\n\n// Populate the class2type map\n\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \").forEach(function(name){\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\n\nUtils.type = function( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android<4.0, iOS<6 (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n};\n\nUtils.isPlainObject = function( obj ) {\n\tvar key;\n\n\t// Not plain objects:\n\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t// - DOM nodes\n\t// - window\n\tif ( Utils.type( obj ) !== \"object\" || obj.nodeType || (obj != null && obj === obj.window) ) {\n\t\treturn false;\n\t}\n\t\n\ttry {\n\t\t// Not own constructor property must be Object\n\t\tif ( obj.constructor &&\n\t\t\t\t!hasOwn.call( obj, \"constructor\" ) &&\n\t\t\t\t!hasOwn.call( obj.constructor.prototype || {}, \"isPrototypeOf\" ) ) {\n\t\t\treturn false;\n\t\t}\n\t} catch ( e ) {\n\t  // IE8,9 Will throw exceptions on certain host objects #9897\n\t  return false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own\n\tfor ( key in obj ) {}\n\n\treturn key === undefined || hasOwn.call( obj, key );\n};\n\nUtils.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t  target = arguments[0] || {},\n\t  i = 1,\n\t  length = arguments.length,\n\t  deep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t  deep = target;\n\t  target = arguments[1] || {};\n\t  // skip the boolean and the target\n\t  i = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && typeof target !== 'function' ) {\n\t  target = {};\n\t}\n\n\tif ( length === i ) {\n\t  target = this;\n\t  --i;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t  // Only deal with non-null/undefined values\n\t  if ( (options = arguments[ i ]) != null ) {\n\t\t// Extend the base object\n\t\tfor ( name in options ) {\n\t\t  src = target[ name ];\n\t\t  copy = options[ name ];\n\n\t\t  // Prevent never-ending loop\n\t\t  if ( target === copy ) {\n\t\t\tcontinue;\n\t\t  }\n\n\t\t  // Recurse if we're merging plain objects or arrays\n\t\t  if ( deep && copy && ( Utils.isPlainObject(copy) || (copyIsArray = Array.isArray(copy)) ) ) {\n\t\t\tif ( copyIsArray ) {\n\t\t\t  copyIsArray = false;\n\t\t\t  clone = src && Array.isArray(src) ? src : [];\n\n\t\t\t} else {\n\t\t\t  clone = src && Utils.isPlainObject(src) ? src : {};\n\t\t\t}\n\n\t\t\t// Never move original objects, clone them\n\t\t\ttarget[ name ] = Utils.extend( deep, clone, copy );\n\n\t\t  // Don't bring in undefined values\n\t\t  } else if ( copy !== undefined ) {\n\t\t\ttarget[ name ] = copy;\n\t\t  }\n\t\t}\n\t  }\n\t}\n\t// Return the modified object\n\treturn target;\n};\n\nUtils.isEqual = function(x, y) {\n\t'use strict';\n\n\tif (x === null || x === undefined || y === null || y === undefined) { return x === y; }\n\t// after this just checking type of one would be enough\n\tif (x.constructor !== y.constructor) { return false; }\n\t// if they are functions, they should exactly refer to same one (because of closures)\n\tif (x instanceof Function) { return x === y; }\n\t// if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n\tif (x instanceof RegExp) { return x === y; }\n\tif (x === y || x.valueOf() === y.valueOf()) { return true; }\n\tif (Array.isArray(x) && x.length !== y.length) { return false; }\n\n\t// if they are dates, they must had equal valueOf\n\tif (x instanceof Date) { return false; }\n\n\t// if they are strictly equal, they both need to be object at least\n\tif (!(x instanceof Object)) { return false; }\n\tif (!(y instanceof Object)) { return false; }\n\n\t// recursive object equality check\n\tvar p = Object.keys(x);\n\treturn Object.keys(y).every(function (i) { return p.indexOf(i) !== -1; }) &&\n\t\tp.every(function (i) { return Utils.isEqual(x[i], y[i]); });\n}\n\n\nUtils.inherits = function (extended, parent){\n\textended.prototype = new parent();\n\textended.prototype.constructor = extended; // fix constructor property\n};\n\t\n\nmodule.exports = Utils;\n\n","\nvar utils = require(\"./utils.js\");\nvar Deferred = require(\"./deferred.js\");\nvar Error = require(\"./error.js\");\nvar Event = require(\"./event.js\");\nvar EventEngine = require(\"./eventEngine.js\");\nvar DeferredObject = require(\"./deferredObject.js\");\n\n\n/**\n * Contains all eThing API classes and functions.\n * @namespace EThing\n */\nvar EThing = {};\n\n\nvar extend = utils.extend;\nvar isPlainObject = utils.isPlainObject;\n\nvar XMLHttpRequest = utils.XMLHttpRequest;\n\n\nEThing.Event = Event;\nEThing.Error = Error;\n\nEThing.utils = utils;\nEThing.utils.Deferred = Deferred;\n\nEThing.DeferredObject = DeferredObject;\n\nEThing.config = {\n\tapiUrl: 'http://localhost:8000/api'\n};\n\n\nvar ajaxSuccessHandlers = [],\n\tajaxCompleteHandlers = [],\n\tajaxErrorHandlers = [],\n\tajaxSendHandlers = [],\n\tapiRequestPrefilterHandler = null;\n\n\n\n\n\n/**\n * register an handler to an event.\n * @name on\n * @memberof EThing\n * @param {string} event event type string. Multiple space separated events can be given.\n * @param {function(EThing.Event)} handler the function to be called when the event has been triggered.\n */\n\n/**\n * Remove an event handler.\n * @name off\n * @memberof EThing\n * @param {string} event event type string. Multiple space separated events can be given.\n * @param {function(EThing.Event)} [handler] A handler function previously attached for the event(s)\n */\n\n/**\n * register an handler to an event. The handler will be only executed once.\n * @name one\n * @memberof EThing\n * @param {string} event event type string. Multiple space separated events can be given.\n * @param {function(EThing.Event)} handler the function to be called when the event has been triggered.\n */\n\n/**\n * Execute all handlers attached for the given event type.\n * @name trigger\n * @memberof EThing\n * @param {string|EThing.Event} event An event object instance or an event type string.\n * @param {object} [extraParameters] Additional parameters to pass along to the event handler.\n */\n\n\n/**\n * @memberof EThing\n * @event \"ething.resource.removed\"\n */\n \n/**\n * @memberof EThing\n * @event \"ething.file.created\"\n */\n \n/**\n * @memberof EThing\n * @event \"ething.table.created\"\n */\n \n/**\n * @memberof EThing\n * @event \"ething.device.created\"\n */\n \n/**\n * @memberof EThing\n * @event \"ething.app.created\"\n */\n/**\n * authenticated event.\n *\n * @memberof EThing\n * @event \"ething.authenticated\"\n */\nEventEngine(EThing);\n\n\n\n// only absolute url will be preserved untouched,\n// else api server url is prepended\nEThing.toApiUrl = function(url, auth){\n\turl = url || '';\n\t\n\tif(!/^([a-z]+:)?\\/\\//.test(url)){\n\t\t// relative url\n\t\tif(!/^\\//.test(url) && url)\n\t\t\turl = '/'+url;\n\t\t\n\t\turl = EThing.config.apiUrl + url;\n\t}\n\t\n\tif(auth && isApiUrl(url)){\n\t\turl = _processAuth(url);\n\t\tif(typeof apiRequestPrefilterHandler == 'function')\n\t\t\turl = apiRequestPrefilterHandler(url);\n\t}\n\treturn url;\n}\n\n// returns true if it is an URL to the HTTP API\nvar isApiUrl = function(url){\n\treturn (new RegExp('^([a-z]+:)?//'+EThing.config.apiUrl.replace(/^([a-z]+:)?\\/\\//,''))).test(url);\n}\n\n\n\nEThing.apiUrl = function(){\n\treturn EThing.toApiUrl();\n}\n\n\n\nvar ajax = function(options){\n\tvar deferred = new Deferred(),\n\t\txhr = new XMLHttpRequest();\n\t\n\tif(typeof options == 'string')\n\t\toptions = {\n\t\t\turl: options\n\t\t};\n\t\n\toptions = extend({\n\t\tmethod: 'GET',\n\t\tcontext: null,\n\t\turl: null,\n\t\tdata: null,\n\t\tcontentType: null, // When sending data to the server, use this content type , default to 'application/x-www-form-urlencoded; charset=UTF-8'\n\t\theaders: null,\n\t\tdataType: null, // The type of data that you're expecting back from the server (json -> {object}, text -> {string} , arraybuffer, blob -> (not available on nodejs), buffer (nodejs only) )\n\t\tconverter: null, // a user defined function to convert the receive data into something else ...\n\t\tsynchronous: false\n\t},options);\n\t\n\t\n\tif(typeof options.url != 'string')\n\t\treturn null;\n\t\n\tvar url = EThing.toApiUrl(options.url);\n\tvar apiRequest = isApiUrl(url);\n\t\n\t\n\toptions.method = options.method.toUpperCase();\n\t\n\tvar context = options.context || EThing;\n\t\n\tvar isBodyRequest = !/^(?:GET|HEAD)$/.test( options.method ),\n\t\tbody = undefined,\n\t\thasData = typeof options.data != 'undefined' && options.data !== null;\n\t\n\t\n\t\n\t// If data is available, append data to url\n\tif ( !isBodyRequest && hasData ){\n\t\t// GET, HEAD request, append the data to the query string\n\t\turl += ( /\\?/.test( url ) ? \"&\" : \"?\" ) + ( typeof options.data == 'string' ? options.data : utils.param(options.data));\n\t}\n\t\n\t\n\txhr.open(options.method, url, !options.synchronous);\n\t\n\t\n\t// user headers\n\tvar requestContentType = null;\n\tif(isPlainObject(options.headers)){\n\t\tfor(var i in options.headers){\n\t\t\tif(options.headers.hasOwnProperty(i)){\n\t\t\t\tif(/^content-type$/i.test(i)){\n\t\t\t\t\trequestContentType = options.headers[i];\n\t\t\t\t}\n\t\t\t\txhr.setRequestHeader(i, options.headers[i]);\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// content-type header\n\tif(!requestContentType && options.contentType)\n\t\txhr.setRequestHeader('Content-Type', requestContentType = options.contentType);\n\t\n\tif(isBodyRequest && hasData){\n\t\t\n\t\tif(requestContentType){\n\t\t\t\n\t\t\tbody = options.data;\n\t\t\t\n\t\t\tif(isPlainObject(options.data) || Array.isArray(options.data)){\n\t\t\t\t// transform the data according to the content-type\n\t\t\t\tif(/json/i.test(requestContentType))\n\t\t\t\t\tbody = JSON.stringify(options.data)\n\t\t\t\telse if(/application\\/x-www-form-urlencoded/i.test(requestContentType))\n\t\t\t\t\tbody = utils.param(options.data);\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t// no content-type set, set to defaults\n\t\t\tif(options.data instanceof Blob){\n\t\t\t\txhr.setRequestHeader('Content-Type', requestContentType = options.data.type);\n\t\t\t\tbody = options.data;\n\t\t\t} else if( (options.data instanceof ArrayBuffer) || (options.data instanceof utils.Buffer) ){\n\t\t\t\txhr.setRequestHeader('Content-Type', requestContentType = 'application/octet-stream');\n\t\t\t\tbody = options.data;\n\t\t\t} else {\n\t\t\t\txhr.setRequestHeader('Content-Type', requestContentType = 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\t\t\tbody = typeof options.data == 'string' ? options.data : utils.param(options.data);\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t// authentication\n\tif(apiRequest){\n\t\txhr = _processAuth(xhr);\n\t\tif(typeof apiRequestPrefilterHandler == 'function')\n\t\t\txhr = apiRequestPrefilterHandler(xhr);\n\t}\n\t\n\t// responseType\n\tvar dataType = options.dataType;\n\tif(dataType && dataType != 'auto') xhr.responseType = dataType;\n\t\n\tfunction reject(error){\n\t\t\n\t\tvar ct = xhr.getResponseHeader(\"Content-Type\") || '',\n\t\t\tdata = null;\n\t\t\n\t\tif(typeof error != 'undefined'){\n\t\t\tdata = error;\n\t\t}\n\t\telse if(/json/.test(ct) || /text\\/plain/.test(ct)){\n\t\t\t\n\t\t\t\n\t\t\tswitch(xhr.responseType){\n\t\t\t\t\n\t\t\t\tcase '':\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'json':\n\t\t\t\t\tdata = xhr.response;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'blob':\n\t\t\t\t\t\n\t\t\t\t\tif(options.synchronous){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!utils.FileReaderSync){\n\t\t\t\t\t\t\tthrow new Error(\"FileReaderSync not supported.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar fileReader = new utils.FileReaderSync();\n\t\t\t\t\t\tdata = String.fromCharCode.apply(null, new Uint8Array(fileReader.readAsArrayBuffer(xhr.response)));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = Deferred();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!utils.FileReader){\n\t\t\t\t\t\t\tthrow new Error(\"FileReaderSync not supported.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar fileReader = new utils.FileReader();\n\t\t\t\t\t\tfileReader.onload = function() {\n\t\t\t\t\t\t\tdata.resolve( String.fromCharCode.apply(null, new Uint8Array(this.result)) );\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfileReader.readAsArrayBuffer(xhr.response);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tdata = String.fromCharCode.apply(null, new Uint8Array(xhr.response));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdata = xhr.response.toString(\"utf8\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(xhr.responseType+\" response type not supported.\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tDeferred.when(data).always(function(data){\n\t\t\t\n\t\t\ttry{\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t} catch(e){}\n\t\t\t\n\t\t\tvar error = new Error(data || (xhr.status ? (xhr.status+' ['+xhr.statusText+']') : 'unknown error')),\n\t\t\t\targs = [error,xhr,options];\n\t\t\t\n\t\t\tEThing.trigger('ething.request.error',args);\n\t\t\tajaxErrorHandlers.forEach(function(handler){\n\t\t\t\thandler.apply(context,args);\n\t\t\t});\n\t\t\tEThing.trigger('ething.request.complete',args);\n\t\t\tajaxCompleteHandlers.forEach(function(handler){\n\t\t\t\thandler.apply(context,args);\n\t\t\t});\n\t\t\tdeferred.rejectWith(context,args);\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\tfunction resolve(data){\n\t\tvar args = [data,xhr,options];\n\t\t\n\t\tEThing.trigger('ething.request.success',args);\n\t\tajaxSuccessHandlers.forEach(function(handler){\n\t\t\thandler.apply(context,args);\n\t\t});\n\t\tEThing.trigger('ething.request.complete',args);\n\t\tajaxCompleteHandlers.forEach(function(handler){\n\t\t\thandler.apply(context,args);\n\t\t});\n\t\tdeferred.resolveWith(context,args);\n\t}\n\t\n\t// events\n\txhr.onload=function(){\n\t\tvar success = xhr.status >= 200 && xhr.status < 300 || xhr.status === 304;\n\t\tif (success) {  \n\t\t\t// success\n\t\t\tvar data = xhr.response;\n\t\t\t\n\t\t\tif(dataType == 'auto'){\n\t\t\t\tif(/json/.test(xhr.getResponseHeader(\"Content-Type\") || '')){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t} catch(err){}\n\t\t\t\t}\n\t\t\t} else if(dataType == 'json' && typeof data === 'string'){ // for ie compatibility\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t} catch(err){}\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof options.converter == 'function'){\n\t\t\t\tdata = options.converter.call(context,data,xhr,options);\n\t\t\t}\n\t\t\t\n\t\t\tresolve(data);\n\t\t}\n\t\telse\n\t\t\treject();\n\t}\n\txhr.onerror=function(err){reject(err);};\n\txhr.onabort=function(){reject();};\n\txhr.onprogress=function(e){\n\t\tdeferred.notifyWith(context,[e,xhr,options]);\n\t}\n\t\n\tvar evt = Event('ething.request.send');\n\tEThing.trigger(evt,[xhr, options]);\n\t\n\tif(evt.isDefaultPrevented()){\n\t\treject('Aborded');\n\t}\n\telse {\n\t\n\t\tajaxSendHandlers.forEach(function(handler){\n\t\t\thandler.call(context,xhr);\n\t\t});\n\t\t\n\t\txhr.send(body);\n\t\t\n\t}\n\t\n\treturn deferred.promise();\n}\n\n\n\n\n\nfunction isResourceMetaData(json){\n\treturn json.hasOwnProperty('id') && json.hasOwnProperty('type') && json.hasOwnProperty('name');\n}\n\nvar getClass = EThing.getClass = function (str){\n\tvar cc = str.split(/[.\\\\]/), obj = EThing;\n\tif(cc.length>0 && (typeof EThing[cc[0]] != 'undefined')){\n\t\treturn EThing[cc[0]];\n\t}\n\treturn undefined;\n}\n\nvar instanciate = EThing.instanciate = function (json){\n\tvar cl = getClass(json.type);\n\tif(!cl){\n\t\tif(json.extends.indexOf('Device') >= 0)\n\t\t\tcl = getClass('Device')\n\t}\n\treturn cl ? new (cl)(json) : false;\n}\n\n\n\n\n\n// if the argument is a json object describing a resource, then it converts it into a Resource instance, else it returns the object unchanged\nEThing.resourceConverter = function(data){\n\t\n\tif(typeof data == 'object' && data !== null){\n\t\t\n\t\tvar isArray = Array.isArray(data);\n\t\tif(!isArray) data = [data];\n\t\t\n\t\t// convert into resource instance\n\t\tdata = data.map(function(r){\n\t\t\treturn EThing.instanciate(r);\n\t\t}).filter(function(r){\n\t\t\treturn r;\n\t\t});\n\t\t\n\t\t\n\t\t// update the arbo collection with the new properties\n\t\t// and return the corresponding resource object(s)\n\t\tif(EThing.arbo)\n\t\t\tdata = EThing.arbo.update(data).resources;\n\t\t\n\t\tif(!isArray) data = data.length ? data[0] : null;\n\t}\n\t\n\treturn data;\n}\n\n\n\n\n/**\n * Make a HTTP request. The options object contains the following properties :\n *  - url {string} __required__ The url of the request. The API url will be prepended to relative URLs.\n *  - method {string} The HTTP request method to use. Default is GET.\n *  - data {string|object|Blob|ArrayBuffer|Buffer} The query string for GET request. The HTTP request body for POST|PATCH|PUT requests. If an object is given, it will be serialized into a query string.\n *  - contentType {string} When sending data to the server, use this content type. Default is 'application/octet-stream' if the data is an instance of ArrayBuffer or Buffer, if data is an instance of Blob, the default will be the type of the data itself, else 'application/x-www-form-urlencoded; charset=UTF-8'.\n *  - dataType {string} The type of data that you're expecting back from the server. See {@link http://xhr.spec.whatwg.org/#the-responsetype-attribute|XMLHttpRequest standard}.\n *  - headers {object} Additional HTTP request headers.\n *  - context {object} The value of this provided for the call of the callbacks\n *  - converter {function(data,XHR)} A function that returns the transformed value of the response\n *\n * \n * You may also give a callback as a second parameter. This callback is executed when the request is complete whether in failure or success.\n * On success, it receives the returned request data, as well as the XMLHttpRequest object.\n * On failure, the first parameter will be a Error object describing the error.\n * To check if a request is in failure :\n * <pre><code>EThing.request(options,function(data,xhr){\n *     if(data instanceof EThing.Error){\n *       // an error occurs, print the associated message\n *       console.log(data.message);\n *     }\n *   })`\n * </code></pre>\n *\n *\n * This function returns a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object} object.\n *\n * The done|fail|always functions take the same parameters than the {@link http://api.jquery.com/category/deferred-object/|jQuery version}.\n *\n *\n *\n * @method EThing.request\n * @param {string|object} options a set of key/value pairs that configure the request. If an URL is given, a GET request with the default options is made.\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}\n * @example\n * // GET request\n * EThing.request('/resources') // is equivalent to EThing.list()\n *\n * // pass an object to make more complex request\n * // store some data in a file\n * EThing.request({\n *   url: '/files/'+fileId,\n *   method: 'PUT',\n *   data: 'some content here ...',\n *   contentType: 'text/plain'\n * })\n * .done(function(file){\n *   console.log(\"the content was stored in the file \"+file.name());\n * })\n * .fail(function(error){\n *   console.log(\"an error occurs : \"+error.message);\n * });\n */\n// opt : same as ajax options or an url\nEThing.request = function(opt,callback){\n\tvar d = ajax(opt);\n\t\n\tif(typeof callback == 'function') {\n\t\td.always(function(){\n\t\t\tcallback.apply(this,Array.prototype.slice.call(arguments));\n\t\t});\n\t}\n\t\n\t// if sync return the result instead of the deferred object !\n\tif(opt.synchronous){\n\t\tvar result = null;\n\t\td.always(function(r){\n\t\t\tresult = r;\n\t\t});\n\t\treturn result;\n\t} else {\n\t\treturn d;\n\t}\n}\n\n\n/**\n*\n*/\nEThing.apiRequestPrefilter = function(handler){\n\tapiRequestPrefilterHandler = handler;\n}\n/**\n * Register a handler to be called just before API requests is sent.\n *\n * @method EThing.ajaxSend\n * @param {function(XHR)} handler The function to be invoked.\n */\nEThing.ajaxSend = function(handler){\n\tif(typeof handler == 'function'){\n\t\tajaxSendHandlers.push(handler);\n\t}\n}\n/**\n * Register a handler to be called when API requests complete.\n *\n * @method EThing.ajaxComplete\n * @param {function(data,XHR,options)} handler The function to be invoked.\n */\nEThing.ajaxComplete = function(handler){\n\tif(typeof handler == 'function'){\n\t\tajaxCompleteHandlers.push(handler);\n\t}\n}\n/**\n * Register a handler to be called when API requests complete successfully.\n *\n * @method EThing.ajaxSuccess\n * @param {function(data,XHR,options)} handler The function to be invoked.\n */\nEThing.ajaxSuccess = function(handler){\n\tif(typeof handler == 'function'){\n\t\tajaxSuccessHandlers.push(handler);\n\t}\n}\n/**\n * Register a handler to be called when API requests complete with an error.\n *\n * @method EThing.ajaxError\n * @param {function(data,XHR,options)} handler The function to be invoked.\n */\nEThing.ajaxError = function(handler){\n\tif(typeof handler == 'function'){\n\t\tajaxErrorHandlers.push(handler);\n\t}\n}\n\n\n\n\n\n\n/**\n * This function get the available resources. A filter may be given to retrieve resources with specific attributes (see the HTTP API for more details).\n * @method EThing.list\n * @param {string} [query] Query string for searching resources\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @example\n * // get all the resources\n * EThing.list().done(function(resources){\n *     console.log(resources);\n * })\n *\n * // get only File & Table resources\n * EThing.list('type == \"File\" or type == \"Table\"').done(function(resources){\n *     console.log(resources);\n * })\n */\nEThing.list = EThing.find = function(a,b)\n{\n\tvar query = null, callback = null;\n\t\n\tif(arguments.length==1){\n\t\tif(typeof arguments[0] == 'function')\n\t\t\tcallback = arguments[0];\n\t\telse\n\t\t\tquery = arguments[0];\n\t}\n\telse if(arguments.length>=2){\n\t\tquery = arguments[0];\n\t\tcallback = arguments[1];\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/resources?' + utils.param({'q':query}),\n\t\t'method': 'GET',\n\t\t'dataType': 'json',\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n};\n\n\n/**\n * Gets a resource by its id.\n *\n * @method EThing.get\n * @param {string|EThing.Resource} resourceIdentifier\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @example\n * // get a resource by its id\n * EThing.get(\"54516eb\").done(function(resource){\n *     console.log('the name is ' + resource.name());\n * })\n */\nEThing.get = function(a,b)\n{\n\tvar context;\n\tif(a instanceof EThing.Resource){\n\t\tcontext = a;\n\t\ta = a.id();\n\t}\n\telse if(!utils.isId(a)) {\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\n\t\treturn;\n\t}\n\t\n\tvar callback = b;\n\t\n\treturn EThing.request({\n\t\t'url': '/resources/' + a,\n\t\t'dataType': 'json',\n\t\t'method': 'GET',\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n};\n\n\n/**\n * Gets an object containing informations about space usage :\n *  - used {number} the amount of space used in bytes\n *  - quota_size {number} the maximum space authorized in bytes\n *\n * @method EThing.usage\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @example\n * // get the occupied space :\n * EThing.usage().done(function(usage){\n *     console.log('space used : ' + (100 * usage.used / usage.quota_size) );\n * })\n */\nEThing.usage = function(a)\n{\n\tvar callback = a;\n\t\n\treturn EThing.request({\n\t\t'url': '/usage',\n\t\t'dataType': 'json',\n\t\t'method': 'GET'\n\t},callback);\n};\n\n\n\n\n\n\n\n\n\n/*\n * AUTH\n */\n\nvar NoAuth = function(a){ return a; };\n\n\n// private\nvar _resource = null,\n\t_scope = null,\n\t_authType = null,\n\t_processAuth = NoAuth; // function(xhr|url) -> return xhr|url\n\n\n\n/**\n * @namespace EThing.auth\n */\n\nEThing.auth = {};\n\n\n\n/**\n * Returns true if the authentication process has been successful.\n * @method EThing.auth.isAuthenticated\n * @returns {boolean}\n */\nEThing.auth.isAuthenticated = function(){\n\treturn !!_authType;\n}\n\n/**\n * Returns the authenticated app. Only available with app's apikey authentication.\n * @method EThing.auth.getApp\n * @returns {EThing.App} the authenticated app or null.\n */\nEThing.auth.getApp = function(){\n\treturn _resource instanceof EThing.App ? _resource : null;\n}\n\n/**\n * Returns the authenticated app. Only available with devices's apikey authentication.\n * @method EThing.auth.getDevice\n * @returns {EThing.Device} the authenticated device or null.\n */\nEThing.auth.getDevice = function(){\n\treturn _resource instanceof EThing.Device ? _resource : null;\n}\n\n/**\n * Returns the authenticated resource. Only available with apikey authentication.\n * @method EThing.auth.getResource\n * @returns {EThing.Resource} the authenticated resource or null.\n */\nEThing.auth.getResource = function(){\n\treturn _resource;\n}\n\n/**\n * Returns the scope of the current authentication\n * @method EThing.auth.getScope\n * @returns {string} the scope. May be an empty string if no permissions is set. May be null if full permissions.\n */\nEThing.auth.getScope = function(){\n\treturn _scope;\n}\n\n\n\n/**\n * Reset authentication. You must restart an authentication process to make API calls again.\n * @method EThing.auth.reset\n */\nEThing.auth.reset = function(){\n\t_resource = null;\n\t_authType = null;\n\t_scope = null;\n\t_processAuth = NoAuth;\n}\n\n\n\n\nEThing.auth.setApiKey = function(apiKey){\n\t\n\tEThing.auth.reset();\n\t\n\t_processAuth = function(xhrOrUrl){\n\t\t\n\t\tif(typeof xhrOrUrl == 'string')\n\t\t\txhrOrUrl = EThing.utils.insertParam(xhrOrUrl, 'api_key', apiKey);\n\t\telse \n\t\t\txhrOrUrl.setRequestHeader('X-API-KEY', apiKey);\n\t\t\n\t\treturn xhrOrUrl;\n\t};\n\t\n};\n\nEThing.auth.setBasicAuth = function(login, password){\n\t\n\tEThing.auth.reset();\n\t\n\t_processAuth = function(xhrOrUrl){\n\t\t\n\t\tif(typeof xhrOrUrl == 'string')\n\t\t\txhrOrUrl = xhrOrUrl.replace(/\\/\\/([^:]+:[^@]+@)?/, '//'+login+':'+password+'@');\n\t\telse \n\t\t\txhrOrUrl.setRequestHeader(\"Authorization\", \"Basic \" + utils.btoa(login + \":\" + password));\n\t\t\n\t\treturn xhrOrUrl;\n\t};\n};\n\n\n\n\n/**\n * Initialize the eThing library.\n *\n * @method EThing.initialize\n * @param {Object} options\n * @param {number} options.apiUrl The URL of your eThing API (e.g. http://example.org/ething/api ).\n * @param {number} [options.apiKey] Authenticate with an API key.\n * @param {number} [options.login] Basic Authentication login (Should be used only server side i.e. NodeJS).\n * @param {number} [options.password] Basic Authentication password (Should be used only server side i.e. NodeJS).\n * @param {function(EThing.Error)} [errorFn] it is executed on authentication error.\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}\n * @fires EThing#ething.authenticated\n * @example\n *\n * EThing.initialize({\n *    apiUrl: 'http://example.org/ething/api',\n *    apiKey: 'a4e28b3c-1f05-4a62-95f7-c12453b66b3c'\n *  }, function(){\n *    // on authentication success\n *    alert('connected !');\n *  }, function(error) {\n *    // on authentication error\n *    alert(error.message);\n *  });\n *\n */\nEThing.initialize = function(options, successFn, errorFn){\n\t\n\tEThing.auth.reset();\n\t\n\toptions = extend({\n\t\tapiUrl: null,\n\t\t// auth apikey\n\t\tapiKey: null,\n\t\t// auth basic\n\t\tlogin: 'ething',\n\t\tpassword:null\n\t},options || {});\n\t\n\tif(options.apiUrl)\n\t\tEThing.config.apiUrl = options.apiUrl;\n\t\n\t\n\tif(options.apiKey)\n\t\tEThing.auth.setApiKey(options.apiKey);\n\telse if(options.login && options.password)\n\t\tEThing.auth.setBasicAuth(options.login, options.password);\n\t\n\treturn EThing.request({\n\t\t'url': '/auth',\n\t\t'dataType': 'json',\n\t\t'context': EThing,\n\t\t'converter': function(data){\n\t\t\t_authType = data.type;\n\t\t\tif(data.resource)\n\t\t\t\t_resource = EThing.instanciate(data.resource);\n\t\t\tif(data.scope)\n\t\t\t\t_scope = data.scope;\n\t\t}\n\t}).done(function(){\n\t\t\n\t\tauthenticatedCb_.forEach(function(cb){\n\t\t\tcb.call(EThing);\n\t\t});\n\t\t\n\t\tEThing.trigger('ething.authenticated');\n\t}).done(successFn).fail(errorFn);\n\t\n}\n\n\n/**\n * Register a handler to be executed once the authentication is complete.\n *\n * @method EThing.authenticated\n * @param {function()} callback it is executed on authentication success.\n *\n */\nvar authenticatedCb_ = [];\nEThing.authenticated = function(callback){\n\t\n\tif(typeof callback == 'function'){\n\t\tauthenticatedCb_.push(callback);\n\t\t\n\t\tif(EThing.auth.isAuthenticated()){\n\t\t\tcallback.call(EThing);\n\t\t}\n\t}\n}\n\nmodule.exports = EThing;\n\n","\nvar utils = require(\"./utils.js\");\nvar EventEngine = require(\"./eventEngine.js\");\nvar DeferredObject = require(\"./deferredObject.js\");\nvar EThing = require(\"./core.js\");\n\n\n/**\n * Base class of all the resources\n * @protected\n * @class\n * @memberOf EThing\n * @param {object} json\n */\nvar Resource = function (json)\n{\n\tDeferredObject.call(this);\n\t\n\tEventEngine(this);\n\t\n\tthis._fromJson(json, true);\n}\nutils.inherits(Resource,DeferredObject);\n\n// loader\nResource.prototype._fromJson = function(json, noTrigger){\n\t\n\tvar updated = this._json && json && this._json.modifiedDate && json.modifiedDate && this._json.modifiedDate !== json.modifiedDate;\n\tvar updatedKeys = [];\n\t\n\tjson = utils.extend({\n\t\tname:null,\n\t\tid:null,\n\t\ttype:null,\n\t\tcreatedBy:null,\n\t\tcreatedDate: 0,\n\t\tmodifiedDate: 0,\n\t\tdata: null,\n\t\tdescription: null\n\t}, json || {});\n\t\n\tif(!noTrigger && updated) {\n\t\t// list the kays that have been updated\n\t\tObject.keys(json).forEach(function(key){\n\t\t\tif((typeof this._json[key] === 'undefined') || !utils.isEqual(json[key],this._json[key])){\n\t\t\t\tupdatedKeys.push(key);\n\t\t\t}\n\t\t},this);\n\t}\n\t\n\tthis._json = json;\n\t\n\tif(!noTrigger && updated) {\n\t\t//console.log('resource updated '+this.name());\n\t\tthis.trigger('updated', [updatedKeys]);\n\t\tEThing.trigger('ething.resource.updated',[this, updatedKeys]);\n\t}\n\t\n\treturn updated;\n}\n\n\n/**\n *  Returns the representation of this instance\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {object}\n */\nResource.prototype.json = function(){\n\treturn this._json;\n}\n\n/**\n * Return true if the resource is of the given type.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @param {string} type\n * @returns {boolean}\n */\nResource.prototype.isTypeof = function(type) {\n\treturn this._json.extends.indexOf(type) !== -1;\n}\n\n// path accessors\n/**\n * Returns the name of this resource. A name is constructed as __PathName/FileName__.\n * To get only the FileName, see {@link EThing.Resource#basename}.\n * To get only the PathName, see {@link EThing.Resource#dirname}.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.name = function() {\n\treturn this._json.name;\n}\n/**\n * Returns the path of this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.dirname = function() {\n\treturn EThing.Resource.dirname(this._json.name);\n}\n/**\n * Returns the basename of this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.basename = function() {\n\treturn EThing.Resource.basename(this._json.name);\n}\n/**\n * Returns the extension of this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.extension = function(){\n\treturn EThing.Resource.extension(this._json.name);\n}\n/**\n * Returns the id of this resource. This id is unique and immutable.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.id = function(){\n\treturn this._json.id;\n}\n/**\n * Returns the id of the Resource which creates it if any, or returns null.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string|null}\n */\nResource.prototype.createdBy = function(){\n\treturn this._json.createdBy;\n}\n\n/**\n *  Returns the type of this resource :\n *  - \"File\"\n *  - \"Table\"\n *  - \"App\"\n *  - \"Device\"\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.type = function() {\n\treturn this._json.type;\n}\n\n/**\n *  Returns the types this resource depends on\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string[]}\n */\nResource.prototype.types = function() {\n\treturn this._json.extends || [];\n}\n\n/**\n *  Returns the type of this resource :\n *  - \"File\"\n *  - \"Table\"\n *  - \"App\"\n *  - \"Device\"\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.baseType = function() {\n\tt = this.types()\n\treturn t[t.length - 1];\n}\n\n/**\n * Create time for this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {Date}\n */\nResource.prototype.createdDate = function() {\n\treturn new Date(this._json.createdDate);\n}\nResource.prototype.ctime = function(){\n\treturn this.createdDate();\n}\n\n/**\n * Last time this resource was modified\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {Date}\n */\nResource.prototype.modifiedDate = function() {\n\treturn new Date(this._json.modifiedDate);\n}\nResource.prototype.mtime = function(){\n\treturn this.modifiedDate();\n}\n\n/**\n * Tells if this resource is publicly available.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {boolean|string}\n */\nResource.prototype.public = function() {\n\treturn this._json.public || false;\n}\n\n/**\n * Returns the data attached to this resource.\n * @memberof EThing.Resource\n * @param {string} [name] an optional data attribute name.\n * @param {} [defaultValue] a default value if the attribute was not found.\n * @this {EThing.Resource}\n * @returns {object|null}\n */\nResource.prototype.data = function(name, defaultValue) {\n\tif(typeof name == 'undefined')\n\t\treturn this._json.data;\n\telse {\n\t\treturn this._json.data.hasOwnProperty(name) ? this._json.data[name] : defaultValue;\n\t}\n}\n\n/**\n * Returns the attributes to this resource.\n * @memberof EThing.Resource\n * @param {string} [name] an optional attribute name.\n * @this {EThing.Resource}\n * @returns {object|null}\n */\nResource.prototype.attr = function(name) {\n\tif(typeof name == 'undefined')\n\t\treturn this._json;\n\telse {\n\t\treturn this._json.hasOwnProperty(name) ? this._json[name] : null;\n\t}\n}\n\n/**\n * Returns true if the attribute exists for this resource.\n * @memberof EThing.Resource\n * @param {string} name attribute name.\n * @this {EThing.Resource}\n * @returns {boolean}\n */\nResource.prototype.hasAttr = function(name) {\n\treturn this._json.hasOwnProperty(name);\n}\n\n/**\n * Returns the description of this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @returns {string}\n */\nResource.prototype.description = function() {\n\treturn this._json.description || \"\";\n}\n\n// resource modificators (async)\n/**\n * Remove this resource.\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @param {Boolean} [removeChildren] When true, the children are also removed. Default to false.\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Resource} The instance on which this method was called.\n * @fires EThing#ething.resource.removed\n * @example\n * resource.remove().done(function(){\n *   // the resource was successfully removed\n * });\n */\nResource.prototype.remove = function(removeChildren, callback){\n\treturn this.deferred(function(){\n\t\t\treturn Resource.remove(this, callback);\n\t\t});\n}\n\nResource.prototype.update = function(callback){\n\treturn this.deferred(function(){\n\t\t\treturn EThing.get(this, callback);\n\t\t});\n}\n\n/**\n * Update this resource attributes\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @param {} properties\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Resource} The instance on which this method was called.\n * @example\n * resource.set({\n *   name: \"newName.txt\"\n * }).done(function(){\n *   console.log(\"the resource was successfully renamed to :\"+this.name());\n * });\n */\nResource.prototype.set = function(properties, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Resource.set.apply(EThing, args);\n\t\t});\n}\n/**\n * Attaches persistant data to this resource\n * @memberof EThing.Resource\n * @this {EThing.Resource}\n * @param {object} data\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Resource} The instance on which this method was called.\n * @example\n * resource.setData({\n *   \"key\": \"value\"\n * }).done(function(){\n *   // success\n * });\n * \n * // you can also write :\n * resource.setData(\"key\", \"value\").done(function(){\n *   // success\n * });\n */\nResource.prototype.setData = function(data, callback){\n\t\n\tif(typeof data === 'string' && typeof callback != 'function'){\n\t\tvar key = data, value = callback, callback = arguments[2];\n\t\tdata = {};\n\t\tdata[key] = value;\n\t}\n\t\n\treturn this.set({'data':data},callback);\n}\n\n\n\n\n\n\n\n\n/*\nResource,callback\n*/\nResource.remove = function(a,removeChildren,callback)\n{\n\tvar context;\n\tif(a instanceof Resource){\n\t\tcontext = a;\n\t\ta = a.id();\n\t}\n\telse if(!utils.isId(a)) {\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\n\t\treturn;\n\t}\n\t\n\tif(arguments.length==2 && typeof removeChildren === 'function'){\n\t\tcallback = removeChildren;\n\t\tremoveChildren = false;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/resources/' + a + '?' + utils.param({'children':removeChildren}),\n\t\t'method': 'DELETE',\n\t\t'context': context\n\t},callback).done(function(){\n\t\tEThing.trigger('ething.resource.removed',[a]);\n\t});\n};\n\n\n\n/*\nResource,data,callback\n*/\nResource.set = function(a,b,c){\n\tvar context;\n\t\n\tif(!utils.isPlainObject(b) || !b){\n\t\tthrow 'Second argument must be a unempty object !';\n\t\treturn;\n\t}\n\t\n\tif(a instanceof Resource){\n\t\tcontext = a;\n\t\ta = a.id();\n\t}\n\telse if(!utils.isId(a)) {\n\t\tthrow \"First argument must be a Resource object or a Resource id : \"+a;\n\t\treturn;\n\t}\n\t\n\tvar callback = c;\n\t\n\treturn EThing.request({\n\t\t'url': '/resources/' + a,\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': b,\n\t\t'context': context,\n\t\t'headers': {\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\n\t\t},\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n};\n\n\n\n\n\n\n\n/*\n* TOOLS\n*/\nResource.dirname = function(f) {\n\tvar s = f.replace(/\\/[^\\/]*\\/?$/, '');\n\treturn ( s === f ) ? \"\" : s;\n}\nResource.basename = function(f) {\n\treturn f.replace( /.*\\//, '' );\n}\nResource.extension = function(f){\n\treturn f.indexOf('.')>=0 ? f.split('.').pop() : '';\n}\nResource.fnmatch = function fnmatch(pattern, path) {\n\t\n\tvar patternTab = pattern.split(' ');\n\tvar parsedPattern, regexp;\n\t\n\tfor(var i=0; i<patternTab.length; i++){\n\t\tif(patternTab[i] == '') continue;\n\t\t\n\t\tparsedPattern = '^' + patternTab[i].replace(/\\//g, '\\\\/').\n\t\treplace(/\\*\\*/g, '(\\\\/[^\\\\/]+)*').\n\t\treplace(/\\*/g, '[^\\\\/]+').\n\t\treplace(/((?!\\\\))\\?/g, '$1.') + '$';\n\t\t\n\t\tparsedPattern = '^' + parsedPattern + '$';\n\t\t\n\t\tregexp = new RegExp(parsedPattern);\n\t\tif( path.match(regexp) != null ) return true;\n\t}\n\treturn false;\n};\n\n\nEThing.Resource = Resource;\n\nmodule.exports = Resource;\n","var EThing = require(\"./core.js\");\nvar utils = require(\"./utils.js\");\nvar Resource = require(\"./resource.js\");\n\n\n\n\n/* private constructor */\n/* base class of device */\nvar Device = function(json)\n{\n\tResource.call(this, json);\n\t\n\t(this._json.methods || []).forEach(function(operationId){\n\t\tif(typeof this[operationId] == 'undefined'){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tthis[operationId] = function(data, binary, callback){\n\t\t\t\tvar args = [].slice.call(arguments);\n\t\t\t\treturn this.deferred(function(){\n\t\t\t\t\targs.unshift(operationId);\n\t\t\t\t\targs.unshift(this);\n\t\t\t\t\treturn Device.execute.apply(EThing, args);\n\t\t\t\t});\n\t\t\t};\n\t\t\t\n\t\t\tthis[operationId].getApi = function(callback){\n\t\t\t\treturn Device.getApi(self, operationId, callback);\n\t\t\t};\n\t\t\t\n\t\t\tthis[operationId].executeUrl = function(data){\n\t\t\t\treturn self.executeUrl(operationId, data);\n\t\t\t};\n\t\t}\n\t}, this);\n}\nutils.inherits(Device, Resource);\n\n\n/**\n * \n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {object|null} Return either an object containing information about the location (coordinates, place, room ...) or null if no location is defined for this device.\n */\nDevice.prototype.location = function() {\n  return this._json.location || null;\n}\n\n/**\n * \n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {boolean} Return true if the device is connected.\n */\nDevice.prototype.connected = function() {\n\treturn !!this._json.connected;\n}\n\n/**\n * \n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {Date|null}\n */\nDevice.prototype.lastSeenDate = function() {\n  return (typeof this._json.lastSeenDate == 'string') ? new Date(this._json.lastSeenDate) : null;\n}\n\n/**\n * \n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {boolean}\n */\nDevice.prototype.hasBattery = function() {\n  return (typeof this._json.battery == \"number\") && this._json.battery >= 0 ;\n}\n\n/**\n * \n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {number}\n */\nDevice.prototype.battery = function() {\n  return this.hasBattery() ? this._json.battery : null ;\n}\n\n/**\n * List the available methods on this device.\n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {string[]}\n */\nDevice.prototype.methods = function(){\n\treturn this._json.methods || [];\n}\n\n/**\n * List the available interfaces on this device.\n * @memberof EThing.Device\n * @this {EThing.Device}\n * @returns {string[]}\n */\nDevice.prototype.interfaces = function(){\n\treturn this._json.interfaces || [];\n}\n\n\n/**\n * Execute an operation on this device.\n * @memberof EThing.Device\n * @this {EThing.Device}\n * @param {string} operationId\n * @param {object|array|anything} [data] the optional arguments required by the operation\n * @param {boolean} [binary] if true, return the content as binary data (as Blob in a browser, or Buffer in NodeJs). The arguments must be provided.\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Device} The instance on which this method was called.\n * @example\n * // if this device is a thermometer :\n * device.execute('getTemperature').done(function(data){\n *   // success, handle the data here\n * });\n *\n * // if this device is a switch :\n * device.execute('setState', {\n * \t state: true\n * });\n *\n * // you can also pass the arguments as an array :\n * device.execute('setState', [true]);\n * \n * // or as is :\n * device.execute('setState', true);\n * \n * \n * // you may also do :\n * device.getTemperature().done(function(data){\n *   // success, handle the data here\n * });\n *\n */\nDevice.prototype.execute = function(){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Device.execute.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Returns an url for executing an operation.\n * @memberof EThing.Device\n * @this {EThing.Device}\n * @param {string} operationId\n * @param {object} [data] the optional data required by the operation\n * @returns {string} The url.\n * @example\n * \n * var image = new Image();\n * image.src = device.executeUrl('getImage');\n * document.body.appendChild(image);\n *\n */\nDevice.prototype.executeUrl = function(operationId, data){\n\tvar url = 'devices/'+this.id()+'/call/'+operationId;\n\t\n\tif(isPlainObject(data) && Object.keys(data).length !== 0){\n\t\turl += '?' + utils.param(data);\n\t}\n\t\n\treturn EThing.toApiUrl(url,true);\n}\n\n/**\n * Retrieve information about a specific method or all the methods available for this device.\n * @memberof EThing.Device\n * @this {EThing.Device}\n * @param {string} [operationId] if set, only information about this operation will be returned\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Device} The instance on which this method was called.\n *\n */\nDevice.prototype.getApi = function(operationId, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\targs.unshift(this);\n\t\treturn Device.getApi.apply(EThing, args);\n\t});\n}\n\n\n\n\n\n/*\ndevice, operationId[, data ]\n*/\nDevice.execute = function(device, operationId, data, binary, callback){\n\t\n\tvar context;\n\t\n\tif(device instanceof Device){\n\t\tcontext = device;\n\t\tdevice = device.id();\n\t}\n\telse if(utils.isId(device))\n\t\tdevice = device;\n\telse {\n\t\tthrow \"First argument must be a Device object or a Device id !\";\n\t\treturn;\n\t}\n\t\n\tif(arguments.length == 4){\n\t\t\n\t\tif(typeof binary == 'function'){\n\t\t\tcallback = binary;\n\t\t\tbinary = undefined;\n\t\t}\n\t\t\n\t} else if(arguments.length == 3){\n\t\t\n\t\tif(typeof data == 'function'){\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\t\t\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/devices/' + device + '/call/' + operationId,\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': typeof data != 'undefined' && data!==null ? JSON.stringify(data) : undefined,\n\t\t'dataType': binary ? (utils.isNode ? 'buffer' : 'blob') : 'auto',\n\t\t'context': context\n\t},callback);\n\t\n};\n\n\n/*\ndevice[, operationId]\n*/\nDevice.getApi = function(device, operationId, callback){\n\t\n\tvar context;\n\t\n\tif(typeof operationId == 'function' && typeof callback == 'undefined'){\n\t\tcallback = operationId;\n\t\toperationId = undefined;\n\t}\n\t\n\tif(device instanceof Device){\n\t\tcontext = device;\n\t\tdevice = device.id();\n\t}\n\telse if(utils.isId(device))\n\t\tdevice = device;\n\telse {\n\t\tthrow \"First argument must be a Device object or a Device id !\";\n\t\treturn;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/devices/' + device + '/api' + (operationId?('/'+operationId):''),\n\t\t'method': 'GET',\n\t\t'context': context,\n\t\t'dataType': 'json'\n\t},callback);\n\t\n};\n\n\n/**\n * Creates a new device\n *\n * @method EThing.Device.create\n * @param {string} type the type of the device to create (ie: SSH, MQTT ...)\n * @param {object} attributes\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @fires EThing#ething.device.created\n * @example\n * EThing.Device.create('SSH', {\n *   host: \"localhost\",\n *   auth: {\n *     user: \"foo\",\n *     password: \"bar\"\n *   }\n * }).done(function(resource){\n *     console.log('the new SSH device has been created');\n * })\n */\nDevice.create = function(type, a,callback){\n\t\n\ta.type = type;\n\t\n\treturn EThing.request({\n\t\t'url': '/devices',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': a,\n\t\t'converter': EThing.resourceConverter\n\t},callback).done(function(r){\n\t\tEThing.trigger('ething.device.created',[r]);\n\t});\n\t\n};\n\nEThing.Device = Device;\n\nmodule.exports = Device;\n\n","\n\nfunction foreach(arr, handler) {\n\tif (Array.isArray(arr)) {\n\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\thandler(arr[i]);\n\t\t}\n\t}\n\telse\n\t\thandler(arr);\n}\n\nfunction D(fn) {\n\tvar status = 'pending',\n\t\tdoneFuncs = [],\n\t\tfailFuncs = [],\n\t\tprogressFuncs = [],\n\t\tresultArgs = null,\n\n\ttuples = [\n\t\t\t// action, add listener,\n\t\t\t[ \"resolve\", \"done\"],\n\t\t\t[ \"reject\", \"fail\"],\n\t\t\t[ \"notify\", \"progress\"]\n\t\t],\n\t\t\n\tpromise = {\n\t\tdone: function() {\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t// skip any undefined or null arguments\n\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(arguments[i])) {\n\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\tif (status === 'resolved') {\n\t\t\t\t\t\t\tarr[j].apply(this, resultArgs);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdoneFuncs.push(arr[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\tif (status === 'resolved') {\n\t\t\t\t\t\targuments[i].apply(this, resultArgs);\n\t\t\t\t\t}\n\n\t\t\t\t\tdoneFuncs.push(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t},\n\n\t\tfail: function() {\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t// skip any undefined or null arguments\n\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(arguments[i])) {\n\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\tif (status === 'rejected') {\n\t\t\t\t\t\t\tarr[j].apply(this, resultArgs);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfailFuncs.push(arr[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\tif (status === 'rejected') {\n\t\t\t\t\t\targuments[i].apply(this, resultArgs);\n\t\t\t\t\t}\n\n\t\t\t\t\tfailFuncs.push(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t},\n\n\t\talways: function() {\n\t\t\treturn this.done.apply(this, arguments).fail.apply(this, arguments);\n\t\t},\n\n\t\tprogress: function() {\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\t// skip any undefined or null arguments\n\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(arguments[i])) {\n\t\t\t\t\tvar arr = arguments[i];\n\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\t\tprogressFuncs.push(arr[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// immediately call the function if the deferred has been resolved\n\t\t\t\t\tif (status === 'pending') {\n\t\t\t\t\t\tprogressFuncs.push(arguments[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t},\n\n\t\t/*then: function() {\n\t\t\t// fail callbacks\n\t\t\tif (arguments.length > 1 && arguments[1]) {\n\t\t\t\tthis.fail(arguments[1]);\n\t\t\t}\n\n\t\t\t// done callbacks\n\t\t\tif (arguments.length > 0 && arguments[0]) {\n\t\t\t\tthis.done(arguments[0]);\n\t\t\t}\n\n\t\t\t// notify callbacks\n\t\t\tif (arguments.length > 2 && arguments[2]) {\n\t\t\t\tthis.progress(arguments[2]);\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t},*/\n\t\t\n\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\tvar fns = arguments;\n\t\t\treturn D( function( newDefer ) {\n\t\t\t\t\n\t\t\t\ttuples.forEach(function( tuple, i ) {\n\t\t\t\t\tvar fn = (typeof fns[ i ] == 'function' ) && fns[ i ];\n\n\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\tif ( returned && (typeof returned.promise == 'function' ) ) {\n\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\tthis === promise ? newDefer.promise() : this,\n\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tfns = null;\n\t\t\t} ).promise();\n\t\t},\n\n\t\tpromise: function(obj) {\n\t\t\tif (obj == null) {\n\t\t\t\treturn promise;\n\t\t\t} else {\n\t\t\t\tfor (var i in promise) {\n\t\t\t\t\tobj[i] = promise[i];\n\t\t\t\t}\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t},\n\n\t\tstate: function() {\n\t\t\treturn status;\n\t\t},\n\n\t\tdebug: function() {\n\t\t\tconsole.log('[debug]', doneFuncs, failFuncs, status);\n\t\t},\n\n\t\tisRejected: function() {\n\t\t\treturn status === 'rejected';\n\t\t},\n\n\t\tisResolved: function() {\n\t\t\treturn status === 'resolved';\n\t\t}\n\t},\n\n\tdeferred = {\n\t\tresolveWith: function(context) {\n\t\t\tif (status === 'pending') {\n\t\t\t\tstatus = 'resolved';\n\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\tfor (var i = 0; i < doneFuncs.length; i++) {\n\t\t\t\t\tdoneFuncs[i].apply(context, args);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\trejectWith: function(context) {\n\t\t\tif (status === 'pending') {\n\t\t\t\tstatus = 'rejected';\n\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\tfor (var i = 0; i < failFuncs.length; i++) {\n\t\t\t\t\tfailFuncs[i].apply(context, args);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tnotifyWith: function(context) {\n\t\t\tif (status === 'pending') {\n\t\t\t\tvar args = resultArgs = (arguments.length > 1) ? arguments[1] : [];\n\t\t\t\tfor (var i = 0; i < progressFuncs.length; i++) {\n\t\t\t\t\tprogressFuncs[i].apply(context, args);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tresolve: function() {\n\t\t\treturn this.resolveWith(this, arguments);\n\t\t},\n\n\t\treject: function() {\n\t\t\treturn this.rejectWith(this, arguments);\n\t\t},\n\n\t\tnotify: function() {\n\t\t\treturn this.notifyWith(this, arguments);\n\t\t}\n\t}\n\n\tvar obj = promise.promise(deferred);\n\n\tif (fn) {\n\t\tfn.apply(obj, [obj]);\n\t}\n\n\treturn obj;\n}\n\nD.when = function() {\n\tif (arguments.length < 2) {\n\t\tvar obj = arguments.length ? arguments[0] : undefined;\n\t\tif (obj && (typeof obj.isResolved === 'function' && typeof obj.isRejected === 'function')) {\n\t\t\treturn obj.promise();\t\t\t\n\t\t}\n\t\telse {\n\t\t\treturn D().resolve(obj).promise();\n\t\t}\n\t}\n\telse {\n\t\treturn (function(args){\n\t\t\tvar df = D(),\n\t\t\t\tsize = args.length,\n\t\t\t\tdone = 0,\n\t\t\t\trp = new Array(size);\t// resolve params: params of each resolve, we need to track down them to be able to pass them in the correct order if the master needs to be resolved\n\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\t(function(j) {\n\t\t\t\t\tvar obj = null;\n\t\t\t\t\t\n\t\t\t\t\tif (args[j].done) {\n\t\t\t\t\t\targs[j].done(function() { rp[j] = (arguments.length < 2) ? arguments[0] : arguments; if (++done == size) { df.resolve.apply(df, rp); }})\n\t\t\t\t\t\t.fail(function() { df.reject(arguments); });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj = args[j];\n\t\t\t\t\t\targs[j] = new Deferred();\n\t\t\t\t\t\t\n\t\t\t\t\t\targs[j].done(function() { rp[j] = (arguments.length < 2) ? arguments[0] : arguments; if (++done == size) { df.resolve.apply(df, rp); }})\n\t\t\t\t\t\t.fail(function() { df.reject(arguments); }).resolve(obj);\n\t\t\t\t\t}\n\t\t\t\t})(i);\n\t\t\t}\n\n\t\t\treturn df.promise();\n\t\t})(arguments);\n\t}\n}\n\nmodule.exports = D;\n\n","\nvar Deferred = require(\"./deferred.js\");\n\n\t\n// deferred engine\nvar DeferredObject = function(){\n\t\n\tvar resolvedDfr = Deferred().resolve(),\n\t\tqueue = [],\n\t\tself = this;\n\t\n\t\n\t['done','fail','always','progress','then','state','isRejected','isResolved'].forEach(function(fctname){\n\t\tthis[fctname] = function(){\n\t\t\t// get last deferred object in queue\n\t\t\tvar dfr = queue.length ? queue[queue.length-1].dfr : resolvedDfr;\n\t\t\t\n\t\t\tvar r = dfr[fctname].apply(self,Array.prototype.slice.call(arguments));\n\t\t\t\n\t\t\tif(typeof r == 'object' && fctname!=='then'){\n\t\t\t\t// dfr object\n\t\t\t\treturn self;\n\t\t\t} else {\n\t\t\t\treturn r; // state , isRejected, isResolved, then\n\t\t\t}\n\t\t}\n\t}, this);\n\tthis.promise = function(){\n\t\treturn self;\n\t}\n\t\n\tfunction processQueue(){\n\t\t\n\t\tfor(var i=0; i<queue.length; i++){\n\t\t\t\n\t\t\tvar dfr = queue[i].dfr,\n\t\t\t\tpending = queue[i].pending,\n\t\t\t\tfn = queue[i].fn;\n\t\t\t\n\t\t\tif(pending){\n\t\t\t\t\n\t\t\t\tqueue[i].pending = false;\n\t\t\t\t\n\t\t\t\tfn.call(self,self)\n\t\t\t\t\t.done(function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\t\t\t\n\t\t\t\t\t\tdfr.resolveWith(self,args);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(){\n\t\t\t\t\t\tdfr.rejectWith(self,Array.prototype.slice.call(arguments));\n\t\t\t\t\t})\n\t\t\t\t\t.progress(function(){\n\t\t\t\t\t\tdfr.notifyWith(self,Array.prototype.slice.call(arguments));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tif(dfr.isResolved() || dfr.isRejected()){\n\t\t\t\t\tqueue.splice(i, 1); // remove finished actions\n\t\t\t\t\ti--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// else busy, wait for that element to finish\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\t\t\n\t\t}\n\t}\n\t\n\tthis.deferred = function(action){\n\t\t\n\t\t// bind a new deferred object to this new action\n\t\tvar dfr = new Deferred();\n\t\t\n\t\t\n\t\tdfr.always(function(){\n\t\t\t// execute the next action\n\t\t\tprocessQueue();\n\t\t});\n\t\t\n\t\t\n\t\t// add this action to the queue \n\t\tqueue.push({\n\t\t\tfn: action,\n\t\t\tdfr: dfr,\n\t\t\tpending: true\n\t\t});\n\t\t\n\t\tprocessQueue();\n\t\t\n\t\treturn this; // chainable\n\t\t\n\t};\n\t\n}\n\nmodule.exports = DeferredObject;\n","\nvar Event = require(\"./event.js\");\n\nfunction EventEngine(obj){\n\t\n\tvar event_map = {};\n\t\n\tobj.on = function(events, handler) {\n\t\tif(typeof handler == 'function'){\n\t\t\tevents = events.split(' ');\n\t\t\tfor(var i=0; i<events.length; i++){\n\t\t\t\tvar event = events[i];\n\t\t\t\tif(event.length){\n\t\t\t\t\tif(!event_map[event]) event_map[event] = [];\n\t\t\t\t\tevent_map[event].push(handler);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tobj.off = function(events, handler) {\n\t\tevents = events.split(' ');\n\t\tfor(var i=0; i<events.length; i++){\n\t\t\tvar event = events[i];\n\t\t\tif(event.length && event_map[event]){\n\t\t\t\tif(typeof handler == 'function'){\n\t\t\t\t\tfor(var j=0; j<event_map[event].length; j++){\n\t\t\t\t\t\tif(event_map[event][j]===handler){\n\t\t\t\t\t\t\tevent_map[event].splice(j, 1);\n\t\t\t\t\t\t\tj--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tevent_map[event] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tobj.one = function(events, handler) {\n\t\tif(typeof handler == 'function'){\n\t\t\tobj.on(events, function(){\n\t\t\t\tobj.off(events,handler);\n\t\t\t\thandler.apply(this,Array.prototype.slice.call(arguments));\n\t\t\t});\n\t\t}\n\t}\n\t\n\tobj.trigger = function(event, extraParameters){\n\t\tif(typeof event === 'string')\n\t\t\tevent = Event(event);\n\t\t\n\t\tvar type = event.type,\n\t\t\th = event_map[type] || [];\n\t\t\n\t\tfor(var i=0; i<h.length; i++){\n\t\t\tvar args = [event];\n\t\t\tif(Array.isArray(extraParameters))\n\t\t\t\targs = args.concat(extraParameters);\n\t\t\th[i].apply(obj,args);\n\t\t\t\n\t\t\tif(event.isImmediatePropagationStopped() || event.isPropagationStopped())\n\t\t\t\tbreak;\n\t\t}\n\t\treturn event;\n\t}\n\t\n\t\n}\n\nmodule.exports = EventEngine;","var utils = require(\"./utils.js\");\n\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n\n/*\nEvent object\n*/\n\nvar Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof Event ) ) {\n\t\treturn new Event( src, props );\n\t}\n\n\t// Event type\n\tthis.type = src;\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tutils.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = Date.now();\n\t\n};\n\nEvent.prototype = {\n\tconstructor: Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tthis.isDefaultPrevented = returnTrue;\n\t},\n\tstopPropagation: function() {\n\t\tthis.isPropagationStopped = returnTrue;\n\t},\n\tstopImmediatePropagation: function() {\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\t\tthis.stopPropagation();\n\t}\n};\n\n\n\n\t\nmodule.exports = Event;\n\n","var EThing = require(\"../core.js\");\nvar utils = require(\"../utils.js\");\nvar Device = require(\"../device.js\");\n\nDevice.MQTT = {};\n\nDevice.MQTT.getSubscription = function(dev, callback){\n\tvar context;\n\t\n\tif(dev instanceof Device){\n\t\tcontext = dev;\n\t\tdev = dev.id();\n\t}\n\telse if(!utils.isId(dev))\n\t\tthrow \"First argument must be a Device object or a Device id !\";\n\t\n\treturn EThing.request({\n\t\t'url': '/devices/' + dev + '/subscription',\n\t\t'dataType': 'json',\n\t\t'context': context,\n\t\t'converter': function(subs){\n\t\t\tif(context instanceof Device){\n\t\t\t\t// attach this specification to the device\n\t\t\t\tcontext.subscription = subs;\n\t\t\t}\n\t\t\treturn subs;\n\t\t}\n\t},callback);\n\t\n};\n\n\nmodule.exports = Device.MQTT;\n\n","var EThing = require(\"../core.js\");\nvar utils = require(\"../utils.js\");\nvar Device = require(\"../device.js\");\n\n\nDevice.Http = {};\n\n\nDevice.Http.getSpecification = function(dev, callback){\n\tvar context;\n\t\n\tif(dev instanceof Device){\n\t\tcontext = dev;\n\t\tdev = dev.id();\n\t}\n\telse if(!utils.isId(dev))\n\t\tthrow \"First argument must be a Device object or a Device id !\";\n\t\n\treturn EThing.request({\n\t\t'url': '/devices/' + dev + '/specification',\n\t\t'dataType': 'json',\n\t\t'context': context,\n\t\t'converter': function(spec){\n\t\t\tif(context instanceof Device){\n\t\t\t\t// attach this specification to the device\n\t\t\t\tcontext.swaggerSpecification = spec;\n\t\t\t}\n\t\t\treturn spec;\n\t\t}\n\t},callback);\n\t\n};\n\nmodule.exports = Device.Http;\n","\nvar EThing = require(\"./core.js\");\nvar utils = require(\"./utils.js\");\nvar Resource = require(\"./resource.js\");\nvar Deferred = require(\"./deferred.js\");\n\n/**\n * Constructs an App instance from an object decribing an application. Should not be called directly. Use instead {@link EThing.list}.\n * @protected\n * @class The App resource handle an application\n * @memberof EThing\n * @extends EThing.Resource\n * @param {object} json\n */\nvar App = function(json)\n{\n\tResource.call(this, json);\n}\nutils.inherits(App, Resource);\n\n// specific methods\n\n/**\n * Returns the size of this application in bytes.\n * @memberof EThing.App\n * @this {EThing.App}\n * @returns {number}\n */\nApp.prototype.size = function() {\n\treturn this._json.size || 0;\n}\n\n/**\n * If this application has an icon, it returns his link, else it returns null.\n * \n * @memberof EThing.App\n * @this {EThing.App}\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\n * @returns {string|null}\n * @example\n * // the simple way\n * var image = new Image();\n * image.src = imageFile.iconLink(true);\n * document.body.appendChild(image);\n *\n * // the hard way\n * EThing.request({\n *   url: imageFile.iconLink(),\n *   dataType: \"blob\"\n * }).done(function(blobData){\n *   // success\n *   var image = new Image();\n *   image.src = window.URL.createObjectURL( blobData );\n *   \n *   document.body.appendChild(image);\n * });\n */\nApp.prototype.iconLink = function(auth) {\n\treturn this._json.hasIcon ? EThing.toApiUrl('apps/'+this.id()+'/icon',auth) : null;\n}\n\n/**\n * Returns the link to access the content.\n * @memberof EThing.App\n * @this {EThing.App}\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\n * @returns {string}\n * @example\n * // using EThing.request() :\n * EThing.request(app.getContentUrl()).done(function(content){\n *   // success\n *   console.log('content as text : '+content);\n * });\n */\nApp.prototype.getContentUrl = function(auth) {\n\treturn EThing.toApiUrl('apps/'+this.id(),auth);\n}\n\n/**\n * Last time the content of this resource was modified\n * @memberof EThing.App\n * @this {EThing.App}\n * @returns {Date}\n */\nApp.prototype.contentModifiedDate = function() {\n\treturn new Date(this._json.contentModifiedDate);\n}\n\n/**\n * Return the scope of this app.\n * @memberof EThing.App\n * @this {EThing.App}\n * @returns {string}\n */\nApp.prototype.scope = function() {\n  return (typeof this._json.scope == 'string') ? this._json.scope : '';\n}\n\n/**\n * Return the version of this app or null if this app is not versioned.\n * @memberof EThing.App\n * @this {EThing.App}\n * @returns {string}\n */\nApp.prototype.version = function() {\n  return this._json.version || null;\n}\n\n/**\n * Gets the code of this application in text/html.\n * @memberof EThing.App\n * @this {EThing.App}\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.App} The instance on which this method was called.\n */\nApp.prototype.read = function(callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn App.read.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Writes some HTML script in this application. Only available for {@link EThing.App#isEditable|editable app}\n * @memberof EThing.App\n * @this {EThing.App}\n * @param {string} data the full HTML script\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.App} The instance on which this method was called.\n */\nApp.prototype.write = function(data, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn App.write.apply(EThing, args);\n\t\t});\n}\n\n\n\n\n/**\n * Creates a new Application from the following attributes :\n *   - name {string} __ required__ the name of the application\n *   - description {string} a string describing this application \n *   - data {object} key/value pairs to attach to this application\n *   - content {string} the full base64 encoded script\n *   - icon {string} the base64 encoded icon of this application\n *\n * @method EThing.App.create\n * @param {object} attributes\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @fires EThing#ething.app.created\n * @example\n * EThing.App.create({\n *   name: \"myApp\",\n *   content: \"<html><body>hello world !</body></html>\",\n *   icon: <icon_data>, // File, Blob, ArrayBuffer or base64 string\n *   scope: \"resource:read profile:read\",\n * }).done(function(resource){\n *     console.log('the new app can be accessed through : ' + resource.url());\n * })\n */\nApp.create = function(json,callback){\n\t\n\t// encode the content to base64 string\n\tif(json.content) json.content = utils.btoa(json.content);\n\t\n\t// encode the icon into base64 string\n\tif(json.icon){\n\t\t\n\t\tif(json.icon instanceof utils.Blob){\n\t\t\t// asynchronous\n\t\t\t\n\t\t\tif(!utils.FileReader)\n\t\t\t\tthrow 'no FileReader instance found';\n\t\t\tvar reader = new utils.FileReader(), dfr = Deferred();\n\t\t\treader.onloadend = function() {\n\t\t\t  json.icon = reader.result.substr(reader.result.indexOf(';base64,')+8);\n\t\t\t  \n\t\t\t  EThing.request({\n\t\t\t\t'url': '/apps',\n\t\t\t\t'dataType': 'json',\n\t\t\t\t'method': 'POST',\n\t\t\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t\t\t'data': json,\n\t\t\t\t'converter': EThing.resourceConverter\n\t\t\t  }).done(function(){\n\t\t\t\tdfr.resolveWith(this, Array.prototype.slice.call(arguments));\n\t\t\t  }).fail(function(){\n\t\t\t\tdfr.rejectWith(this, Array.prototype.slice.call(arguments));\n\t\t\t  });\n\t\t\t  \n\t\t\t}\n\t\t\treader.readAsDataURL(json.icon);\n\t\t\t\n\t\t\treturn dfr.done(callback).done(function(){\n\t\t\t\tEThing.trigger('ething.app.created',[this]);\n\t\t\t}).promise();\n\t\t}\n\t\telse if(json.icon instanceof ArrayBuffer){\n\t\t\tvar binary = '',\n\t\t\t\tbytes = new Uint8Array(json.icon);\n\t\t\tfor (var i = 0; i < bytes.byteLength; i++) {\n\t\t\t\tbinary += String.fromCharCode( bytes[ i ] );\n\t\t\t}\n\t\t\tjson.icon = utils.btoa(binary);\n\t\t}\n\t\telse if(json.icon != 'string')\n\t\t\tthrow 'invalid type for the icon attribute';\n\t\t\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/apps',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': json,\n\t\t'converter': EThing.resourceConverter\n\t},callback).done(function(r){\n\t\tEThing.trigger('ething.app.created',[r]);\n\t});\n\t\n};\n\n\n/*\nResource,callback\n*/\nApp.read = function(a,b)\n{\n\tvar file_id = null, context;\n\tif(a instanceof App){\n\t\tcontext = a;\n\t\tfile_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\tfile_id = a;\n\telse {\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t\treturn;\n\t}\n\t\n\tvar callback = b;\n\t\n\treturn EThing.request({\n\t\t'url': '/apps/' + file_id,\n\t\t'method': 'GET',\n\t\t'dataType': 'text',\n\t\t'context': context\n\t},callback);\n};\n\n/*\nResource,data,callback\n*/\nApp.write = function(a,b,c)\n{\n\tvar file_id = null, context;\n\tif(a instanceof App){\n\t\tcontext = a;\n\t\tfile_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\tfile_id = a;\n\telse {\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t\treturn;\n\t}\n\t\n\tif( typeof b != 'string') {\n\t\tthrow \"Second argument must be a string !\";\n\t\treturn;\n\t}\n\t\n\tvar callback = c;\n\t\n\treturn EThing.request({\n\t\t'url': '/apps/' + file_id,\n\t\t'dataType': 'json',\n\t\t'method': 'PUT',\n\t\t'contentType': (typeof b == 'string') ? 'text/plain' : 'application/octet-stream',\n\t\t'data': b,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n};\n\n/*\nResource,callback\nreturn data as blob\n*/\nApp.getIcon = function(a,b)\n{\n\tvar file_id = null, context;\n\tif(a instanceof App){\n\t\tcontext = a;\n\t\tfile_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\tfile_id = a;\n\telse {\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t\treturn;\n\t}\n\t\n\tvar callback = b;\n\t\n\treturn EThing.request({\n\t\t'url': '/apps/' + file_id + '/icon',\n\t\t'method': 'GET',\n\t\t'dataType': utils.isNode ? 'buffer' : 'blob',\n\t\t'context': context\n\t},callback);\n};\n\nEThing.App = App;\n\t\nmodule.exports = App;\n","var EThing = require(\"./core.js\");\nvar utils = require(\"./utils.js\");\nvar Resource = require(\"./resource.js\");\n\n\n\n/**\n * Constructs a Table instance from an object decribing a table. Should not be called directly. Use instead {@link EThing.list}.\n * @protected\n * @class The Table resource handle data in rows and columns\n * @memberof EThing\n * @extends EThing.Resource\n * @param {object} json\n */\nvar Table = function(json)\n{\n\tResource.call(this, json);\n}\nutils.inherits(Table, Resource);\n\n\n// specific methods\n/**\n * The number of rows in this table\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @returns {number}\n */\nTable.prototype.length = function(){\n\treturn this._json['length'];\n}\n/**\n * The maximum number of rows allowed in this table. Returns null if this feature is disable (number of rows is unlimited).\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @returns {number|null}\n */\nTable.prototype.maxLength = function(){\n\treturn this._json.maxLength;\n}\n/**\n * Returns the amount of seconds after which a __row__ is automatically removed, or null if this feature is not enable.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @returns {number}\n */\nTable.prototype.expireAfter = function(){\n\treturn this._json.expireAfter;\n}\n/**\n * Returns the keys in this table. __The default keys (\"id\" and \"date\" are not listed)__.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @returns {string[]}\n */\nTable.prototype.keys = function(){\n\tvar keys = [];\n\tfor(var k in this._json.keys)\n\t\tif(this._json.keys.hasOwnProperty(k))\n\t\t\tkeys.push(k);\n\treturn keys;\n}\n/**\n * Last time the content of this resource was modified\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @returns {Date}\n */\nTable.prototype.contentModifiedDate = function() {\n\treturn new Date(this._json.contentModifiedDate);\n}\n/**\n * Returns rows.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {Object} [options] Customize the selection\n * @param {number} [options.start=0] Position of the first rows to return. If start is negative, it starts from the end.\n * @param {number} [options.length] Maximum number of rows to return.\n * @param {string} [options.sort] The key on which to do the sorting, by default the sort is made by date.\n * @param {string} [options.query] A query string to filter the results.\n * @param {string} [options.fields] Fields of the results to return. If omitted, all the fields are returned.\n * @param {string} [options.datefmt] the format of the date field (values: \"RFC3339\"(default), \"TIMESTAMP\", \"TIMESTAMP_MS\", \"ISO8601\", \"RSS\").\n * @param {function(data,XHR,options)} [callback] It is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * @example\n * // returns all the content of a table :\n * table.select().done(function(data){\n *   // success\n * });\n *\n * // returns the last 10 rows sorted by the \"foo\" column :\n * table.select({start: -10, sort: \"foo\"}).done(function(data){\n *   // success\n * });\n *\n */\nTable.prototype.select = function(options,callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Table.select.apply(EThing, args);\n\t\t});\n}\n/**\n * Performs statistics on a specific column.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {string} key The column name on which the statistics should be performed.\n * @param {string} [query] A query string to filter the data.\n * @param {function(statistics,XHR,options)} [callback] It is executed once the request is complete whether in failure or success\n * @returns {Object} The instance on which this method was called.\n *\n */\nTable.prototype.computeStatistics = function(key,query,callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Table.computeStatistics.apply(EThing, args);\n\t\t});\n}\n/**\n * Removes one or multiple rows.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {string|string[]} id The id of the row(s) to be removed\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * @example\n * // removes the last 10 rows :\n * table.select(-10).done(function(data){\n *   this.removeRow(data.map(function(row){\n *     return row.id;\n *   }));\n * });\n *\n */\nTable.prototype.removeRow = function(id,callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Table.removeRow.apply(EThing, args);\n\t\t});\n}\n/**\n * Set new data to a row.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {object} data the data to be updated, it must contain the row id.\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * @example\n * table.replaceRow({\n * \t 'id': 'g45Tdk4',\n * \t 'value': 45\n * }).done(function(data){\n *   // updated !\n * });\n *\n */\nTable.prototype.replaceRow = function(data,callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Table.replaceRow.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Finds a single row matching the query and replaces it.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {string} query A query string to filter the data.\n * @param {object} data the new data.\n * @param {boolean} [upsert] If true, the data will be inserted if no match is found. (default to false).\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * @example\n * table.findOneAndReplace(\"name=='foo'\", {\n * \t 'name': 'foo',\n * \t 'value': 'bar'\n * }).done(function(table){\n *   // updated or inserted if not found !\n * });\n *\n */\nTable.prototype.findOneAndReplace = function(query,data,upsert,callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn Table.findOneAndReplace.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Insert new data into the table. The data argument must be a key/value object.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {object} data\n * @param {string} [invalid_field] The behaviour to adopt when an invalid field name appears. The value must be one of the following : \"rename\",\"stop\",\"skip\",\"none\".\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * @example\n * table.insert({\n *   'field1': \"foobar\",\n *   'field2': 3.14,\n *   'field3': true\n * }).done(function(){\n *   // success\n * });\n *\n */\nTable.prototype.insert = function(data, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\targs.unshift(this);\n\t\treturn Table.insert.apply(this,args);\n\t});\n}\n\n/**\n * Replace the content of this table by a new set of data.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {object[]} data\n * @param {string} [invalid_field] The behaviour to adopt when an invalid field name appears. The value must be one of the following : \"rename\",\"stop\",\"skip\",\"none\".\n * @param {bool} [skip_error] Whether to skip data on error or not\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.Table} The instance on which this method was called.\n * // copy table content\n * var tableSrc, tableDst;\n * tableSrc.select().done(function(data){\n *   tableDst.import(data);\n * });\n *\n */\nTable.prototype.import = function(data, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\targs.unshift(this);\n\t\treturn Table.import.apply(this,args);\n\t});\n}\n\n/**\n * Returns the link to access the content.\n * @memberof EThing.Table\n * @this {EThing.Table}\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\n * @returns {string}\n * @example\n * // using EThing.request() :\n * EThing.request(table.getContentUrl()).done(function(rows){\n *   // success, rows is an array of object \n *   console.log('number of rows : '+rows.length);\n * });\n * \n * // or using jQuery :\n * $.getJSON(table.getContentUrl(true)).done(function(rows){\n *   // success\n * });\n */\nTable.prototype.getContentUrl = function(auth) {\n\treturn EThing.toApiUrl('tables/'+this.id(),auth);\n}\n\n\n\n\n/**\n * Creates a new Table from the following attributes :\n *   - name {string} __ required__ the name of the table\n *   - description {string} a string describing this table \n *   - data {object} key/value pairs to attach to this table\n *   - expireAfter {number} amount of seconds after which a row is automatically removed, 0 means unlimited. Default to 0.\n *   - maxLength {number} the maximum number of rows allowed in this table. 0 means unlimited. Default to 5000.\n *\n * @method EThing.Table.create\n * @param {object} attributes\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @fires EThing#ething.table.created\n * @example\n * // get a resource by its id\n * EThing.Table.create({\n *   name: \"foobar\",\n *   expireAfter: 3600*24*7 // the data are automatically removed after 7 weeks\n * }).done(function(resource){\n *     console.log('table created : ' + resource.name());\n * })\n */\nTable.create = function(a,callback){\n\t\n\tif(typeof a == \"string\")\n\t\ta = {\n\t\t\t'name': a\n\t\t};\n\n\treturn EThing.request({\n\t\t'url': '/tables',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': a,\n\t\t'converter': EThing.resourceConverter\n\t},callback).done(function(r){\n\t\tEThing.trigger('ething.table.created',[r]);\n\t});\n\t\n};\n\n\nTable.select = function(a,options,callback){\n\n\tvar table_id = null, context;\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif((typeof callback == 'undefined') && (typeof options == 'function')){\n\t\tcallback = options;\n\t\toptions = null;\n\t}\n\t\n\toptions = options || {};\n\t\n\tif(Array.isArray(options.fields)){\n\t\toptions.fields = options.fields.join(',');\n\t}\n\t\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '?' + utils.param({'start':options.start,'length':options.length,'sort':options.sort,'q':options.query,'fields':options.fields,'datefmt':options.datefmt}),\n\t\t'method': 'GET',\n\t\t'dataType': 'json',\n\t\t'context': context\n\t},callback);\n\t\n}\n\nTable.computeStatistics = function(a,key,query,callback){\n\n\tvar table_id = null, context;\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif((typeof callback == 'undefined') && (typeof query == 'function')){\n\t\tcallback = query;\n\t\tquery = null;\n\t}\n\t\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '/statistics?' + utils.param({'key':key,'q':query}),\n\t\t'method': 'GET',\n\t\t'dataType': 'json',\n\t\t'context': context\n\t},callback);\n\t\n}\n\n\n/*\nTable,id,callback\n*/\nTable.removeRow = function(a,b,c){\n\n\tvar table_id = null, context;\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tvar id = Array.isArray(b) ? b : [b];\n\tvar callback = c;\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '/remove',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': id,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n\t\n}\n\n/*\nTable,data,callback\n*/\nTable.replaceRow = function(a,b,c){\n\n\tvar table_id = null, context;\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif(typeof b === 'object' && !utils.isId(b.id))\n\t\tthrow \"Second argument must be an object containing at least a document id\";\n\t\n\tvar docId = b.id\n\tvar callback = c;\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '/id/'+docId,\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': b,\n\t\t'context': context,\n\t\t'headers': {\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\n\t\t}\n\t},callback);\n\t\n}\n\n/*\nTable,query,data[,upsert][,callback]\n*/\nTable.findOneAndReplace = function(a,b,c,d,e){\n\n\tvar table_id = null, context, callback = e, upsert = false;\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif(typeof b !== 'string')\n\t\tthrow \"Second argument must be a query string\";\n\t\n\tif(typeof c !== 'object')\n\t\tthrow \"Third argument must be an object\";\n\t\n\tif(typeof e === 'undefined' && typeof d === 'function'){\n\t\tcallback = d;\n\t\tupsert = false;\n\t}\n\tif(typeof d === 'boolean') {\n\t\tupsert = d;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '/replace?' + utils.param({'q':b, 'upsert':upsert}),\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': c,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n\t\n}\n\n/*\nTable,kv,callback\nTable,column,data,callback\n\nkv = {\n\t...\n\tcolumnX: valueX,\n\t...\n}\n\nNote : if valueX is null, so no data will be appended and the columnX will be created if it does not exist\n\n*/\nTable.insert = function(a,postData,c,d){\n\t\n\tvar callback, table_id = null, context, invalid_field;\n\t\n\tif(a instanceof Table){\n\t\tcontext = a;\n\t\ttable_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\ttable_id = a;\n\telse {\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif( typeof c == 'string' ){\n\t\tinvalid_field = c;\n\t\tcallback = d;\n\t}\n\telse {\n\t\tcallback = c;\n\t}\n\t\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table_id + '?' + utils.param({'invalid_field':invalid_field}),\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': postData,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n\t\n}\n\n\nTable.import = function(table,data){\n\tvar context,invalid_field,skip_error,callback;\n\t\n\tif(table instanceof Table){\n\t\tcontext = table;\n\t\ttable = table.id();\n\t}\n\telse if(!utils.isId(table)){\n\t\tthrow \"First argument must be a Table object or a table id !\";\n\t\treturn;\n\t}\n\t\n\tif(!Array.isArray(data))\n\t\tthrow \"The data must be an array of objects\";\n\t\n\tfor(var i=2; i<arguments.length; i++){\n\t\tswitch(typeof arguments[i]){\n\t\t\tcase 'function':\n\t\t\t\tcallback = arguments[i];\n\t\t\t\tbreak;\n\t\t\tcase 'boolean':\n\t\t\t\tskip_error = arguments[i];\n\t\t\t\tbreak;\n\t\t\tcase 'string':\n\t\t\t\tinvalid_field = arguments[i];\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/tables/' + table + '?' + utils.param({'skip_error':skip_error,'invalid_field':invalid_field}),\n\t\t'dataType': 'json',\n\t\t'method': 'PUT',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': data,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n\t\n}\n\nEThing.Table = Table;\n\nmodule.exports = Table;\n\n","\nvar EThing = require(\"./core.js\");\nvar utils = require(\"./utils.js\");\nvar Resource = require(\"./resource.js\");\n\n\n/**\n * Constructs a File instance from an object decribing a file. Should not be called directly. Use instead {@link EThing.list}.\n * @protected\n * @class The File resource handle regular file such as image or text\n * @memberof EThing\n * @extends EThing.Resource\n * @param {object} json\n */\nvar File = function(json)\n{\n\tResource.call(this, json);\n}\nutils.inherits(File, Resource);\n\n/**\n * Returns the size of this file in bytes.\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {number}\n */\nFile.prototype.size = function() {\n\treturn this._json.size;\n}\n/**\n * Returns the amount of seconds after the last update after which this file is removed automatically, or null if this feature is not enable (no time limit).\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {number|null}\n */\nFile.prototype.expireAfter = function(){\n\treturn this._json.expireAfter || null;\n}\n/**\n * Returns the MIME type of this file\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {string}\n */\nFile.prototype.mime = function(){\n\treturn this._json.mime;\n}\n\n/**\n * Last time the content of this resource was modified\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {Date}\n */\nFile.prototype.contentModifiedDate = function() {\n\treturn new Date(this._json.contentModifiedDate);\n}\n\n/**\n * If this file has a thumbnail (thumbnail is only available for file with MIME type __image/*__), it returns his link, else it returns null.\n * \n * @memberof EThing.File\n * @this {EThing.File}\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\n * @returns {string|null}\n * @example\n * // the simple way\n * var image = new Image();\n * image.src = imageFile.thumbnailLink(true);\n * document.body.appendChild(image);\n *\n * // the hard way\n * EThing.request({\n *   url: imageFile.thumbnailLink(),\n *   dataType: \"blob\"\n * }).done(function(blobData){\n *   // success\n *   var image = new Image();\n *   image.src = window.URL.createObjectURL( blobData );\n *   \n *   document.body.appendChild(image);\n * });\n */\nFile.prototype.thumbnailLink = function(auth) {\n  return this._json.hasThumbnail ? EThing.toApiUrl('files/'+this.id()+'/thumbnail',auth) : null;\n}\n\n/**\n * Returns the link to access the content.\n * @memberof EThing.File\n * @this {EThing.File}\n * @param {boolean} [auth=false] wether or not attach any authentication element. Necessary if you are not using {@link EThing.request}.\n * @returns {string}\n * @example\n * // using EThing.request() :\n * EThing.request(file.getContentUrl()).done(function(content){\n *   // success\n *   console.log('content as text : '+content);\n * });\n *\n * // HTML <img> Tag :\n * var image = new Image();\n * image.src = imageFile.getContentUrl(true);\n * document.body.appendChild(image);\n */\nFile.prototype.getContentUrl = function(auth) {\n\treturn EThing.toApiUrl('files/'+this.id(),auth);\n}\n\n/**\n * Returns true if this file has text based content.\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {boolean}\n */\nFile.prototype.isText = function() {\n\treturn this._json.isText;\n}\n\n/**\n * Returns true if this file is a script.\n * @memberof EThing.File\n * @this {EThing.File}\n * @returns {boolean}\n */\nFile.prototype.isScript = function() {\n\treturn this._json.isText && this._json.mime === 'application/javascript';\n}\n\n// specific methods\n\n/**\n * Execute a script file.\n * @memberof EThing.File\n * @this {EThing.File}\n * @param {string} [arguments] a string containing the arguments\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.File} The instance on which this method was called.\n * @example\n * file.execute().done(function(result){\n *   // success\n *   console.log(result);\n * });\n *\n */\nFile.prototype.execute = function(args, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn File.execute.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Gets the content of this file as text or as binary data.\n * @memberof EThing.File\n * @this {EThing.File}\n * @param {boolean} [binary] if true, return the content as binary data (as Blob in a browser, or Buffer in NodeJs)\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.File} The instance on which this method was called.\n * @example\n * file.read().done(function(content){\n *   // success\n *   console.log('content as text : '+content);\n * });\n * \n * // browser :\n * file.read(true).done(function(contentAsBlob){\n *   // success\n * });\n *\n * // NodeJs :\n * var fs = require(\"fs\");\n * EThing.get('kDO5Fk4').done(function(resource){\n * \tresource.read(true).done(function(data){\n * \t\t// data : Buffer instance\n * \t\tfs.writeFile(resource.basename(), data, function(){\n * \t\t\tconsole.log('It\\'s saved!');\n * \t\t});\n * \t});\n * });\n *\n */\nFile.prototype.read = function(binary, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn File.read.apply(EThing, args);\n\t\t});\n}\n\n/**\n * Writes some content to this file.\n * @memberof EThing.File\n * @this {EThing.File}\n * @param {string|blob|arraybuffer} data\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {EThing.File} The instance on which this method was called.\n * @example\n * file.write(\"hello world !\").done(function(){\n *   // success\n * });\n *\n */\nFile.prototype.write = function(data, callback){\n\tvar args = [].slice.call(arguments);\n\treturn this.deferred(function(){\n\t\t\targs.unshift(this);\n\t\t\treturn File.write.apply(EThing, args);\n\t\t});\n}\n\n\n\n/**\n * Creates a new File from the following attributes :\n *   - name {string} __ required__ the name of the file\n *   - description {string} a string describing this file \n *   - data {object} key/value pairs to attach to this file\n *   - expireAfter {number} amount of seconds after the last update after which this file is removed automatically, 0 means unlimited. Default to 0.\n *\n * @method EThing.File.create\n * @param {object} attributes\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @fires EThing#ething.file.created\n * @example\n * EThing.File.create({\n *   name: \"foobar.txt\",\n *   description: \"this is my file\"\n * }).done(function(resource){\n *     console.log('file created : ' + resource.name());\n * })\n */\nFile.create = function(a,callback){\n\t\n\tif(typeof a == \"string\")\n\t\ta = {\n\t\t\t'name': a\n\t\t};\n\t\n\treturn EThing.request({\n\t\t'url': '/files',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': a,\n\t\t'converter': EThing.resourceConverter\n\t},callback).done(function(r){\n\t\tEThing.trigger('ething.file.created',[r]);\n\t});\n\t\n};\n\n/*\nResource,boolean,callback{function({string|buffer})}\n*/\nFile.read = function(file, binary, callback)\n{\n\tvar context;\n\tif(file instanceof File){\n\t\tcontext = file;\n\t\tfile = file.id();\n\t}\n\telse if(!utils.isId(file)){\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t}\n\t\n\tif(typeof callback == 'undefined' && typeof binary == 'function'){\n\t\tcallback = binary;\n\t\tbinary = false;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/files/' + file,\n\t\t'method': 'GET',\n\t\t'dataType': binary ? (utils.isNode ? 'buffer' : 'blob') : 'text',\n\t\t'context': context\n\t},callback);\n};\n\n/*\nResource,args,callback{function({object})}\n*/\nFile.execute = function(file, args, callback)\n{\n\tvar context;\n\tif(file instanceof File){\n\t\tcontext = file;\n\t\tfile = file.id();\n\t}\n\telse if(!utils.isId(file)){\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t}\n\t\n\tif(typeof callback === 'undefined' && typeof args === 'function'){\n\t\tcallback = args;\n\t\targs = null;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/files/' + file + '/execute?' + utils.param({'args':args}),\n\t\t'method': 'GET',\n\t\t'dataType': 'json',\n\t\t'context': context\n\t},callback);\n};\n\n/*\nResource,data{string},callback{function({EThing.File})}\n*/\nFile.write = function(a,b,c)\n{\n\tvar file_id = null, context;\n\tif(a instanceof File){\n\t\tcontext = a;\n\t\tfile_id = a.id();\n\t}\n\telse if(utils.isId(a))\n\t\tfile_id = a;\n\telse {\n\t\tthrow \"First argument must be a File object or a file id !\";\n\t\treturn;\n\t}\n\t\n\tvar callback = c;\n\t\n\treturn EThing.request({\n\t\t'url': '/files/' + file_id,\n\t\t'dataType': 'json',\n\t\t'method': 'PUT',\n\t\t'contentType': (typeof b == 'string') ? 'text/plain' : 'application/octet-stream',\n\t\t'data': b,\n\t\t'context': context,\n\t\t'converter': EThing.resourceConverter\n\t},callback);\n};\n\nEThing.File = File;\n\nmodule.exports = File;\n","\nvar EThing = require(\"./core.js\");\n\n\n/**\n * Send a notification.\n * @memberof EThing\n * @param {string} [subject] The subject of the notification\n * @param {string} message The message of the notification\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n * @example\n * EThing.notify(\"hello world\")\n *   .done(function(){\n *     alert(\"A notification has been sent\");\n *   })\n */\nvar notify = function(subject,message, callback){\n\tvar query = {};\n\t\n\tif(arguments.length == 3){\n\t\tquery['body'] = message;\n\t\tquery['subject'] = subject;\n\t}\n\telse if(arguments.length == 2){\n\t\tif(typeof message == 'string'){\n\t\t\tquery['subject'] = subject;\n\t\t\tquery['body'] = message;\n\t\t}\n\t\telse{\n\t\t\tquery['body'] = subject;\n\t\t\tcallback = message;\n\t\t}\n\t}\n\telse if(arguments.length == 1){\n\t\tquery['body'] = subject;\n\t}\n\telse {\n\t\tthrow \"Bad arguments!\";\n\t\treturn;\n\t}\n\t\n\treturn EThing.request({\n\t\t'url': '/notification',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': query\n\t},callback);\n}\n\n\nEThing.notify = notify;\n\nmodule.exports = notify;\n","\t\nvar EThing = require(\"./core.js\");\nvar utils = require(\"./utils.js\");\n\n\n\n/*\n* Settings\n*/\n\nvar settings = {};\n\n/**\n * Retrieve the settings.\n * @memberof EThing.settings\n * @this {EThing.settings}\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n */\n\nsettings.get = function(callback){\n\treturn EThing.request({\n\t\t'url': '/settings',\n\t\t'dataType': 'json',\n\t\t'method': 'GET'\n\t},callback);\n};\n\n/**\n * Update the settings.\n * @memberof EThing.settings\n * @this {EThing.settings}\n * @param {object} [data] updated settings object\n * @param {function(data,XHR,options)} [callback] it is executed once the request is complete whether in failure or success\n * @returns {Deferred} a {@link http://api.jquery.com/category/deferred-object/|jQuery like Promise object}. {@link EThing.request|More ...} \n */\nsettings.set = function(data, callback){\n\t\n\tif(!utils.isPlainObject(data))\n\t\tthrow \"First argument must be an object !\";\n\t\n\t\n\treturn EThing.request({\n\t\t'url': '/settings',\n\t\t'dataType': 'json',\n\t\t'method': 'POST',\n\t\t'contentType': \"application/json; charset=utf-8\",\n\t\t'data': data,\n\t\t'headers': {\n\t\t\t\"X-HTTP-Method-Override\": \"PATCH\"\n\t\t}\n\t},callback);\n};\n\nEThing.settings = settings;\n\nmodule.exports = settings;\n\n\n","\nvar utils = require('./utils');\n\nvar Error_ = function(json){\n\tthis.constructor.prototype.__proto__ = Error.prototype\n\tError.captureStackTrace(this, this.constructor)\n\tthis.name = 'EThing.Error';\n\tif(typeof json == \"string\")\n\t\tjson = {\n\t\t\tmessage: json\n\t\t};\n\tif(json instanceof Error)\n\t\tjson = {\n\t\t\tmessage: json.message\n\t\t};\n\tutils.extend(this, {\n\t\tmessage: 'unknown error'\n\t}, json);\n}\n\n\nmodule.exports = Error_;\n\t\n","// browser specific code\n\nmodule.exports = {\n\t\n\t\"isNode\": false,\n\t\n\t\"btoa\": btoa,\n\t\n\t\"atob\" : atob,\n\t\n\t\"XMLHttpRequest\": XMLHttpRequest,\n\t\n\t'Blob': Blob,\n\t\n\t'Buffer': function(){},\n\t\n\t'FileReader': FileReader || null,\n\t\n\t'FileReaderSync': FileReaderSync || null\n\n};","/**\n * EThing - javascript API of the EThing project\n * @version v0.1.0\n */\n\n\nvar EThing = require(\"./core.js\");\n\nrequire(\"./resource.js\");\nrequire(\"./settings.js\");\nrequire(\"./notify.js\");\nrequire(\"./file.js\");\nrequire(\"./table.js\");\nrequire(\"./app.js\");\nrequire(\"./device.js\");\nrequire(\"./devices/http.js\");\nrequire(\"./devices/mqtt.js\");\n\nmodule.exports = EThing;"],"sourceRoot":""}