!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e,n){var r,o;r=[n(15)],void 0===(o=function(t){var e=t||{};function n(t,e,r){var o;if(Array.isArray(e))for(var i in e){var a=e[i];/\[\]$/.test(t)?r(t,a):n(t+"["+("object"==typeof a?i:"")+"]",a,r)}else if("object"==typeof e)for(o in e)n(t+"["+o+"]",e[o],r);else r(t,e)}e.isId=function(t){return"string"==typeof t&&7===t.length&&/^[0-9a-zA-Z\-_]+$/.test(t)},e.parseUrl=function(t){var e=/^((([a-z]+):)?\/\/)?(([^:]*)(:([^@]*))?@)?([^:\/?#]+)?(:([0-9]+))?([^?#]+)?(\?[^#]*)?(#.*)?$/i.exec(t);return!!e&&{scheme:e[3],user:e[5],password:e[7],hostname:e[8],port:e[10],path:e[11],search:e[12],hash:e[13]}},e.getParam=function(t,e){var n=t.indexOf("?"),r=new RegExp("[\\?&]"+encodeURIComponent(e)+"=([^&#]*)"),o=-1!==n?r.exec(t.substr(n)):null;return null===o?"":decodeURIComponent(o[1])},e.getQueryString=function(t,e){var n=t.indexOf("?"),r=new RegExp("[\\?&]"+encodeURIComponent(e)+"=([^&#]*)"),o=-1!==n?r.exec(t.substr(n)):null;return null===o?"":decodeURIComponent(o[1])},e.removeParam=function(t,e){var n=t.split("?");if(n.length>=2){var r=n[1].indexOf("#"),o="";-1!==r&&(o=n[1].substr(r),n[1]=n[1].substr(0,r));for(var i=encodeURIComponent(e)+"=",a=n[1].split(/[&;]/g),s=a.length;s-- >0;)-1!==a[s].lastIndexOf(i,0)&&a.splice(s,1);return t=n[0]+(a.length>0?"?"+a.join("&"):"")+o}return t},e.insertParam=function(t,n,r){var o=(t=e.removeParam(t,n)).indexOf("#"),i="";-1!==o&&(i=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?"),s="";return-1!==a&&(s=t.substr(a),t=t.substr(0,a)),s+=s.length?"&":"?",t+(s+=encodeURIComponent(n)+"="+encodeURIComponent(r))+i},e.param=function(t){var e,r=[],o=function(t,e){e="function"==typeof e?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};for(e in t)null!==t[e]&&void 0!==t[e]&&n(e,t[e],o);return r.join("&").replace(/%20/g,"+")};var r=e.pad=function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t};e.sizeToString=function(t){if(t=parseInt(t),isNaN(t))return"-";return t>9e8?t=Math.floor(t/1e9*100)/100+" GB":t>9e5?t=Math.floor(t/1e6*100)/100+" MB":t>900?t=Math.floor(t/1e3*100)/100+" KB":t+=" B",t},e.dateToString=function(t){var e=new Date;if("number"==typeof t&&(t=new Date(1e3*t)),t){if(e.getTime()-t.getTime()<864e5)return r(t.getHours(),2)+":"+r(t.getMinutes(),2);var n=t.getFullYear(),o=t.getDate(),i=t.getMonth();return n==e.getFullYear()?o+" "+new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")[i]+".":n+"/"+r(i+1,2)+"/"+r(o,2)}return"-"},e.dateDiffToString=function(t){if(t=parseInt(t),isNaN(t))return"-";var e,n=604800,r=86400,o=3600,i=60,a=0,s="";return(e=Math.floor(t/n))>=1&&a<2&&(s+=Math.floor(e)+" week"+(e>1?"s":""),t-=e*n,a++),(e=Math.floor(t/r))>=1&&a<2&&(a&&(s+=" "),s+=Math.floor(e)+" day"+(e>1?"s":""),t-=e*r,a++),(e=Math.floor(t/o))>=1&&a<2&&(a&&(s+=" "),s+=Math.floor(e)+" hour"+(e>1?"s":""),t-=e*o,a++),(e=Math.floor(t/i))>=1&&a<2&&(a&&(s+=" "),s+=Math.floor(e)+" minute"+(e>1?"s":""),t-=e*i,a++),(e=t)>=1&&a<2&&(a&&(s+=" "),s+=Math.floor(e)+" seconde"+(e>1?"s":""),a++),s};var o={};e.createCache=function(t){return function(e,n){return(!o[e]||"function"==typeof o[e].state&&"rejected"===o[e].state())&&(o[e]=t(e)),o[e].done(n)}};var i={},a=i.toString,s=i.hasOwnProperty;return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){i["[object "+t+"]"]=t.toLowerCase()}),e.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[a.call(t)]||"object":typeof t},e.isPlainObject=function(t){var n;if("object"!==e.type(t)||t.nodeType||null!=t&&t===t.window)return!1;try{if(t.constructor&&!s.call(t,"constructor")&&!s.call(t.constructor.prototype||{},"isPrototypeOf"))return!1}catch(t){return!1}for(n in t);return void 0===n||s.call(t,n)},e.extend=function(){var t,n,r,o,i,a,s=arguments[0]||{},u=1,c=arguments.length,f=!1;for("boolean"==typeof s&&(f=s,s=arguments[1]||{},u=2),"object"!=typeof s&&"function"!=typeof s&&(s={}),c===u&&(s=this,--u);u<c;u++)if(null!=(t=arguments[u]))for(n in t)r=s[n],s!==(o=t[n])&&(f&&o&&(e.isPlainObject(o)||(i=Array.isArray(o)))?(i?(i=!1,a=r&&Array.isArray(r)?r:[]):a=r&&e.isPlainObject(r)?r:{},s[n]=e.extend(f,a,o)):void 0!==o&&(s[n]=o));return s},e.isEqual=function(t,n){"use strict";if(null===t||void 0===t||null===n||void 0===n)return t===n;if(t.constructor!==n.constructor)return!1;if(t instanceof Function)return t===n;if(t instanceof RegExp)return t===n;if(t===n||t.valueOf()===n.valueOf())return!0;if(Array.isArray(t)&&t.length!==n.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(n instanceof Object))return!1;var r=Object.keys(t);return Object.keys(n).every(function(t){return-1!==r.indexOf(t)})&&r.every(function(r){return e.isEqual(t[r],n[r])})},e.inherits=function(t,e){t.prototype=new e,t.prototype.constructor=t},e}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(0),n(4),n(14),n(7),n(6),n(5)],void 0===(o=function(t,e,n,r,o,i){var a={},s=t.extend,u=t.isPlainObject,c=t.XMLHttpRequest;a.Event=r,a.Error=n,a.utils=t,a.utils.Deferred=e,a.DeferredObject=i,a.config={apiUrl:"http://localhost:8000/api"};var f=[],p=[],l=[],d=[],h=null;o(a),a.toApiUrl=function(t,e){return/^([a-z]+:)?\/\//.test(t=t||"")||(!/^\//.test(t)&&t&&(t="/"+t),t=a.config.apiUrl+t),e&&y(t)&&(t=w(t),"function"==typeof h&&(t=h(t))),t};var y=function(t){return new RegExp("^([a-z]+:)?//"+a.config.apiUrl.replace(/^([a-z]+:)?\/\//,"")).test(t)};a.apiUrl=function(){return a.toApiUrl()};var v=function(o){var i=new e,v=new c;if("string"==typeof o&&(o={url:o}),"string"!=typeof(o=s({method:"GET",context:null,url:null,data:null,contentType:null,headers:null,dataType:null,converter:null,synchronous:!1},o)).url)return null;var g=a.toApiUrl(o.url),m=y(g);o.method=o.method.toUpperCase();var b=o.context||a,j=!/^(?:GET|HEAD)$/.test(o.method),T=void 0,x=void 0!==o.data&&null!==o.data;!j&&x&&(g+=(/\?/.test(g)?"&":"?")+("string"==typeof o.data?o.data:t.param(o.data))),v.open(o.method,g,!o.synchronous);var A=null;if(u(o.headers))for(var R in o.headers)o.headers.hasOwnProperty(R)&&(/^content-type$/i.test(R)&&(A=o.headers[R]),v.setRequestHeader(R,o.headers[R]));!A&&o.contentType&&v.setRequestHeader("Content-Type",A=o.contentType),j&&x&&(A?(T=o.data,(u(o.data)||Array.isArray(o.data))&&(/json/i.test(A)?T=JSON.stringify(o.data):/application\/x-www-form-urlencoded/i.test(A)&&(T=t.param(o.data)))):o.data instanceof Blob?(v.setRequestHeader("Content-Type",A=o.data.type),T=o.data):o.data instanceof ArrayBuffer||o.data instanceof t.Buffer?(v.setRequestHeader("Content-Type",A="application/octet-stream"),T=o.data):(v.setRequestHeader("Content-Type",A="application/x-www-form-urlencoded; charset=UTF-8"),T="string"==typeof o.data?o.data:t.param(o.data))),m&&(v=w(v),"function"==typeof h&&(v=h(v)));var _=o.dataType;function O(r){var s=v.getResponseHeader("Content-Type")||"",u=null;if(void 0!==r)u=r;else if(/json/.test(s)||/text\/plain/.test(s))switch(v.responseType){case"":case"text":case"json":u=v.response;break;case"blob":if(o.synchronous){if(!t.FileReaderSync)throw new n("FileReaderSync not supported.");var c=new t.FileReaderSync;u=String.fromCharCode.apply(null,new Uint8Array(c.readAsArrayBuffer(v.response)))}else{if(u=e(),!t.FileReader)throw new n("FileReaderSync not supported.");(c=new t.FileReader).onload=function(){u.resolve(String.fromCharCode.apply(null,new Uint8Array(this.result)))},c.readAsArrayBuffer(v.response)}break;case"arraybuffer":u=String.fromCharCode.apply(null,new Uint8Array(v.response));break;case"buffer":u=v.response.toString("utf8");break;default:throw new n(v.responseType+" response type not supported.")}e.when(u).always(function(t){try{t=JSON.parse(t)}catch(t){}var e=[new n(t||(v.status?v.status+" ["+v.statusText+"]":"unknown error")),v,o];a.trigger("ething.request.error",e),l.forEach(function(t){t.apply(b,e)}),a.trigger("ething.request.complete",e),p.forEach(function(t){t.apply(b,e)}),i.rejectWith(b,e)})}_&&"auto"!=_&&(v.responseType=_),v.onload=function(){if(v.status>=200&&v.status<300||304===v.status){var t=v.response;if("auto"==_){if(/json/.test(v.getResponseHeader("Content-Type")||""))try{t=JSON.parse(t)}catch(t){}}else if("json"==_&&"string"==typeof t)try{t=JSON.parse(t)}catch(t){}"function"==typeof o.converter&&(t=o.converter.call(b,t,v,o)),function(t){var e=[t,v,o];a.trigger("ething.request.success",e),f.forEach(function(t){t.apply(b,e)}),a.trigger("ething.request.complete",e),p.forEach(function(t){t.apply(b,e)}),i.resolveWith(b,e)}(t)}else O()},v.onerror=function(t){O(t)},v.onabort=function(){O()},v.onprogress=function(t){i.notifyWith(b,[t,v,o])};var S=r("ething.request.send");return a.trigger(S,[v,o]),S.isDefaultPrevented()?O("Aborded"):(d.forEach(function(t){t.call(b,v)}),v.send(T)),i.promise()};var g=a.getClass=function(t){var e=t.split(/[.\\]/);if(e.length>0&&void 0!==a[e[0]])return a[e[0]]};a.instanciate=function(t){var e=g(t.type);return e||t.extends.indexOf("Device")>=0&&(e=g("Device")),!!e&&new e(t)};a.resourceConverter=function(t){if("object"==typeof t&&null!==t){var e=Array.isArray(t);e||(t=[t]),t=t.map(function(t){return a.instanciate(t)}).filter(function(t){return t}),a.arbo&&(t=a.arbo.update(t).resources),e||(t=t.length?t[0]:null)}return t},a.request=function(t,e){var n=v(t);if("function"==typeof e&&n.always(function(){e.apply(this,Array.prototype.slice.call(arguments))}),t.synchronous){var r=null;return n.always(function(t){r=t}),r}return n},a.apiRequestPrefilter=function(t){h=t},a.ajaxSend=function(t){"function"==typeof t&&d.push(t)},a.ajaxComplete=function(t){"function"==typeof t&&p.push(t)},a.ajaxSuccess=function(t){"function"==typeof t&&f.push(t)},a.ajaxError=function(t){"function"==typeof t&&l.push(t)},a.list=a.find=function(e,n){var r=null,o=null;return 1==arguments.length?"function"==typeof arguments[0]?o=arguments[0]:r=arguments[0]:arguments.length>=2&&(r=arguments[0],o=arguments[1]),a.request({url:"/resources?"+t.param({q:r}),method:"GET",dataType:"json",converter:a.resourceConverter},o)},a.get=function(e,n){var r;if(e instanceof a.Resource)r=e,e=e.id();else if(!t.isId(e))throw"First argument must be a Resource object or a Resource id : "+e;var o=n;return a.request({url:"/resources/"+e,dataType:"json",method:"GET",context:r,converter:a.resourceConverter},o)},a.usage=function(t){var e=t;return a.request({url:"/usage",dataType:"json",method:"GET"},e)};var m=function(t){return t},b=null,j=null,T=null,w=m;a.auth={},a.auth.isAuthenticated=function(){return!!T},a.auth.getApp=function(){return b instanceof a.App?b:null},a.auth.getDevice=function(){return b instanceof a.Device?b:null},a.auth.getResource=function(){return b},a.auth.getScope=function(){return j},a.auth.reset=function(){b=null,T=null,j=null,w=m},a.auth.setApiKey=function(t){a.auth.reset(),w=function(e){return"string"==typeof e?e=a.utils.insertParam(e,"api_key",t):e.setRequestHeader("X-API-KEY",t),e}},a.auth.setBasicAuth=function(e,n){a.auth.reset(),w=function(r){return"string"==typeof r?r=r.replace(/\/\/([^:]+:[^@]+@)?/,"//"+e+":"+n+"@"):r.setRequestHeader("Authorization","Basic "+t.btoa(e+":"+n)),r}},a.initialize=function(t,e,n){return a.auth.reset(),(t=s({apiUrl:null,apiKey:null,login:null,password:null},t||{})).apiUrl&&(a.config.apiUrl=t.apiUrl),t.apiKey?a.auth.setApiKey(t.apiKey):t.login&&t.password&&a.auth.setBasicAuth(t.login,t.password),a.request({url:"/auth",dataType:"json",context:a,converter:function(t){T=t.type,t.resource&&(b=a.instanciate(t.resource)),t.scope&&(j=t.scope)}}).done(function(){x.forEach(function(t){t.call(a)}),a.trigger("ething.authenticated")}).done(e).fail(n)};var x=[];return a.authenticated=function(t){"function"==typeof t&&(x.push(t),a.auth.isAuthenticated()&&t.call(a))},a}.apply(e,r))||(t.exports=o)},function(e,n,r){var o,i;o=[r(0),r(6),r(5),r(1)],void 0===(i=function(e,n,r,o){var i=function(t){r.call(this),n(this),this._fromJson(t,!0)};return e.inherits(i,r),i.prototype._fromJson=function(t,n){var r=this._json&&t&&this._json.modifiedDate&&t.modifiedDate&&this._json.modifiedDate!==t.modifiedDate,i=[];return t=e.extend({name:null,id:null,type:null,createdBy:null,createdDate:0,modifiedDate:0,data:null,description:null},t||{}),!n&&r&&Object.keys(t).forEach(function(n){void 0!==this._json[n]&&e.isEqual(t[n],this._json[n])||i.push(n)},this),this._json=t,!n&&r&&(this.trigger("updated",[i]),o.trigger("ething.resource.updated",[this,i])),r},i.prototype.json=function(){return this._json},i.prototype.isTypeof=function(t){return-1!==this._json.extends.indexOf(t)},i.prototype.name=function(){return this._json.name},i.prototype.dirname=function(){return o.Resource.dirname(this._json.name)},i.prototype.basename=function(){return o.Resource.basename(this._json.name)},i.prototype.extension=function(){return o.Resource.extension(this._json.name)},i.prototype.id=function(){return this._json.id},i.prototype.createdBy=function(){return this._json.createdBy},i.prototype.type=function(){return this._json.type},i.prototype.types=function(){return this._json.extends||[]},i.prototype.baseType=function(){return t=this.types(),t[t.length-1]},i.prototype.createdDate=function(){return new Date(this._json.createdDate)},i.prototype.ctime=function(){return this.createdDate()},i.prototype.modifiedDate=function(){return new Date(this._json.modifiedDate)},i.prototype.mtime=function(){return this.modifiedDate()},i.prototype.public=function(){return this._json.public||!1},i.prototype.data=function(t,e){return void 0===t?this._json.data:this._json.data.hasOwnProperty(t)?this._json.data[t]:e},i.prototype.attr=function(t){return void 0===t?this._json:this._json.hasOwnProperty(t)?this._json[t]:null},i.prototype.hasAttr=function(t){return this._json.hasOwnProperty(t)},i.prototype.description=function(){return this._json.description||""},i.prototype.remove=function(t,e){return this.deferred(function(){return i.remove(this,e)})},i.prototype.update=function(t){return this.deferred(function(){return o.get(this,t)})},i.prototype.set=function(t,e){var n=[].slice.call(arguments);return this.deferred(function(){return n.unshift(this),i.set.apply(o,n)})},i.prototype.setData=function(t,e){if("string"==typeof t&&"function"!=typeof e){var n=t,r=e;e=arguments[2];(t={})[n]=r}return this.set({data:t},e)},i.remove=function(t,n,r){var a;if(t instanceof i)a=t,t=t.id();else if(!e.isId(t))throw"First argument must be a Resource object or a Resource id : "+t;return 2==arguments.length&&"function"==typeof n&&(r=n,n=!1),o.request({url:"/resources/"+t+"?"+e.param({children:n}),method:"DELETE",context:a},r).done(function(){o.trigger("ething.resource.removed",[t])})},o.Resource.set=function(t,n,r){var i;if(!e.isPlainObject(n)||!n)throw"Second argument must be a unempty object !";if(t instanceof o.Resource)i=t,t=t.id();else if(!o.utils.isId(t))throw"First argument must be a Resource object or a Resource id : "+t;var a=r;return o.request({url:"/resources/"+t,dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:n,context:i,headers:{"X-HTTP-Method-Override":"PATCH"},converter:o.resourceConverter},a)},o.Resource.dirname=function(t){var e=t.replace(/\/[^\/]*\/?$/,"");return e===t?"":e},o.Resource.basename=function(t){return t.replace(/.*\//,"")},o.Resource.extension=function(t){return t.indexOf(".")>=0?t.split(".").pop():""},o.Resource.fnmatch=function(t,e){for(var n,r,o=t.split(" "),i=0;i<o.length;i++)if(""!=o[i]&&(n="^"+(n="^"+o[i].replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$")+"$",r=new RegExp(n),null!=e.match(r)))return!0;return!1},o.Resource=i,i}.apply(n,o))||(e.exports=i)},function(t,e,n){var r,o;r=[n(1),n(0),n(2)],void 0===(o=function(t,e,n){var r=function(e){n.call(this,e),(this._json.methods||[]).forEach(function(e){if(void 0===this[e]){var n=this;this[e]=function(n,o,i){var a=[].slice.call(arguments);return this.deferred(function(){return a.unshift(e),a.unshift(this),r.execute.apply(t,a)})},this[e].getApi=function(t){return r.getApi(n,e,t)},this[e].executeUrl=function(t){return n.executeUrl(e,t)}}},this)};return e.inherits(r,n),r.prototype.location=function(){return this._json.location||null},r.prototype.connected=function(){return!!this._json.connected},r.prototype.lastSeenDate=function(){return"string"==typeof this._json.lastSeenDate?new Date(this._json.lastSeenDate):null},r.prototype.hasBattery=function(){return"number"==typeof this._json.battery&&this._json.battery>=0},r.prototype.battery=function(){return this.hasBattery()?this._json.battery:null},r.prototype.methods=function(){return this._json.methods||[]},r.prototype.interfaces=function(){return this._json.interfaces||[]},r.prototype.execute=function(){var e=[].slice.call(arguments);return this.deferred(function(){return e.unshift(this),r.execute.apply(t,e)})},r.prototype.executeUrl=function(n,r){var o="devices/"+this.id()+"/call/"+n;return isPlainObject(r)&&0!==Object.keys(r).length&&(o+="?"+e.param(r)),t.toApiUrl(o,!0)},r.prototype.getApi=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.getApi.apply(t,o)})},r.execute=function(n,o,i,a,s){var u;if(n instanceof r)u=n,n=n.id();else{if(!e.isId(n))throw"First argument must be a Device object or a Device id !";n=n}return 4==arguments.length?"function"==typeof a&&(s=a,a=void 0):3==arguments.length&&"function"==typeof i&&(s=i,i=void 0),t.request({url:"/devices/"+n+"/call/"+o,method:"POST",contentType:"application/json; charset=utf-8",data:void 0!==i&&null!==i?JSON.stringify(i):void 0,dataType:a?e.isNode?"buffer":"blob":"auto",context:u},s)},r.getApi=function(n,o,i){var a;if("function"==typeof o&&void 0===i&&(i=o,o=void 0),n instanceof r)a=n,n=n.id();else{if(!e.isId(n))throw"First argument must be a Device object or a Device id !";n=n}return t.request({url:"/devices/"+n+"/api"+(o?"/"+o:""),method:"GET",context:a,dataType:"json"},i)},r.create=function(e,n,r){return n.type=e,t.request({url:"/devices",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:n,converter:t.resourceConverter},r).done(function(e){t.trigger("ething.device.created",[e])})},t.Device=r,r}.apply(e,r))||(t.exports=o)},function(t,e,n){var r;void 0===(r=function(){function t(e){var n="pending",r=[],o=[],i=[],a=null,s=[["resolve","done"],["reject","fail"],["notify","progress"]],u={done:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],o=0;o<e.length;o++)"resolved"===n&&e[o].apply(this,a),r.push(e[o]);else"resolved"===n&&arguments[t].apply(this,a),r.push(arguments[t]);return this},fail:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],r=0;r<e.length;r++)"rejected"===n&&e[r].apply(this,a),o.push(e[r]);else"rejected"===n&&arguments[t].apply(this,a),o.push(arguments[t]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],r=0;r<e.length;r++)"pending"===n&&i.push(e[r]);else"pending"===n&&i.push(arguments[t]);return this},then:function(){var e=arguments;return t(function(t){s.forEach(function(n,r){var o="function"==typeof e[r]&&e[r];c[n[1]](function(){var e=o&&o.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this===u?t.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(t){if(null==t)return u;for(var e in u)t[e]=u[e];return t},state:function(){return n},debug:function(){console.log("[debug]",r,o,n)},isRejected:function(){return"rejected"===n},isResolved:function(){return"resolved"===n}},c={resolveWith:function(t){if("pending"===n){n="resolved";for(var e=a=arguments.length>1?arguments[1]:[],o=0;o<r.length;o++)r[o].apply(t,e)}return this},rejectWith:function(t){if("pending"===n){n="rejected";for(var e=a=arguments.length>1?arguments[1]:[],r=0;r<o.length;r++)o[r].apply(t,e)}return this},notifyWith:function(t){if("pending"===n)for(var e=a=arguments.length>1?arguments[1]:[],r=0;r<i.length;r++)i[r].apply(t,e);return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},f=u.promise(c);return e&&e.apply(f,[f]),f}return t.when=function(){if(arguments.length<2){var e=arguments.length?arguments[0]:void 0;return e&&"function"==typeof e.isResolved&&"function"==typeof e.isRejected?e.promise():t().resolve(e).promise()}return function(e){for(var n=t(),r=e.length,o=0,i=new Array(r),a=0;a<e.length;a++)!function(t){var a=null;e[t].done?e[t].done(function(){i[t]=arguments.length<2?arguments[0]:arguments,++o==r&&n.resolve.apply(n,i)}).fail(function(){n.reject(arguments)}):(a=e[t],e[t]=new Deferred,e[t].done(function(){i[t]=arguments.length<2?arguments[0]:arguments,++o==r&&n.resolve.apply(n,i)}).fail(function(){n.reject(arguments)}).resolve(a))}(a);return n.promise()}(arguments)},t}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,o;r=[n(4)],void 0===(o=function(t){return function(){var e=t().resolve(),n=[],r=this;function o(){for(var t=0;t<n.length;t++){var e=n[t].dfr,o=n[t].pending,i=n[t].fn;if(o)n[t].pending=!1,i.call(r,r).done(function(){var t=Array.prototype.slice.call(arguments);e.resolveWith(r,t)}).fail(function(){e.rejectWith(r,Array.prototype.slice.call(arguments))}).progress(function(){e.notifyWith(r,Array.prototype.slice.call(arguments))});else if(e.isResolved()||e.isRejected()){n.splice(t,1),t--;continue}break}}["done","fail","always","progress","then","state","isRejected","isResolved"].forEach(function(t){this[t]=function(){var o=(n.length?n[n.length-1].dfr:e)[t].apply(r,Array.prototype.slice.call(arguments));return"object"==typeof o&&"then"!==t?r:o}},this),this.promise=function(){return r},this.deferred=function(e){var r=new t;return r.always(function(){o()}),n.push({fn:e,dfr:r,pending:!0}),o(),this}}}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(7)],void 0===(o=function(t){return function(e){var n={};e.on=function(t,e){if("function"==typeof e){t=t.split(" ");for(var r=0;r<t.length;r++){var o=t[r];o.length&&(n[o]||(n[o]=[]),n[o].push(e))}}},e.off=function(t,e){t=t.split(" ");for(var r=0;r<t.length;r++){var o=t[r];if(o.length&&n[o])if("function"==typeof e)for(var i=0;i<n[o].length;i++)n[o][i]===e&&(n[o].splice(i,1),i--);else n[o]=[]}},e.one=function(t,n){"function"==typeof n&&e.on(t,function(){e.off(t,n),n.apply(this,Array.prototype.slice.call(arguments))})},e.trigger=function(r,o){"string"==typeof r&&(r=t(r));for(var i=r.type,a=n[i]||[],s=0;s<a.length;s++){var u=[r];if(Array.isArray(o)&&(u=u.concat(o)),a[s].apply(e,u),r.isImmediatePropagationStopped()||r.isPropagationStopped())break}return r}}}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(0)],void 0===(o=function(t){function e(){return!0}function n(){return!1}var r=function(e,n){if(!(this instanceof r))return new r(e,n);this.type=e,n&&t.extend(this,n),this.timeStamp=Date.now()};return r.prototype={constructor:r,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=e},stopPropagation:function(){this.isPropagationStopped=e},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=e,this.stopPropagation()}},r}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(3),n(0)],void 0===(o=function(t,e,n){return e.MQTT={},e.MQTT.getSubscription=function(r,o){var i;if(r instanceof e)i=r,r=r.id();else if(!n.isId(r))throw"First argument must be a Device object or a Device id !";return t.request({url:"/devices/"+r+"/subscription",dataType:"json",context:i,converter:function(t){return i instanceof e&&(i.subscription=t),t}},o)},e.MQTT}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(3),n(0)],void 0===(o=function(t,e,n){return e.Http={},e.Http.getSpecification=function(r,o){var i;if(r instanceof e)i=r,r=r.id();else if(!n.isId(r))throw"First argument must be a Device object or a Device id !";return t.request({url:"/devices/"+r+"/specification",dataType:"json",context:i,converter:function(t){return i instanceof e&&(i.swaggerSpecification=t),t}},o)},e.Http}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(0),n(2),n(4)],void 0===(o=function(t,e,n,r){var o=function(t){n.call(this,t)};return e.inherits(o,n),o.prototype.size=function(){return this._json.size||0},o.prototype.iconLink=function(e){return this._json.hasIcon?t.toApiUrl("apps/"+this.id()+"/icon",e):null},o.prototype.getContentUrl=function(e){return t.toApiUrl("apps/"+this.id(),e)},o.prototype.contentModifiedDate=function(){return new Date(this._json.contentModifiedDate)},o.prototype.scope=function(){return"string"==typeof this._json.scope?this._json.scope:""},o.prototype.version=function(){return this._json.version||null},o.prototype.read=function(e){var n=[].slice.call(arguments);return this.deferred(function(){return n.unshift(this),o.read.apply(t,n)})},o.prototype.write=function(e,n){var r=[].slice.call(arguments);return this.deferred(function(){return r.unshift(this),o.write.apply(t,r)})},o.create=function(n,o){if(n.content&&(n.content=e.btoa(n.content)),n.icon){if(n.icon instanceof e.Blob){if(!e.FileReader)throw"no FileReader instance found";var i=new e.FileReader,a=r();return i.onloadend=function(){n.icon=i.result.substr(i.result.indexOf(";base64,")+8),t.request({url:"/apps",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:n,converter:t.resourceConverter}).done(function(){a.resolveWith(this,Array.prototype.slice.call(arguments))}).fail(function(){a.rejectWith(this,Array.prototype.slice.call(arguments))})},i.readAsDataURL(n.icon),a.done(o).done(function(){t.trigger("ething.app.created",[this])}).promise()}if(n.icon instanceof ArrayBuffer){for(var s="",u=new Uint8Array(n.icon),c=0;c<u.byteLength;c++)s+=String.fromCharCode(u[c]);n.icon=e.btoa(s)}else if("string"!=n.icon)throw"invalid type for the icon attribute"}return t.request({url:"/apps",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:n,converter:t.resourceConverter},o).done(function(e){t.trigger("ething.app.created",[e])})},o.read=function(n,r){var i,a=null;if(n instanceof o)i=n,a=n.id();else{if(!e.isId(n))throw"First argument must be a File object or a file id !";a=n}var s=r;return t.request({url:"/apps/"+a,method:"GET",dataType:"text",context:i},s)},o.write=function(n,r,i){var a,s=null;if(n instanceof o)a=n,s=n.id();else{if(!e.isId(n))throw"First argument must be a File object or a file id !";s=n}if("string"!=typeof r)throw"Second argument must be a string !";var u=i;return t.request({url:"/apps/"+s,dataType:"json",method:"PUT",contentType:"string"==typeof r?"text/plain":"application/octet-stream",data:r,context:a,converter:t.resourceConverter},u)},o.getIcon=function(n,r){var i,a=null;if(n instanceof o)i=n,a=n.id();else{if(!e.isId(n))throw"First argument must be a File object or a file id !";a=n}var s=r;return t.request({url:"/apps/"+a+"/icon",method:"GET",dataType:e.isNode?"buffer":"blob",context:i},s)},t.App=o,o}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(0),n(2)],void 0===(o=function(t,e,n){var r=function(t){n.call(this,t)};return e.inherits(r,n),r.prototype.size=function(){return this._json.size},r.prototype.expireAfter=function(){return this._json.expireAfter||null},r.prototype.mime=function(){return this._json.mime},r.prototype.contentModifiedDate=function(){return new Date(this._json.contentModifiedDate)},r.prototype.thumbnailLink=function(e){return this._json.hasThumbnail?t.toApiUrl("files/"+this.id()+"/thumbnail",e):null},r.prototype.getContentUrl=function(e){return t.toApiUrl("files/"+this.id(),e)},r.prototype.isText=function(){return this._json.isText},r.prototype.isScript=function(){return this._json.isText&&"application/javascript"===this._json.mime},r.prototype.execute=function(e,n){e=[].slice.call(arguments);return this.deferred(function(){return e.unshift(this),r.execute.apply(t,e)})},r.prototype.read=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.read.apply(t,o)})},r.prototype.write=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.write.apply(t,o)})},r.create=function(e,n){return"string"==typeof e&&(e={name:e}),t.request({url:"/files",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:e,converter:t.resourceConverter},n).done(function(e){t.trigger("ething.file.created",[e])})},r.read=function(n,o,i){var a;if(n instanceof r)a=n,n=n.id();else if(!e.isId(n))throw"First argument must be a File object or a file id !";return void 0===i&&"function"==typeof o&&(i=o,o=!1),t.request({url:"/files/"+n,method:"GET",dataType:o?e.isNode?"buffer":"blob":"text",context:a},i)},r.execute=function(n,o,i){var a;if(n instanceof r)a=n,n=n.id();else if(!e.isId(n))throw"First argument must be a File object or a file id !";return void 0===i&&"function"==typeof o&&(i=o,o=null),t.request({url:"/files/"+n+"/execute?"+e.param({args:o}),method:"GET",dataType:"json",context:a},i)},r.write=function(n,o,i){var a,s=null;if(n instanceof r)a=n,s=n.id();else{if(!e.isId(n))throw"First argument must be a File object or a file id !";s=n}var u=i;return t.request({url:"/files/"+s,dataType:"json",method:"PUT",contentType:"string"==typeof o?"text/plain":"application/octet-stream",data:o,context:a,converter:t.resourceConverter},u)},t.File=r,r}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1)],void 0===(o=function(t){var e=function(e,n,r){var o={};if(3==arguments.length)o.body=n,o.subject=e;else if(2==arguments.length)"string"==typeof n?(o.subject=e,o.body=n):(o.body=e,r=n);else{if(1!=arguments.length)throw"Bad arguments!";o.body=e}return t.request({url:"/notification",method:"POST",contentType:"application/json; charset=utf-8",data:o},r)};return t.notify=e,e}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(0)],void 0===(o=function(t,e){var n={get:function(e){return t.request({url:"/settings",dataType:"json",method:"GET"},e)},set:function(n,r){if(!e.isPlainObject(n))throw"First argument must be an object !";return t.request({url:"/settings",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:n,headers:{"X-HTTP-Method-Override":"PATCH"}},r)}};return t.settings=n,n}.apply(e,r))||(t.exports=o)},function(t,e,n){var r;void 0===(r=function(){var t=function(e){this.constructor.prototype.__proto__=t.prototype,t.captureStackTrace(this,this.constructor),this.name="EThing.Error","string"==typeof e&&(e={message:e}),e instanceof t&&(e={message:e.message}),extend(this,{message:"unknown error"},e)};return t}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){return{isNode:!1,btoa:btoa,atob:atob,XMLHttpRequest:XMLHttpRequest,Blob:Blob,Buffer:function(){},FileReader:FileReader||null,FileReaderSync:FileReaderSync||null}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,o;r=[n(1),n(0),n(2)],void 0===(o=function(t,e,n){var r=function(t){n.call(this,t)};return e.inherits(r,n),r.prototype.length=function(){return this._json.length},r.prototype.maxLength=function(){return this._json.maxLength},r.prototype.expireAfter=function(){return this._json.expireAfter},r.prototype.keys=function(){var t=[];for(var e in this._json.keys)this._json.keys.hasOwnProperty(e)&&t.push(e);return t},r.prototype.contentModifiedDate=function(){return new Date(this._json.contentModifiedDate)},r.prototype.select=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.select.apply(t,o)})},r.prototype.computeStatistics=function(e,n,o){var i=[].slice.call(arguments);return this.deferred(function(){return i.unshift(this),r.computeStatistics.apply(t,i)})},r.prototype.removeRow=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.removeRow.apply(t,o)})},r.prototype.replaceRow=function(e,n){var o=[].slice.call(arguments);return this.deferred(function(){return o.unshift(this),r.replaceRow.apply(t,o)})},r.prototype.findOneAndReplace=function(e,n,o,i){var a=[].slice.call(arguments);return this.deferred(function(){return a.unshift(this),r.findOneAndReplace.apply(t,a)})},r.prototype.insert=function(t,e){var n=[].slice.call(arguments);return this.deferred(function(){return n.unshift(this),r.insert.apply(this,n)})},r.prototype.import=function(t,e){var n=[].slice.call(arguments);return this.deferred(function(){return n.unshift(this),r.import.apply(this,n)})},r.prototype.getContentUrl=function(e){return t.toApiUrl("tables/"+this.id(),e)},r.create=function(e,n){return"string"==typeof e&&(e={name:e}),t.request({url:"/tables",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:e,converter:t.resourceConverter},n).done(function(e){t.trigger("ething.table.created",[e])})},r.select=function(n,o,i){var a,s=null;if(n instanceof r)a=n,s=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";s=n}return void 0===i&&"function"==typeof o&&(i=o,o=null),o=o||{},Array.isArray(o.fields)&&(o.fields=o.fields.join(",")),t.request({url:"/tables/"+s+"?"+e.param({start:o.start,length:o.length,sort:o.sort,q:o.query,fields:o.fields,datefmt:o.datefmt}),method:"GET",dataType:"json",context:a},i)},r.computeStatistics=function(n,o,i,a){var s,u=null;if(n instanceof r)s=n,u=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";u=n}return void 0===a&&"function"==typeof i&&(a=i,i=null),t.request({url:"/tables/"+u+"/statistics?"+e.param({key:o,q:i}),method:"GET",dataType:"json",context:s},a)},r.removeRow=function(n,o,i){var a,s=null;if(n instanceof r)a=n,s=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";s=n}var u=Array.isArray(o)?o:[o],c=i;return t.request({url:"/tables/"+s+"/remove",dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:u,context:a,converter:t.resourceConverter},c)},r.replaceRow=function(n,o,i){var a,s=null;if(n instanceof r)a=n,s=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";s=n}if("object"==typeof o&&!e.isId(o.id))throw"Second argument must be an object containing at least a document id";var u=o.id,c=i;return t.request({url:"/tables/"+s+"/id/"+u,dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:o,context:a,headers:{"X-HTTP-Method-Override":"PATCH"}},c)},r.findOneAndReplace=function(n,o,i,a,s){var u,c=null,f=s,p=!1;if(n instanceof r)u=n,c=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";c=n}if("string"!=typeof o)throw"Second argument must be a query string";if("object"!=typeof i)throw"Third argument must be an object";return void 0===s&&"function"==typeof a&&(f=a,p=!1),"boolean"==typeof a&&(p=a),t.request({url:"/tables/"+c+"/replace?"+e.param({q:o,upsert:p}),dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:i,context:u,converter:t.resourceConverter},f)},r.insert=function(n,o,i,a){var s,u,c,f=null;if(n instanceof r)u=n,f=n.id();else{if(!e.isId(n))throw"First argument must be a Table object or a table id !";f=n}return"string"==typeof i?(c=i,s=a):s=i,t.request({url:"/tables/"+f+"?"+e.param({invalid_field:c}),dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:o,context:u,converter:t.resourceConverter},s)},r.import=function(n,o){var i,a,s,u;if(n instanceof r)i=n,n=n.id();else if(!e.isId(n))throw"First argument must be a Table object or a table id !";if(!Array.isArray(o))throw"The data must be an array of objects";for(var c=2;c<arguments.length;c++)switch(typeof arguments[c]){case"function":u=arguments[c];break;case"boolean":s=arguments[c];break;case"string":a=arguments[c]}return t.request({url:"/tables/"+n+"?"+e.param({skip_error:s,invalid_field:a}),dataType:"json",method:"PUT",contentType:"application/json; charset=utf-8",data:o,context:i,converter:t.resourceConverter},u)},t.Table=r,r}.apply(e,r))||(t.exports=o)},function(t,e,n){var r,o;r=[n(1),n(2),n(13),n(12),n(11),n(16),n(10),n(3),n(9),n(8)],void 0===(o=function(t,e,n,r,o,i,a,s){return t}.apply(e,r))||(t.exports=o)}]);